{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///Dante2.min.js","webpack:///./src/index.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack:///external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack:///./src/model/index.js","webpack:///./src/utils/selection.js","webpack:///./src/styles/fonts/dante/dante.eot","webpack:///./src/styles/fonts/dante/fontello.eot","webpack:///./src/components/App.js","webpack:///./src/components/blocks/embed.js","webpack:///./src/components/blocks/image.js","webpack:///./src/components/blocks/placeholder.js","webpack:///./src/components/blocks/video.js","webpack:///./src/components/debug.js","webpack:///./src/components/decorators/link.js","webpack:///./src/components/popovers/addButton.js","webpack:///./src/components/popovers/image.js","webpack:///./src/components/popovers/link.js","webpack:///./src/components/popovers/toolTip.js","webpack:///./src/utils/find_entities.js","webpack:///./src/utils/html2content.js","webpack:///./src/utils/save_content.js","webpack:///./src/styles/fonts/dante/dante.svg","webpack:///./src/styles/fonts/dante/dante.ttf","webpack:///./src/styles/fonts/dante/dante.woff","webpack:///./src/styles/fonts/dante/fontello.svg","webpack:///./src/styles/fonts/dante/fontello.ttf","webpack:///./src/styles/fonts/dante/fontello.woff"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_13__","webpackJsonpDante2","0","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_App","_dante","_draft","Dante","DanteEditor","6","13","27","addNewBlockAt","updateTextOfBlock","updateDataOfBlock","resetBlockWithType","addNewBlock","getCurrentBlock","getNode","getDefaultBlockData","undefined","_immutable","_draftJs","blockType","initialData","arguments","length","window","t","getSelection","document","selection","createRange","text","editorState","selectionState","contentState","getCurrentContent","block","getBlockForKey","getStartKey","newType","isCollapsed","key","blockMap","getBlockMap","currentBlock","getLength","getType","newBlock","merge","type","data","newContentState","set","selectionAfter","EditorState","push","get","newText","console","log","getText","substr","anchorOffset","focusOffset","newData","getKey","pivotBlockKey","newBlockType","content","blocksBefore","toSeq","takeUntil","v","blocksAfter","skipUntil","rest","newBlockKey","genKey","ContentBlock","characterList","getCharacterList","slice","depth","Map","newBlockMap","concat","toOrderedMap","newContent","selectionBefore","anchorKey","focusKey","isBackward","62","getSelectionRect","selected","_rect","getRangeAt","getBoundingClientRect","rect","top","getClientRects","anchorNode","isEmptyline","getSelectedBlockNode","rangeCount","node","startContainer","getAttribute","parentNode","183","p","184","225","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_classCallCheck2","_classCallCheck3","_react","_react2","_reactDom","_reactDom2","_immutable2","_DraftPasteProcessor","_DraftPasteProcessor2","_draftConvert","_isSoftNewlineEvent","_isSoftNewlineEvent2","_index","_image","_image2","_link","_link2","_selection","_addButton","_addButton2","_toolTip","_toolTip2","_link3","_link4","_debug","_debug2","_find_entities","_find_entities2","_image3","_image4","_embed","_embed2","_video","_video2","_placeholder","_placeholder2","_save_content","_save_content2","_html2content","_html2content2","options","config","fromJS","defaultOptions","mergeDeep","toJS","prototype","el","read_only","spellcheck","title_placeholder","body_placeholder","widgets","title","icon","editable","renderable","breakOnContinuous","wrapper_class","selected_class","selectedFn","_block$getData$toJS","getData","direction","handleEnterWithoutText","ctx","state","onChange","handleEnterWithText","widget_options","displayOnInlineTooltip","insertion","insert_block","upload_url","upload_headers","upload_formName","upload_callback","image_upload_callback","image_delete_callback","image_caption_placeholder","endpoint","api_key","placeholder","caption","provisory_text","tooltips","ref","component","displayOnSelection","selectionElements","block_types","label","style","xhr","before_handler","success_handler","error_handler","data_storage","url","method","failure_handler","interval","default_wrappers","className","continuousBlocks","key_commands","alt-shift","cmd","alt-cmd","character_convert_mapping","> ","*.","* ","- ","1.","# ","##","==","` ","getContent","render","editor","createElement","getElementById","_React$Component","props","_this","call","initializeState","bind","refreshSelection","forceRender","dispatchChangesToSave","setPreContent","focus","getEditorState","emitSerializedOutput","decodeEditorContent","getTextFromEditor","getLocks","addLock","removeLock","renderableBlocks","defaultWrappers","blockRenderer","handleBlockRenderer","blockStyleFn","getDataBlock","styleForBlock","handlePasteText","handleTXTPaste","handleHTMLPaste","handlePasteImage","handleDroppedFiles","handleUpArrow","handleDownArrow","handleReturn","handleBeforeInput","handleKeyCommand","findCommandKey","KeyBindingFn","updateBlockData","setDirection","toggleEditable","closePopOvers","relocateTooltips","tooltipsWithProp","tooltipHasSelectionElement","handleShowPopLinkOver","handleHidePopLinkOver","showPopLinkOver","hidePopLinkOver","decorator","CompositeDecorator","strategy","blockRenderMap","image","element","video","embed","unstyled","wrapper","paragraph","extendedBlockRenderMap","DefaultDraftBlockRenderMap","locks","debug","save","editorContent","createEmpty","newEditorState","s","getFocusOffset","getAnchorKey","SelectionState","newState","forceSelection","createWithContent","_this2","setState","handleTooltipDisplayOn","tooltip","setTimeout","_this3","clearTimeout","saveTimeout","store","raw","convertToRaw","raw_as_json","new_content","convertFromRaw","c","out","getBlocksAsArray","map","o","join","emitHTML2","html","convertToHTML","entityToHTML","entity","originalText","filter","getEntityAt","Entity","includes","dataBlock","eval","setEditorState","is_selected","defaultBlockClass","find","prop","display","_this4","items","refs","relocate","Modifier","replaceText","endKey","getEndKey","first","pushedContentState","files","_this5","file","opts","URL","createObjectURL","_this6","e","_this7","_this8","altKey","metaKey","ctrlKey","config_block","splitBlock","a","getElementsByClassName","pos","scrollTo","scrollY","getStartOffset","indexOf","chars","endOffset","getEndOffset","endEntityType","afterEndKey","afterEndEntityType","insertText","blockLength","getAnchorOffset","blockTo","command","currentBlockType","split","RichUtils","toggleInlineStyle","toggleBlockType","opt","shiftKey","which","getDefaultKeyBinding","direction_type","testEmitAndDecode","_this9","hide","_this10","coords","findDOMNode","anchor_popover","href","setPosition","show","isHover","cancelHide","_this11","hideTimeout","_this12","id","suppressContentEditableWarning","onClick","Editor","blockRendererFn","onUpArrow","onDownArrow","handlePastedText","handlePastedFiles","keyBindingFn","readOnly","i","configTooltip","handleOnMouseOver","handleOnMouseOut","Component","226","_axios","_axios2","EmbedBlock","updateData","dataForUpdate","componentDidMount","embed_data","defaultData","error","existing_data","_props","_props$blockProps","blockProps","then","result","response","error_message","classForImage","images","picture","target","backgroundImage","description","provider_url","227","_assign","_assign2","ImageBlock","blockPropsSrc","defaultUrl","defaultAspectRatio","replaceImg","startLoader","stopLoader","handleUpload","aspectRatio","updateDataSelection","handleGrafFigureSelectImg","getUploadUrl","uploadFile","uploadCompleted","updateProgressBar","placeHolderEnabled","placeholderText","handleFocus","loading","loading_progress","enabled","defaultPlaceholder","width","height","aspect_ratio","src","ratio","getAspectRatio","w","h","maxWidth","maxHeight","fill_ratio","forceUpload","img","Image","image_tag","self","onload","newselection","preventDefault","getBase64Image","canvas","getContext","drawImage","dataURL","toDataURL","formatData","formData","FormData","formName","append","getUploadHeaders","handleUp","headers","onUploadProgress","upload_error_callback","json_response","n","json","complete","lengthComputable","loaded","total","paddingBottom","Loader","toggle","progress","onMouseDown","EditorBlock","_React$Component2","apply","Math","round","228","PlaceholderBlock","placeholderFromProps","defaultText","classForDefault","229","VideoBlock","thumbnail_url","tabIndex","dangerouslySetInnerHTML","__html","230","_stringify","_stringify2","Debug","handleToggleReadOnly","handleTestEmitAndDecode","handleTestEmitTEXT","testEmitTEXT","logState","toggleDisplay","open","output","d","231","Link","_validateLink","_checkProtocol","_showPopLinkOver","_hidePopLinkOver","pattern","RegExp","test","str","alert","link","entityKey","onMouseOver","onMouseOut","children","232","DanteInlineTooltip","_toggleScaled","scale","collapse","componentWillReceiveProps","clickOnFileUpload","handlePlaceholder","insertImage","handleFileInput","clickHandler","position","left","scaled","b","ev","newProps","activeClass","isActive","scaledClass","scaledWidth","fileInput","click","input","fileList","request_block","getItems","isDescendant","parent","child","nativeSelection","selectionBoundary","scrollX","data-action","item","InlineTooltipItem","multiple","_len","args","Array","_key","233","DanteImagePopover","handleClick","buttons","parentBoundary","image_popover","padd","offsetWidth","getStyle","DanteImagePopoverItem","234","DanteAnchorPopover","dante_popover","visibility","235","DanteTooltip","_clickInlineHandler","_clickBlockHandler","displayLinkMode","displayActiveMenu","_enableLinkMode","_disableLinkMode","handleInputEnter","confirmLink","inlineItems","blockItems","getDefaultValue","getVisibleSelectionRect","link_mode","dante_menu","hideMenu","urlValue","currentTarget","value","create","toggleLink","getPosition","dante_menu_input","selectedEntity","findEntityRanges","character","getEntity","start","end","selStart","selEnd","getIsBackward","onKeyPress","defaultValue","DanteTooltipItem","currentStyle","getCurrentInlineStyle","DanteTooltipLink","enableLinkMode","activeClassInline","activeClassBlock","has","_React$Component3","_len2","_key2","promptForLink","236","findEntities","entityType","instance","contentBlock","callback","res","mergeData","237","compose","getBlockSpecForElement","imgElement","contentType","imgSrc","wrapBlockSpec","blockSpec","tempEl","innerText","replaceElement","oldEl","newEl","HTMLElement","upEl","getUpEl","insertBefore","tagName","elementToBlockSpecElement","imgReplacer","customHTML2Content","HTML","blockRn","tempDoc","DOMParser","parseFromString","querySelectorAll","forEach","body","innerHTML","contentBlocks","convertFromHTML","getSafeBodyFromHTML","JSON","parse","ContentState","createFromBlockArray","238","SaveBehavior","handleStore","timeout","checkforStore","blocks","getUrl","getMethod","isChanged","is","editor_content","text_content","350","351","371","372","373","374","375","376"],"mappings":"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","file":"Dante2.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dante2\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Dante2\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_13__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Dante2\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"Dante2\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_13__) {\nreturn webpackJsonpDante2([1],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _App = __webpack_require__(225);\n\t\n\tvar _dante = __webpack_require__(350);\n\t\n\tvar _dante2 = _interopRequireDefault(_dante);\n\t\n\tvar _draft = __webpack_require__(351);\n\t\n\tvar _draft2 = _interopRequireDefault(_draft);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tmodule.exports = {\n\t  Dante: _App.Dante,\n\t  DanteEditor: _App.DanteEditor\n\t};\n\t\n\t//window.Dante = Dante\n\t//window.Dante.DanteEditor = DanteEditor\n\t\n\t/*\n\texport default class Dante2 {\n\t  constructor() {\n\t    this._name = 'Dante2';\n\t  }\n\t  get name() {\n\t    return this._name;\n\t  }\n\t}*/\n\n/***/ },\n\n/***/ 6:\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n\n/***/ 13:\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n/***/ },\n\n/***/ 27:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.addNewBlockAt = exports.updateTextOfBlock = exports.updateDataOfBlock = exports.resetBlockWithType = exports.addNewBlock = exports.getCurrentBlock = exports.getNode = exports.getDefaultBlockData = undefined;\n\t\n\tvar _immutable = __webpack_require__(53);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\t/*\n\tUsed from [react-rte](https://github.com/brijeshb42/medium-draft)\n\tby [brijeshb42](https://github.com/brijeshb42/medium-draft)\n\t*/\n\t\n\t/*\n\tReturns default block-level metadata for various block type. Empty object otherwise.\n\t*/\n\tvar getDefaultBlockData = exports.getDefaultBlockData = function getDefaultBlockData(blockType) {\n\t  var initialData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\n\t  switch (blockType) {\n\t    //case Block.TODO: return { checked: false };\n\t    default:\n\t      return initialData;\n\t  }\n\t};\n\t\n\tvar getNode = exports.getNode = function getNode() {\n\t  var root = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window;\n\t\n\t  var t = null;\n\t  if (root.getSelection) {\n\t    t = root.getSelection();\n\t  } else if (root.document.getSelection) {\n\t    t = root.document.getSelection();\n\t  } else if (root.document.selection) {\n\t    t = root.document.selection.createRange().text;\n\t  }\n\t  return t;\n\t};\n\t\n\t/*\n\tGet currentBlock in the editorState.\n\t*/\n\tvar getCurrentBlock = exports.getCurrentBlock = function getCurrentBlock(editorState) {\n\t  var selectionState = editorState.getSelection();\n\t  var contentState = editorState.getCurrentContent();\n\t  var block = contentState.getBlockForKey(selectionState.getStartKey());\n\t  return block;\n\t};\n\t\n\t/*\n\tAdds a new block (currently replaces an empty block) at the current cursor position\n\tof the given `newType`.\n\t*/\n\tvar addNewBlock = exports.addNewBlock = function addNewBlock(editorState) {\n\t  var newType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"unstyled\";\n\t  var initialData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t  var selectionState = editorState.getSelection();\n\t  if (!selectionState.isCollapsed()) {\n\t    return editorState;\n\t  }\n\t  var contentState = editorState.getCurrentContent();\n\t  var key = selectionState.getStartKey();\n\t  var blockMap = contentState.getBlockMap();\n\t  var currentBlock = getCurrentBlock(editorState);\n\t  if (!currentBlock) {\n\t    return editorState;\n\t  }\n\t  if (currentBlock.getLength() === 0) {\n\t    if (currentBlock.getType() === newType) {\n\t      return editorState;\n\t    }\n\t    var newBlock = currentBlock.merge({\n\t      type: newType,\n\t      data: getDefaultBlockData(newType, initialData)\n\t    });\n\t    var newContentState = contentState.merge({\n\t      blockMap: blockMap.set(key, newBlock),\n\t      selectionAfter: selectionState\n\t    });\n\t    return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  }\n\t  return editorState;\n\t};\n\t\n\t/*\n\tChanges the block type of the current block.\n\t*/\n\tvar resetBlockWithType = exports.resetBlockWithType = function resetBlockWithType(editorState) {\n\t  var newType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"unstyled\";\n\t  var data = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\t\n\t  var contentState = editorState.getCurrentContent();\n\t  var selectionState = editorState.getSelection();\n\t  var key = selectionState.getStartKey();\n\t  var blockMap = contentState.getBlockMap();\n\t  var block = blockMap.get(key);\n\t\n\t  var newText = '';\n\t  console.log(\"DATA FOR PLACEHOLDER!\", data);\n\t  var text = block.getText();\n\t  if (block.getLength() >= 2) {\n\t    newText = text.substr(1);\n\t  }\n\t\n\t  /*if(data.text){\n\t    newText = data.text\n\t  }*/\n\t\n\t  //let newText = data.text\n\t\n\t  var newBlock = block.merge({\n\t    text: newText,\n\t    type: newType,\n\t    data: getDefaultBlockData(newType, data)\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: blockMap.set(key, newBlock),\n\t    selectionAfter: selectionState.merge({\n\t      anchorOffset: 0,\n\t      focusOffset: 0\n\t    })\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t};\n\t\n\t/*\n\tUpdate block-level metadata of the given `block` to the `newData`/\n\t*/\n\tvar updateDataOfBlock = exports.updateDataOfBlock = function updateDataOfBlock(editorState, block, newData) {\n\t  var contentState = editorState.getCurrentContent();\n\t  var newBlock = block.merge({\n\t    data: newData\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock)\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  // return editorState;\n\t};\n\t\n\tvar updateTextOfBlock = exports.updateTextOfBlock = function updateTextOfBlock(editorState, block, text) {\n\t  var contentState = editorState.getCurrentContent();\n\t  var newBlock = block.merge({\n\t    text: text\n\t  });\n\t  var newContentState = contentState.merge({\n\t    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock)\n\t  });\n\t\n\t  return _draftJs.EditorState.push(editorState, newContentState, 'change-block-type');\n\t  // return editorState;\n\t};\n\t\n\t// const BEFORE = -1;\n\t// const AFTER = 1;\n\t\n\t/*\n\tUsed from [react-rte](https://github.com/sstur/react-rte/blob/master/src/lib/insertBlockAfter.js)\n\tby [sstur](https://github.com/sstur)\n\t*/\n\tvar addNewBlockAt = exports.addNewBlockAt = function addNewBlockAt(editorState, pivotBlockKey) {\n\t  var newBlockType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"unstyled\";\n\t  var initialData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\t\n\t  var content = editorState.getCurrentContent();\n\t  var blockMap = content.getBlockMap();\n\t  var block = blockMap.get(pivotBlockKey);\n\t  var blocksBefore = blockMap.toSeq().takeUntil(function (v) {\n\t    return v === block;\n\t  });\n\t  var blocksAfter = blockMap.toSeq().skipUntil(function (v) {\n\t    return v === block;\n\t  }).rest();\n\t  var newBlockKey = (0, _draftJs.genKey)();\n\t\n\t  var newBlock = new _draftJs.ContentBlock({\n\t    key: newBlockKey,\n\t    type: newBlockType,\n\t    text: '',\n\t    characterList: block.getCharacterList().slice(0, 0),\n\t    depth: 0,\n\t    data: (0, _immutable.Map)(getDefaultBlockData(newBlockType, initialData))\n\t  });\n\t\n\t  var newBlockMap = blocksBefore.concat([[pivotBlockKey, block], [newBlockKey, newBlock]], blocksAfter).toOrderedMap();\n\t\n\t  var selection = editorState.getSelection();\n\t\n\t  var newContent = content.merge({\n\t    blockMap: newBlockMap,\n\t    selectionBefore: selection,\n\t    selectionAfter: selection.merge({\n\t      anchorKey: newBlockKey,\n\t      anchorOffset: 0,\n\t      focusKey: newBlockKey,\n\t      focusOffset: 0,\n\t      isBackward: false\n\t    })\n\t  });\n\t  return _draftJs.EditorState.push(editorState, newContent, 'split-block');\n\t};\n\n/***/ },\n\n/***/ 62:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t/*\n\tReturns the `boundingClientRect` of the passed selection.\n\t*/\n\tvar getSelectionRect = exports.getSelectionRect = function getSelectionRect(selected) {\n\t  var _rect = selected.getRangeAt(0).getBoundingClientRect();\n\t  // selected.getRangeAt(0).getBoundingClientRect()\n\t  var rect = _rect && _rect.top ? _rect : selected.getRangeAt(0).getClientRects()[0];\n\t  if (!rect) {\n\t    if (selected.anchorNode && selected.anchorNode.getBoundingClientRect) {\n\t      rect = selected.anchorNode.getBoundingClientRect();\n\t      rect.isEmptyline = true;\n\t    } else {\n\t      return null;\n\t    }\n\t  }\n\t  return rect;\n\t};\n\t\n\t/*\n\tReturns the native selection node.\n\t*/\n\tvar getSelection = exports.getSelection = function getSelection(root) {\n\t  var t = null;\n\t  if (root.getSelection) {\n\t    t = root.getSelection();\n\t  } else if (root.document.getSelection) {\n\t    t = root.document.getSelection();\n\t  } else if (root.document.selection) {\n\t    t = root.document.selection.createRange().text;\n\t  }\n\t  return t;\n\t};\n\t\n\t/*\n\tRecursively finds the DOM Element of the block where the cursor is currently present.\n\tIf not found, returns null.\n\t*/\n\tvar getSelectedBlockNode = exports.getSelectedBlockNode = function getSelectedBlockNode(root) {\n\t  var selection = root.getSelection();\n\t  if (selection.rangeCount === 0) {\n\t    return null;\n\t  }\n\t  var node = selection.getRangeAt(0).startContainer;\n\t  // console.log(node);\n\t  do {\n\t    if (node.getAttribute && node.getAttribute('data-block') === 'true') {\n\t      return node;\n\t    }\n\t    node = node.parentNode;\n\t    // console.log(node);\n\t  } while (node !== null);\n\t  return null;\n\t};\n\n/***/ },\n\n/***/ 183:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/dante.eot\";\n\n/***/ },\n\n/***/ 184:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontello.eot\";\n\n/***/ },\n\n/***/ 225:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\texports.DanteEditor = exports.Dante = undefined;\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _immutable = __webpack_require__(53);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _DraftPasteProcessor = __webpack_require__(157);\n\t\n\tvar _DraftPasteProcessor2 = _interopRequireDefault(_DraftPasteProcessor);\n\t\n\tvar _draftConvert = __webpack_require__(284);\n\t\n\tvar _isSoftNewlineEvent = __webpack_require__(334);\n\t\n\tvar _isSoftNewlineEvent2 = _interopRequireDefault(_isSoftNewlineEvent);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tvar _image = __webpack_require__(233);\n\t\n\tvar _image2 = _interopRequireDefault(_image);\n\t\n\tvar _link = __webpack_require__(234);\n\t\n\tvar _link2 = _interopRequireDefault(_link);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tvar _addButton = __webpack_require__(232);\n\t\n\tvar _addButton2 = _interopRequireDefault(_addButton);\n\t\n\tvar _toolTip = __webpack_require__(235);\n\t\n\tvar _toolTip2 = _interopRequireDefault(_toolTip);\n\t\n\tvar _link3 = __webpack_require__(231);\n\t\n\tvar _link4 = _interopRequireDefault(_link3);\n\t\n\tvar _debug = __webpack_require__(230);\n\t\n\tvar _debug2 = _interopRequireDefault(_debug);\n\t\n\tvar _find_entities = __webpack_require__(236);\n\t\n\tvar _find_entities2 = _interopRequireDefault(_find_entities);\n\t\n\tvar _image3 = __webpack_require__(227);\n\t\n\tvar _image4 = _interopRequireDefault(_image3);\n\t\n\tvar _embed = __webpack_require__(226);\n\t\n\tvar _embed2 = _interopRequireDefault(_embed);\n\t\n\tvar _video = __webpack_require__(229);\n\t\n\tvar _video2 = _interopRequireDefault(_video);\n\t\n\tvar _placeholder = __webpack_require__(228);\n\t\n\tvar _placeholder2 = _interopRequireDefault(_placeholder);\n\t\n\tvar _save_content = __webpack_require__(238);\n\t\n\tvar _save_content2 = _interopRequireDefault(_save_content);\n\t\n\tvar _html2content = __webpack_require__(237);\n\t\n\tvar _html2content2 = _interopRequireDefault(_html2content);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar Dante = exports.Dante = function () {\n\t  function Dante(options) {\n\t    (0, _classCallCheck3['default'])(this, Dante);\n\t\n\t    if (options == null) {\n\t      options = {};\n\t    }\n\t    console.log(\"init editor Dante!\");\n\t\n\t    // deep merge on config\n\t    var config = (0, _immutable.Map)((0, _immutable.fromJS)(this.defaultOptions(options)));\n\t\n\t    this.options = config.mergeDeep(options).toJS();\n\t    console.log(this.options);\n\t  }\n\t\n\t  Dante.prototype.defaultOptions = function defaultOptions(options) {\n\t    // default options\n\t    if (options == null) {\n\t      options = {};\n\t    }\n\t    var defaultOptions = {};\n\t    defaultOptions.el = 'app';\n\t    defaultOptions.content = \"\";\n\t    defaultOptions.read_only = false;\n\t    defaultOptions.spellcheck = false;\n\t    defaultOptions.title_placeholder = \"Title\";\n\t    defaultOptions.body_placeholder = \"Write your story\";\n\t    // @defaultOptions.api_key = \"86c28a410a104c8bb58848733c82f840\"\n\t\n\t    defaultOptions.widgets = [{\n\t      title: 'add an image',\n\t      icon: 'image',\n\t      type: 'image',\n\t      block: _image4['default'],\n\t      editable: true,\n\t      renderable: true,\n\t      breakOnContinuous: true,\n\t      wrapper_class: \"graf graf--figure\",\n\t      selected_class: \"is-selected is-mediaFocused\",\n\t      selectedFn: function selectedFn(block) {\n\t        var _block$getData$toJS = block.getData().toJS(),\n\t            direction = _block$getData$toJS.direction;\n\t\n\t        switch (direction) {\n\t          case \"left\":\n\t            return \"graf--layoutOutsetLeft\";\n\t          case \"center\":\n\t            return \"\";\n\t          case \"wide\":\n\t            return \"sectionLayout--fullWidth\";\n\t          case \"fill\":\n\t            return \"graf--layoutFillWidth\";\n\t        }\n\t      },\n\t      handleEnterWithoutText: function handleEnterWithoutText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      },\n\t      handleEnterWithText: function handleEnterWithText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      },\n\t\n\t      widget_options: {\n\t        displayOnInlineTooltip: true,\n\t        insertion: \"upload\",\n\t        insert_block: \"image\"\n\t      },\n\t      options: {\n\t        upload_url: options.upload_url,\n\t        upload_headers: options.upload_headers,\n\t        upload_formName: options.upload_formName,\n\t        upload_callback: options.image_upload_callback,\n\t        image_delete_callback: options.image_delete_callback,\n\t        image_caption_placeholder: options.image_caption_placeholder\n\t      }\n\t    }, {\n\t      icon: 'embed',\n\t      title: 'insert embed',\n\t      type: 'embed',\n\t      block: _embed2['default'],\n\t      editable: true,\n\t      renderable: true,\n\t      breakOnContinuous: true,\n\t      wrapper_class: \"graf graf--mixtapeEmbed\",\n\t      selected_class: \"is-selected is-mediaFocused\",\n\t      widget_options: {\n\t        displayOnInlineTooltip: true,\n\t        insertion: \"placeholder\",\n\t        insert_block: \"embed\"\n\t      },\n\t      options: {\n\t        endpoint: '//api.embed.ly/1/extract?key=' + options.api_key + '&url=',\n\t        placeholder: 'Paste a link to embed content from another site (e.g. Twitter) and press Enter'\n\t      },\n\t      handleEnterWithoutText: function handleEnterWithoutText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      },\n\t      handleEnterWithText: function handleEnterWithText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      }\n\t    }, {\n\t      icon: 'video',\n\t      title: 'insert video',\n\t      editable: true,\n\t      type: 'video',\n\t      block: _video2['default'],\n\t      renderable: true,\n\t      breakOnContinuous: true,\n\t      wrapper_class: \"graf--figure graf--iframe\",\n\t      selected_class: \" is-selected is-mediaFocused\",\n\t      widget_options: {\n\t        displayOnInlineTooltip: true,\n\t        insertion: \"placeholder\",\n\t        insert_block: \"video\"\n\t      },\n\t      options: {\n\t        endpoint: '//api.embed.ly/1/oembed?key=' + options.api_key + '&url=',\n\t        placeholder: 'Paste a YouTube, Vine, Vimeo, or other video link, and press Enter',\n\t        caption: 'Type caption for embed (optional)'\n\t      },\n\t\n\t      handleEnterWithoutText: function handleEnterWithoutText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      },\n\t      handleEnterWithText: function handleEnterWithText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        return ctx.onChange((0, _index.addNewBlockAt)(editorState, block.getKey()));\n\t      }\n\t    }, {\n\t      renderable: true,\n\t      editable: true,\n\t      block: _placeholder2['default'],\n\t      type: 'placeholder',\n\t      wrapper_class: \"is-embedable\",\n\t      selected_class: \" is-selected is-mediaFocused\",\n\t      widget_options: {\n\t        displayOnInlineTooltip: false\n\t      },\n\t      handleEnterWithText: function handleEnterWithText(ctx, block) {\n\t        var editorState = ctx.state.editorState;\n\t\n\t        var data = {\n\t          provisory_text: block.getText(),\n\t          endpoint: block.getData().get('endpoint'),\n\t          type: block.getData().get('type')\n\t        };\n\t\n\t        return ctx.onChange((0, _index.resetBlockWithType)(editorState, data.type, data));\n\t      }\n\t    }];\n\t\n\t    defaultOptions.tooltips = [{\n\t      ref: 'insert_tooltip',\n\t      component: _toolTip2['default'],\n\t      displayOnSelection: true,\n\t      selectionElements: [\"unstyled\", \"blockquote\", \"ordered-list\", \"unordered-list\", \"unordered-list-item\", \"ordered-list-item\", \"code-block\", 'header-one', 'header-two', 'header-three', 'header-four'],\n\t      widget_options: {\n\t        block_types: [\n\t        // {label: 'p', style: 'unstyled'},\n\t        { label: 'h2', style: 'header-one', type: \"block\" }, { label: 'h3', style: 'header-two', type: \"block\" }, { label: 'h4', style: 'header-three', type: \"block\" }, { label: 'blockquote', style: 'blockquote', type: \"block\" }, { label: 'insertunorderedlist', style: 'unordered-list-item', type: \"block\" }, { label: 'insertorderedlist', style: 'ordered-list-item', type: \"block\" }, { label: 'code', style: 'code-block', type: \"block\" }, { label: 'bold', style: 'BOLD', type: \"inline\" }, { label: 'italic', style: 'ITALIC', type: \"inline\" }]\n\t      }\n\t    }, {\n\t      ref: 'add_tooltip',\n\t      component: _addButton2['default']\n\t    }, {\n\t      ref: 'anchor_popover',\n\t      component: _link2['default']\n\t    }, {\n\t      ref: 'image_popover',\n\t      component: _image2['default']\n\t    }];\n\t\n\t    defaultOptions.xhr = {\n\t      before_handler: null,\n\t      success_handler: null,\n\t      error_handler: null\n\t    };\n\t\n\t    defaultOptions.data_storage = {\n\t      url: null,\n\t      method: \"POST\",\n\t      success_handler: null,\n\t      failure_handler: null,\n\t      interval: 1500\n\t    };\n\t\n\t    defaultOptions.default_wrappers = [{ className: 'graf--p', block: 'unstyled' }, { className: 'graf--h2', block: 'header-one' }, { className: 'graf--h3', block: 'header-two' }, { className: 'graf--h4', block: 'header-three' }, { className: 'graf--blockquote', block: 'blockquote' }, { className: 'graf--insertunorderedlist', block: 'unordered-list-item' }, { className: 'graf--insertorderedlist', block: 'ordered-list-item' }, { className: 'graf--code', block: 'code-block' }, { className: 'graf--bold', block: 'BOLD' }, { className: 'graf--italic', block: 'ITALIC' }];\n\t\n\t    defaultOptions.continuousBlocks = [\"unstyled\", \"blockquote\", \"ordered-list\", \"unordered-list\", \"unordered-list-item\", \"ordered-list-item\", \"code-block\"];\n\t\n\t    defaultOptions.key_commands = {\n\t      \"alt-shift\": [{ key: 65, cmd: 'add-new-block' }],\n\t      \"alt-cmd\": [{ key: 49, cmd: 'toggle_block:header-one' }, { key: 50, cmd: 'toggle_block:header-two' }, { key: 53, cmd: 'toggle_block:blockquote' }],\n\t      \"cmd\": [{ key: 66, cmd: 'toggle_inline:BOLD' }, { key: 73, cmd: 'toggle_inline:ITALIC' }, { key: 75, cmd: 'insert:link' }]\n\t    };\n\t\n\t    defaultOptions.character_convert_mapping = {\n\t      '> ': \"blockquote\",\n\t      '*.': \"unordered-list-item\",\n\t      '* ': \"unordered-list-item\",\n\t      '- ': \"unordered-list-item\",\n\t      '1.': \"ordered-list-item\",\n\t      '# ': 'header-one',\n\t      '##': 'header-two',\n\t      '==': \"unstyled\",\n\t      '` ': \"code-block\"\n\t    };\n\t\n\t    return defaultOptions;\n\t  };\n\t\n\t  Dante.prototype.getContent = function getContent() {\n\t    //console.log @options.content\n\t    //console.log \"IS POC DATA?\", @options.content is PocData\n\t    //return PocData if @options.poc\n\t    //console.log @options.content , PocData\n\t    //PocData\n\t    return this.options.content;\n\t  };\n\t\n\t  Dante.prototype.render = function render() {\n\t    return this.editor = _reactDom2['default'].render(_react2['default'].createElement(DanteEditor, { content: this.getContent(), config: this.options }), document.getElementById(this.options.el));\n\t  };\n\t\n\t  return Dante;\n\t}();\n\t\n\tvar DanteEditor = exports.DanteEditor = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteEditor, _React$Component);\n\t\n\t  function DanteEditor(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteEditor);\n\t\n\t    //window.main_editor = @\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.initializeState = _this.initializeState.bind(_this);\n\t    _this.refreshSelection = _this.refreshSelection.bind(_this);\n\t    _this.forceRender = _this.forceRender.bind(_this);\n\t    _this.onChange = _this.onChange.bind(_this);\n\t    _this.dispatchChangesToSave = _this.dispatchChangesToSave.bind(_this);\n\t    _this.setPreContent = _this.setPreContent.bind(_this);\n\t    _this.focus = _this.focus.bind(_this);\n\t    _this.getEditorState = _this.getEditorState.bind(_this);\n\t    _this.emitSerializedOutput = _this.emitSerializedOutput.bind(_this);\n\t    _this.decodeEditorContent = _this.decodeEditorContent.bind(_this);\n\t    _this.getTextFromEditor = _this.getTextFromEditor.bind(_this);\n\t    _this.getLocks = _this.getLocks.bind(_this);\n\t    _this.addLock = _this.addLock.bind(_this);\n\t    _this.removeLock = _this.removeLock.bind(_this);\n\t    _this.renderableBlocks = _this.renderableBlocks.bind(_this);\n\t    _this.defaultWrappers = _this.defaultWrappers.bind(_this);\n\t    _this.blockRenderer = _this.blockRenderer.bind(_this);\n\t    _this.handleBlockRenderer = _this.handleBlockRenderer.bind(_this);\n\t    _this.blockStyleFn = _this.blockStyleFn.bind(_this);\n\t    _this.getDataBlock = _this.getDataBlock.bind(_this);\n\t    _this.styleForBlock = _this.styleForBlock.bind(_this);\n\t    _this.handlePasteText = _this.handlePasteText.bind(_this);\n\t    _this.handleTXTPaste = _this.handleTXTPaste.bind(_this);\n\t    _this.handleHTMLPaste = _this.handleHTMLPaste.bind(_this);\n\t    _this.handlePasteImage = _this.handlePasteImage.bind(_this);\n\t    _this.handleDroppedFiles = _this.handleDroppedFiles.bind(_this);\n\t    _this.handleUpArrow = _this.handleUpArrow.bind(_this);\n\t    _this.handleDownArrow = _this.handleDownArrow.bind(_this);\n\t    _this.handleReturn = _this.handleReturn.bind(_this);\n\t    _this.handleBeforeInput = _this.handleBeforeInput.bind(_this);\n\t    _this.handleKeyCommand = _this.handleKeyCommand.bind(_this);\n\t    _this.findCommandKey = _this.findCommandKey.bind(_this);\n\t    _this.KeyBindingFn = _this.KeyBindingFn.bind(_this);\n\t    _this.updateBlockData = _this.updateBlockData.bind(_this);\n\t    _this.setDirection = _this.setDirection.bind(_this);\n\t    _this.toggleEditable = _this.toggleEditable.bind(_this);\n\t    _this.closePopOvers = _this.closePopOvers.bind(_this);\n\t    _this.relocateTooltips = _this.relocateTooltips.bind(_this);\n\t    _this.tooltipsWithProp = _this.tooltipsWithProp.bind(_this);\n\t    _this.tooltipHasSelectionElement = _this.tooltipHasSelectionElement.bind(_this);\n\t    _this.handleShowPopLinkOver = _this.handleShowPopLinkOver.bind(_this);\n\t    _this.handleHidePopLinkOver = _this.handleHidePopLinkOver.bind(_this);\n\t    _this.showPopLinkOver = _this.showPopLinkOver.bind(_this);\n\t    _this.hidePopLinkOver = _this.hidePopLinkOver.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    _this.decorator = new _draftJs.CompositeDecorator([{\n\t      strategy: _find_entities2['default'].bind(null, 'LINK', _this),\n\t      component: _link4['default']\n\t    }]);\n\t\n\t    _this.blockRenderMap = (0, _immutable.Map)({\n\t      \"image\": {\n\t        element: 'figure'\n\t      },\n\t      \"video\": {\n\t        element: 'figure'\n\t      },\n\t      \"embed\": {\n\t        element: 'div'\n\t      },\n\t      'unstyled': {\n\t        wrapper: null,\n\t        element: 'div'\n\t      },\n\t      'paragraph': {\n\t        wrapper: null,\n\t        element: 'div'\n\t      },\n\t      'placeholder': {\n\t        wrapper: null,\n\t        element: 'div'\n\t      }\n\t\n\t    });\n\t\n\t    _this.extendedBlockRenderMap = _draftJs.DefaultDraftBlockRenderMap.merge(_this.blockRenderMap);\n\t\n\t    _this.state = {\n\t      editorState: _this.initializeState(),\n\t      read_only: _this.props.config.read_only,\n\t      blockRenderMap: _this.extendedBlockRenderMap,\n\t      locks: 0,\n\t      debug: _this.props.config.debug\n\t    };\n\t\n\t    _this.widgets = _this.props.config.widgets;\n\t    _this.tooltips = _this.props.config.tooltips;\n\t\n\t    _this.key_commands = _this.props.config.key_commands;\n\t\n\t    _this.continuousBlocks = _this.props.config.continuousBlocks;\n\t\n\t    _this.block_types = _this.props.config.block_types;\n\t\n\t    _this.default_wrappers = _this.props.config.default_wrappers;\n\t\n\t    _this.character_convert_mapping = _this.props.config.character_convert_mapping;\n\t\n\t    _this.save = new _save_content2['default']({\n\t      getLocks: _this.getLocks,\n\t      config: {\n\t        xhr: _this.props.config.xhr,\n\t        data_storage: _this.props.config.data_storage\n\t      },\n\t      editorState: _this.state.editorState,\n\t      editorContent: _this.emitSerializedOutput()\n\t    });\n\t    return _this;\n\t  }\n\t\n\t  DanteEditor.prototype.initializeState = function initializeState() {\n\t    if (this.props.content) {\n\t      //and @.props.content.trim() isnt \"\"\n\t      return this.decodeEditorContent(this.props.content);\n\t    } else {\n\t      return _draftJs.EditorState.createEmpty(this.decorator);\n\t    }\n\t  };\n\t\n\t  DanteEditor.prototype.refreshSelection = function refreshSelection(newEditorState) {\n\t    var editorState = this.state.editorState;\n\t    // Setting cursor position after inserting to content\n\t\n\t    var s = this.state.editorState.getSelection();\n\t    var c = editorState.getCurrentContent();\n\t    var focusOffset = s.getFocusOffset();\n\t    var anchorKey = s.getAnchorKey();\n\t\n\t    var selectionState = _draftJs.SelectionState.createEmpty(s.getAnchorKey());\n\t\n\t    // console.log anchorKey, focusOffset\n\t    selectionState = selectionState.merge({\n\t      anchorOffset: focusOffset,\n\t      focusKey: anchorKey,\n\t      focusOffset: focusOffset\n\t    });\n\t\n\t    var newState = _draftJs.EditorState.forceSelection(newEditorState, selectionState);\n\t\n\t    return this.onChange(newState);\n\t  };\n\t\n\t  DanteEditor.prototype.forceRender = function forceRender(editorState) {\n\t    var selection = this.state.editorState.getSelection();\n\t    var content = editorState.getCurrentContent();\n\t    var newEditorState = _draftJs.EditorState.createWithContent(content, this.decorator);\n\t\n\t    return this.refreshSelection(newEditorState);\n\t  };\n\t\n\t  DanteEditor.prototype.onChange = function onChange(editorState) {\n\t    var _this2 = this;\n\t\n\t    this.setPreContent();\n\t    this.setState({ editorState: editorState });\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.state.editorState);\n\t    var blockType = currentBlock.getType();\n\t\n\t    if (!editorState.getSelection().isCollapsed()) {\n\t\n\t      var tooltip = this.tooltipsWithProp('displayOnSelection')[0];\n\t      if (!this.tooltipHasSelectionElement(tooltip, blockType)) {\n\t        return;\n\t      }\n\t\n\t      this.handleTooltipDisplayOn('displayOnSelection');\n\t    } else {\n\t      this.handleTooltipDisplayOn('displayOnSelection', false);\n\t    }\n\t\n\t    setTimeout(function () {\n\t      return _this2.relocateTooltips();\n\t    }, 0);\n\t\n\t    return this.dispatchChangesToSave();\n\t  };\n\t\n\t  DanteEditor.prototype.dispatchChangesToSave = function dispatchChangesToSave() {\n\t    var _this3 = this;\n\t\n\t    clearTimeout(this.saveTimeout);\n\t    return this.saveTimeout = setTimeout(function () {\n\t      return _this3.save.store(_this3.emitSerializedOutput());\n\t    }, 100);\n\t  };\n\t\n\t  DanteEditor.prototype.setPreContent = function setPreContent() {\n\t    var content = this.emitSerializedOutput();\n\t    return this.save.editorContent = content;\n\t  };\n\t\n\t  DanteEditor.prototype.focus = function focus() {};\n\t  //@props.refs.richEditor.focus()\n\t\n\t  DanteEditor.prototype.getEditorState = function getEditorState() {\n\t    return this.state.editorState;\n\t  };\n\t\n\t  DanteEditor.prototype.emitSerializedOutput = function emitSerializedOutput() {\n\t    var raw = (0, _draftJs.convertToRaw)(this.state.editorState.getCurrentContent());\n\t\n\t    return raw;\n\t  };\n\t\n\t  DanteEditor.prototype.decodeEditorContent = function decodeEditorContent(raw_as_json) {\n\t    var new_content = (0, _draftJs.convertFromRaw)(raw_as_json);\n\t    var editorState = void 0;\n\t\n\t    return editorState = _draftJs.EditorState.createWithContent(new_content, this.decorator);\n\t  };\n\t\n\t  //# title utils\n\t\n\t\n\t  DanteEditor.prototype.getTextFromEditor = function getTextFromEditor() {\n\t    var c = this.state.editorState.getCurrentContent();\n\t    var out = c.getBlocksAsArray().map(function (o) {\n\t      return o.getText();\n\t    }).join(\"\\n\");\n\t\n\t    return out;\n\t  };\n\t\n\t  DanteEditor.prototype.emitHTML2 = function emitHTML2() {\n\t    var html = void 0;\n\t\n\t    return html = (0, _draftConvert.convertToHTML)({\n\t      entityToHTML: function entityToHTML(entity, originalText) {\n\t        if (entity.type === 'LINK') {\n\t          return '<a href=\"' + entity.data.url + '\">' + originalText + '</a>';\n\t        } else {\n\t          return originalText;\n\t        }\n\t      }\n\t\n\t    })(this.state.editorState.getCurrentContent());\n\t  };\n\t\n\t  DanteEditor.prototype.getLocks = function getLocks() {\n\t    return this.state.locks;\n\t  };\n\t\n\t  DanteEditor.prototype.addLock = function addLock() {\n\t    return this.setState({\n\t      locks: this.state.locks += 1 });\n\t  };\n\t\n\t  DanteEditor.prototype.removeLock = function removeLock() {\n\t    return this.setState({\n\t      locks: this.state.locks -= 1 });\n\t  };\n\t\n\t  DanteEditor.prototype.renderableBlocks = function renderableBlocks() {\n\t    return this.widgets.filter(function (o) {\n\t      return o.renderable;\n\t    }).map(function (o) {\n\t      return o.type;\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.defaultWrappers = function defaultWrappers(blockType) {\n\t    return this.default_wrappers.filter(function (o) {\n\t      return o.block === blockType;\n\t    }).map(function (o) {\n\t      return o.className;\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.blockRenderer = function blockRenderer(block) {\n\t\n\t    switch (block.getType()) {\n\t\n\t      case \"atomic\":\n\t\n\t        var entity = block.getEntityAt(0);\n\t        var entity_type = _draftJs.Entity.get(entity).getType();\n\t\n\t        break;\n\t    }\n\t\n\t    if (this.renderableBlocks().includes(block.getType())) {\n\t      return this.handleBlockRenderer(block);\n\t    }\n\t\n\t    return null;\n\t  };\n\t\n\t  DanteEditor.prototype.handleBlockRenderer = function handleBlockRenderer(block) {\n\t    var dataBlock = this.getDataBlock(block);\n\t    if (!dataBlock) {\n\t      return null;\n\t    }\n\t\n\t    var read_only = this.state.read_only ? false : null;\n\t    var editable = read_only !== null ? read_only : dataBlock.editable;\n\t\n\t    return {\n\t      component: eval(dataBlock.block),\n\t      editable: editable,\n\t      props: {\n\t        data: block.getData(),\n\t        getEditorState: this.getEditorState,\n\t        setEditorState: this.onChange,\n\t        addLock: this.addLock,\n\t        removeLock: this.removeLock,\n\t        getLocks: this.getLocks,\n\t        config: dataBlock.options\n\t      }\n\t    };\n\t\n\t    return null;\n\t  };\n\t\n\t  DanteEditor.prototype.blockStyleFn = function blockStyleFn(block) {\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.state.editorState);\n\t    var is_selected = currentBlock.getKey() === block.getKey() ? \"is-selected\" : \"\";\n\t\n\t    if (this.renderableBlocks().includes(block.getType())) {\n\t      return this.styleForBlock(block, currentBlock, is_selected);\n\t    }\n\t\n\t    var defaultBlockClass = this.defaultWrappers(block.getType());\n\t    if (defaultBlockClass.length > 0) {\n\t      return 'graf ' + defaultBlockClass[0] + ' ' + is_selected;\n\t    } else {\n\t      return 'graf nana ' + is_selected;\n\t    }\n\t  };\n\t\n\t  DanteEditor.prototype.getDataBlock = function getDataBlock(block) {\n\t    return this.widgets.find(function (o) {\n\t      return o.type === block.getType();\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.styleForBlock = function styleForBlock(block, currentBlock, is_selected) {\n\t    var dataBlock = this.getDataBlock(block);\n\t\n\t    if (!dataBlock) {\n\t      return null;\n\t    }\n\t\n\t    var selectedFn = dataBlock.selectedFn ? dataBlock.selectedFn(block) : null;\n\t    var selected_class = is_selected ? dataBlock.selected_class : '';\n\t\n\t    return dataBlock.wrapper_class + ' ' + selected_class + ' ' + selectedFn;\n\t  };\n\t\n\t  DanteEditor.prototype.handleTooltipDisplayOn = function handleTooltipDisplayOn(prop, display) {\n\t    var _this4 = this;\n\t\n\t    if (display == null) {\n\t      display = true;\n\t    }\n\t    return setTimeout(function () {\n\t      var items = _this4.tooltipsWithProp(prop);\n\t      return items.map(function (o) {\n\t        _this4.refs[o.ref].display(display);\n\t        return _this4.refs[o.ref].relocate();\n\t      });\n\t    }, 20);\n\t  };\n\t\n\t  DanteEditor.prototype.handlePasteText = function handlePasteText(text, html) {\n\t\n\t    // https://github.com/facebook/draft-js/issues/685\n\t    /*\n\t    html = \"<p>chao</p>\n\t    <avv>aaa</avv>\n\t    <p>oli</p>\n\t    <img src='x'/>\"\n\t    */\n\t\n\t    // if not html then fallback to default handler\n\t\n\t    if (!html) {\n\t      return this.handleTXTPaste(text, html);\n\t    }\n\t    if (html) {\n\t      return this.handleHTMLPaste(text, html);\n\t    }\n\t  };\n\t\n\t  DanteEditor.prototype.handleTXTPaste = function handleTXTPaste(text, html) {\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.state.editorState);\n\t\n\t    var editorState = this.state.editorState;\n\t\n\t\n\t    switch (currentBlock.getType()) {\n\t      case \"image\":case \"video\":case \"placeholder\":\n\t        var newContent = _draftJs.Modifier.replaceText(editorState.getCurrentContent(), new _draftJs.SelectionState({\n\t          anchorKey: currentBlock.getKey(),\n\t          anchorOffset: 0,\n\t          focusKey: currentBlock.getKey(),\n\t          focusOffset: 2\n\t        }), text);\n\t\n\t        editorState = _draftJs.EditorState.push(editorState, newContent, 'replace-text');\n\t\n\t        this.onChange(editorState);\n\t\n\t        return true;\n\t      default:\n\t        return false;\n\t    }\n\t  };\n\t\n\t  DanteEditor.prototype.handleHTMLPaste = function handleHTMLPaste(text, html) {\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.state.editorState);\n\t\n\t    // TODO: make this configurable\n\t    switch (currentBlock.getType()) {\n\t      case \"image\":case \"video\":case \"placeholder\":\n\t        return this.handleTXTPaste(text, html);\n\t        break;\n\t    }\n\t\n\t    var newContentState = (0, _html2content2['default'])(html, this.extendedBlockRenderMap);\n\t\n\t    var selection = this.state.editorState.getSelection();\n\t    var endKey = selection.getEndKey();\n\t\n\t    var content = this.state.editorState.getCurrentContent();\n\t    var blocksBefore = content.blockMap.toSeq().takeUntil(function (v) {\n\t      return v.key === endKey;\n\t    });\n\t    var blocksAfter = content.blockMap.toSeq().skipUntil(function (v) {\n\t      return v.key === endKey;\n\t    }).rest();\n\t\n\t    var newBlockKey = newContentState.blockMap.first().getKey();\n\t\n\t    var newBlockMap = blocksBefore.concat(newContentState.blockMap, blocksAfter).toOrderedMap();\n\t\n\t    var newContent = content.merge({\n\t      blockMap: newBlockMap,\n\t      selectionBefore: selection,\n\t      selectionAfter: selection.merge({\n\t        anchorKey: newBlockKey,\n\t        anchorOffset: 0,\n\t        focusKey: newBlockKey,\n\t        focusOffset: 0,\n\t        isBackward: false\n\t      })\n\t    });\n\t\n\t    var pushedContentState = _draftJs.EditorState.push(this.state.editorState, newContent, 'insert-fragment');\n\t\n\t    this.onChange(pushedContentState);\n\t\n\t    return true;\n\t  };\n\t\n\t  DanteEditor.prototype.handlePasteImage = function handlePasteImage(files) {\n\t    var _this5 = this;\n\t\n\t    //TODO: check file types\n\t    return files.map(function (file) {\n\t      var opts = {\n\t        url: URL.createObjectURL(file),\n\t        file: file\n\t      };\n\t\n\t      return _this5.onChange((0, _index.addNewBlock)(_this5.state.editorState, 'image', opts));\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.handleDroppedFiles = function handleDroppedFiles(state, files) {\n\t    var _this6 = this;\n\t\n\t    return files.map(function (file) {\n\t      var opts = {\n\t        url: URL.createObjectURL(file),\n\t        file: file\n\t      };\n\t\n\t      return _this6.onChange((0, _index.addNewBlock)(_this6.state.editorState, 'image', opts));\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.handleUpArrow = function handleUpArrow(e) {\n\t    var _this7 = this;\n\t\n\t    return setTimeout(function () {\n\t      return _this7.forceRender(_this7.state.editorState);\n\t    }, 10);\n\t  };\n\t\n\t  DanteEditor.prototype.handleDownArrow = function handleDownArrow(e) {\n\t    var _this8 = this;\n\t\n\t    return setTimeout(function () {\n\t      return _this8.forceRender(_this8.state.editorState);\n\t    }, 10);\n\t  };\n\t\n\t  DanteEditor.prototype.handleReturn = function handleReturn(e) {\n\t    if (this.props.handleReturn) {\n\t      if (this.props.handleReturn()) {\n\t        return true;\n\t      }\n\t    }\n\t\n\t    var editorState = this.state.editorState;\n\t\n\t\n\t    if (!e.altKey && !e.metaKey && !e.ctrlKey) {\n\t      var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t      var blockType = currentBlock.getType();\n\t      var selection = editorState.getSelection();\n\t\n\t      var config_block = this.getDataBlock(currentBlock);\n\t\n\t      if (currentBlock.getText().length === 0) {\n\t\n\t        if (config_block && config_block.handleEnterWithoutText) {\n\t          config_block.handleEnterWithText(this, currentBlock);\n\t          this.closePopOvers();\n\t          return true;\n\t        }\n\t\n\t        //TODO turn this in configurable\n\t        switch (blockType) {\n\t          case \"header-one\":\n\t            this.onChange((0, _index.resetBlockWithType)(editorState, \"unstyled\"));\n\t            return true;\n\t            break;\n\t          default:\n\t            return false;\n\t        }\n\t      }\n\t\n\t      if (currentBlock.getText().length > 0) {\n\t\n\t        if (blockType === \"unstyled\") {\n\t          // hack hackety hack\n\t          // https://github.com/facebook/draft-js/issues/304\n\t          var newContent = _draftJs.Modifier.splitBlock(this.state.editorState.getCurrentContent(), this.state.editorState.getSelection());\n\t\n\t          var newEditorState = _draftJs.EditorState.push(this.state.editorState, newContent, 'insert-characters');\n\t          this.onChange(newEditorState);\n\t\n\t          setTimeout(function () {\n\t            //TODO: check is element is in viewport\n\t            var a = document.getElementsByClassName(\"is-selected\");\n\t            var pos = a[0].getBoundingClientRect();\n\t            return window.scrollTo(0, pos.top + window.scrollY - 100);\n\t          }, 0);\n\t\n\t          return true;\n\t        }\n\t\n\t        if (config_block && config_block.handleEnterWithText) {\n\t          config_block.handleEnterWithText(this, currentBlock);\n\t          this.closePopOvers();\n\t          return true;\n\t        }\n\t\n\t        if (currentBlock.getLength() === selection.getStartOffset()) {\n\t          if (this.continuousBlocks.indexOf(blockType) < 0) {\n\t            this.onChange((0, _index.addNewBlockAt)(editorState, currentBlock.getKey()));\n\t            return true;\n\t          }\n\t        }\n\t\n\t        return false;\n\t      }\n\t\n\t      // selection.isCollapsed() and # should we check collapsed here?\n\t      if (currentBlock.getLength() === selection.getStartOffset()) {\n\t        //or (config_block && config_block.breakOnContinuous))\n\t        // it will match the unstyled for custom blocks\n\t        if (this.continuousBlocks.indexOf(blockType) < 0) {\n\t          this.onChange((0, _index.addNewBlockAt)(editorState, currentBlock.getKey()));\n\t          return true;\n\t        }\n\t        return false;\n\t      }\n\t\n\t      return false;\n\t    }\n\t  };\n\t\n\t  //return false\n\t\n\t  // TODO: make this configurable\n\t\n\t\n\t  DanteEditor.prototype.handleBeforeInput = function handleBeforeInput(chars) {\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.state.editorState);\n\t    var blockType = currentBlock.getType();\n\t    var selection = this.state.editorState.getSelection();\n\t\n\t    var editorState = this.state.editorState;\n\t\n\t    // close popovers\n\t\n\t    if (currentBlock.getText().length !== 0) {\n\t      //@closeInlineButton()\n\t      this.closePopOvers();\n\t    }\n\t\n\t    // handle space on link\n\t    var endOffset = selection.getEndOffset();\n\t    var endKey = currentBlock.getEntityAt(endOffset - 1);\n\t    var endEntityType = endKey && _draftJs.Entity.get(endKey).getType();\n\t    var afterEndKey = currentBlock.getEntityAt(endOffset);\n\t    var afterEndEntityType = afterEndKey && _draftJs.Entity.get(afterEndKey).getType();\n\t\n\t    // will insert blank space when link found\n\t    if (chars === ' ' && endEntityType === 'LINK' && afterEndEntityType !== 'LINK') {\n\t      var newContentState = _draftJs.Modifier.insertText(editorState.getCurrentContent(), selection, ' ');\n\t      var newEditorState = _draftJs.EditorState.push(editorState, newContentState, 'insert-characters');\n\t      this.onChange(newEditorState);\n\t      return true;\n\t    }\n\t\n\t    // block transform\n\t    if (blockType.indexOf('atomic') === 0) {\n\t      return false;\n\t    }\n\t\n\t    var blockLength = currentBlock.getLength();\n\t    if (selection.getAnchorOffset() > 1 || blockLength > 1) {\n\t      return false;\n\t    }\n\t\n\t    var blockTo = this.character_convert_mapping[currentBlock.getText() + chars];\n\t\n\t    console.log('BLOCK TO SHOW: ' + blockTo);\n\t\n\t    if (!blockTo) {\n\t      return false;\n\t    }\n\t\n\t    this.onChange((0, _index.resetBlockWithType)(editorState, blockTo));\n\t\n\t    return true;\n\t  };\n\t\n\t  // TODO: make this configurable\n\t\n\t\n\t  DanteEditor.prototype.handleKeyCommand = function handleKeyCommand(command) {\n\t    var editorState = this.state.editorState;\n\t\n\t    var currentBlockType = void 0,\n\t        newBlockType = void 0;\n\t\n\t    if (this.props.handleKeyCommand && this.props.handleKeyCommand(command)) {\n\t      return true;\n\t    }\n\t\n\t    if (command === 'add-new-block') {\n\t      this.onChange((0, _index.addNewBlock)(editorState, 'blockquote'));\n\t      return true;\n\t    }\n\t\n\t    var block = (0, _index.getCurrentBlock)(editorState);\n\t\n\t    if (command.indexOf('toggle_inline:') === 0) {\n\t      newBlockType = command.split(':')[1];\n\t      currentBlockType = block.getType();\n\t      this.onChange(_draftJs.RichUtils.toggleInlineStyle(editorState, newBlockType));\n\t      return true;\n\t    }\n\t\n\t    if (command.indexOf('toggle_block:') === 0) {\n\t      newBlockType = command.split(':')[1];\n\t      currentBlockType = block.getType();\n\t\n\t      this.onChange(_draftJs.RichUtils.toggleBlockType(editorState, newBlockType));\n\t      return true;\n\t    }\n\t\n\t    var newState = _draftJs.RichUtils.handleKeyCommand(this.state.editorState, command);\n\t    if (newState) {\n\t      this.onChange(newState);\n\t      return true;\n\t    }\n\t\n\t    return false;\n\t  };\n\t\n\t  DanteEditor.prototype.findCommandKey = function findCommandKey(opt, command) {\n\t    // console.log \"COMMAND find: #{opt} #{command}\"\n\t    return this.key_commands[opt].find(function (o) {\n\t      return o.key === command;\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.KeyBindingFn = function KeyBindingFn(e) {\n\t\n\t    // + B / Ctrl + B   Bold\n\t    // + I / Ctrl + I   Italic\n\t    // + K / Ctrl + K   Turn into link\n\t    // + Alt + 1 / Ctrl + Alt + 1   Header\n\t    // + Alt + 2 / Ctrl + Alt + 2   Sub-Header\n\t    // + Alt + 5 / Ctrl + Alt + 5   Quote (Press once for a block quote, again for a pull quote and a third time to turn off quote)\n\t\n\t    var cmd = void 0;\n\t    if (e.altKey) {\n\t      if (e.shiftKey) {\n\t        cmd = this.findCommandKey(\"alt-shift\", e.which);\n\t        if (cmd) {\n\t          return cmd.cmd;\n\t        }\n\t\n\t        return (0, _draftJs.getDefaultKeyBinding)(e);\n\t      }\n\t\n\t      if (e.ctrlKey || e.metaKey) {\n\t        cmd = this.findCommandKey(\"alt-cmd\", e.which);\n\t        if (cmd) {\n\t          return cmd.cmd;\n\t        }\n\t        return (0, _draftJs.getDefaultKeyBinding)(e);\n\t      }\n\t    } else if (e.ctrlKey || e.metaKey) {\n\t      cmd = this.findCommandKey(\"cmd\", e.which);\n\t      if (cmd) {\n\t        return cmd.cmd;\n\t      }\n\t      return (0, _draftJs.getDefaultKeyBinding)(e);\n\t    }\n\t\n\t    return (0, _draftJs.getDefaultKeyBinding)(e);\n\t  };\n\t\n\t  // will update block state todo: movo to utils\n\t\n\t\n\t  DanteEditor.prototype.updateBlockData = function updateBlockData(block, options) {\n\t    var data = block.getData();\n\t    var newData = data.merge(options);\n\t    var newState = (0, _index.updateDataOfBlock)(this.state.editorState, block, newData);\n\t    // this fixes enter from image caption\n\t    return this.forceRender(newState);\n\t  };\n\t\n\t  DanteEditor.prototype.setDirection = function setDirection(direction_type) {\n\t    var contentState = this.state.editorState.getCurrentContent();\n\t    var selectionState = this.state.editorState.getSelection();\n\t    var block = contentState.getBlockForKey(selectionState.anchorKey);\n\t\n\t    return this.updateBlockData(block, { direction: direction_type });\n\t  };\n\t\n\t  //# read only utils\n\t\n\t\n\t  DanteEditor.prototype.toggleEditable = function toggleEditable() {\n\t    this.closePopOvers();\n\t\n\t    return this.setState({ read_only: !this.state.read_only }, this.testEmitAndDecode);\n\t  };\n\t\n\t  DanteEditor.prototype.closePopOvers = function closePopOvers() {\n\t    var _this9 = this;\n\t\n\t    return this.tooltips.map(function (o) {\n\t      return _this9.refs[o.ref].hide();\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.relocateTooltips = function relocateTooltips() {\n\t    var _this10 = this;\n\t\n\t    return this.tooltips.map(function (o) {\n\t      return _this10.refs[o.ref].relocate();\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.tooltipsWithProp = function tooltipsWithProp(prop) {\n\t    return this.tooltips.filter(function (o) {\n\t      return o[prop];\n\t    });\n\t  };\n\t\n\t  DanteEditor.prototype.tooltipHasSelectionElement = function tooltipHasSelectionElement(tooltip, element) {\n\t    return tooltip.selectionElements.includes(element);\n\t  };\n\t\n\t  //################################\n\t  // TODO: this methods belongs to popovers/link\n\t  //################################\n\t\n\t  DanteEditor.prototype.handleShowPopLinkOver = function handleShowPopLinkOver(e) {\n\t    return this.showPopLinkOver();\n\t  };\n\t\n\t  DanteEditor.prototype.handleHidePopLinkOver = function handleHidePopLinkOver(e) {\n\t    return this.hidePopLinkOver();\n\t  };\n\t\n\t  DanteEditor.prototype.showPopLinkOver = function showPopLinkOver(el) {\n\t    // handles popover display\n\t    // using anchor or from popover\n\t\n\t    var parent_el = _reactDom2['default'].findDOMNode(this);\n\t\n\t    // set url first in order to calculate popover width\n\t    var coords = void 0;\n\t    this.refs.anchor_popover.setState({ url: el ? el.href : this.refs.anchor_popover.state.url });\n\t\n\t    if (el) {\n\t      coords = this.refs.anchor_popover.relocate(el);\n\t    }\n\t\n\t    if (coords) {\n\t      this.refs.anchor_popover.setPosition(coords);\n\t    }\n\t\n\t    this.refs.anchor_popover.setState({ show: true });\n\t\n\t    this.isHover = true;\n\t    return this.cancelHide();\n\t  };\n\t\n\t  DanteEditor.prototype.hidePopLinkOver = function hidePopLinkOver() {\n\t    var _this11 = this;\n\t\n\t    return this.hideTimeout = setTimeout(function () {\n\t      return _this11.refs.anchor_popover.hide();\n\t    }, 300);\n\t  };\n\t\n\t  DanteEditor.prototype.cancelHide = function cancelHide() {\n\t    // console.log \"Cancel Hide\"\n\t    return clearTimeout(this.hideTimeout);\n\t  };\n\t\n\t  //##############################\n\t\n\t  DanteEditor.prototype.render = function render() {\n\t    var _this12 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      { id: 'content', suppressContentEditableWarning: true },\n\t      _react2['default'].createElement(\n\t        'article',\n\t        { className: 'postArticle' },\n\t        _react2['default'].createElement(\n\t          'div',\n\t          { className: 'postContent' },\n\t          _react2['default'].createElement(\n\t            'div',\n\t            { className: 'notesSource' },\n\t            _react2['default'].createElement(\n\t              'div',\n\t              { id: 'editor', className: 'postField postField--body' },\n\t              _react2['default'].createElement(\n\t                'section',\n\t                { className: 'section--first section--last' },\n\t                _react2['default'].createElement(\n\t                  'div',\n\t                  { className: 'section-divider layoutSingleColumn' },\n\t                  _react2['default'].createElement('hr', { className: 'section-divider' })\n\t                ),\n\t                _react2['default'].createElement(\n\t                  'div',\n\t                  { className: 'section-content' },\n\t                  _react2['default'].createElement(\n\t                    'div',\n\t                    { ref: 'richEditor', className: 'section-inner layoutSingleColumn',\n\t                      onClick: this.focus },\n\t                    _react2['default'].createElement(_draftJs.Editor, {\n\t                      blockRendererFn: this.blockRenderer,\n\t                      editorState: this.state.editorState,\n\t                      onChange: this.onChange,\n\t                      onUpArrow: this.handleUpArrow,\n\t                      onDownArrow: this.handleDownArrow,\n\t                      handleReturn: this.handleReturn,\n\t                      blockRenderMap: this.state.blockRenderMap,\n\t                      blockStyleFn: this.blockStyleFn,\n\t                      handlePastedText: this.handlePasteText,\n\t                      handlePastedFiles: this.handlePasteImage,\n\t                      handleDroppedFiles: this.handleDroppedFiles,\n\t                      handleKeyCommand: this.handleKeyCommand,\n\t                      keyBindingFn: this.KeyBindingFn,\n\t                      handleBeforeInput: this.handleBeforeInput,\n\t                      readOnly: this.state.read_only,\n\t                      placeholder: this.props.config.body_placeholder,\n\t                      ref: 'editor'\n\t                    })\n\t                  )\n\t                )\n\t              )\n\t            )\n\t          )\n\t        )\n\t      ),\n\t      this.tooltips.map(function (o, i) {\n\t        return _react2['default'].createElement(o.component, {\n\t          ref: o.ref,\n\t          key: i,\n\t          editor: _this12,\n\t          editorState: _this12.state.editorState,\n\t          onChange: _this12.onChange,\n\t          configTooltip: o,\n\t          widget_options: o.widget_options,\n\t          showPopLinkOver: _this12.showPopLinkOver,\n\t          hidePopLinkOver: _this12.hidePopLinkOver,\n\t          handleOnMouseOver: _this12.handleShowPopLinkOver,\n\t          handleOnMouseOut: _this12.handleHidePopLinkOver\n\t        });\n\t      }),\n\t      this.state.debug ? _react2['default'].createElement(_debug2['default'], { locks: this.state.locks, editor: this }) : undefined\n\t    );\n\t  };\n\t\n\t  return DanteEditor;\n\t}(_react2['default'].Component);\n\n/***/ },\n\n/***/ 226:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar EmbedBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(EmbedBlock, _React$Component);\n\t\n\t  function EmbedBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, EmbedBlock);\n\t\n\t    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.dataForUpdate = _this.dataForUpdate.bind(_this);\n\t    _this.componentDidMount = _this.componentDidMount.bind(_this);\n\t    _this.state = {\n\t      embed_data: _this.defaultData(),\n\t      error: \"\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  EmbedBlock.prototype.defaultData = function defaultData() {\n\t    var existing_data = this.props.block.getData().toJS();\n\t    return existing_data.embed_data || {};\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  EmbedBlock.prototype.updateData = function updateData() {\n\t    var _props = this.props,\n\t        block = _props.block,\n\t        blockProps = _props.blockProps;\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state);\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  EmbedBlock.prototype.dataForUpdate = function dataForUpdate() {\n\t\n\t    return this.props.blockProps.data.toJS();\n\t  };\n\t\n\t  EmbedBlock.prototype.componentDidMount = function componentDidMount() {\n\t    var _this2 = this;\n\t\n\t    if (!this.props.blockProps.data) {\n\t      return;\n\t    }\n\t\n\t    // ensure data isnt already loaded\n\t    // unless @dataForUpdate().endpoint or @dataForUpdate().provisory_text\n\t\n\t    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n\t      //debugger\n\t      return;\n\t    }\n\t\n\t    return (0, _axios2['default'])({\n\t      method: 'get',\n\t      url: '' + this.dataForUpdate().endpoint + this.dataForUpdate().provisory_text + '&scheme=https'\n\t    }).then(function (result) {\n\t\n\t      return _this2.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n\t      , _this2.updateData);\n\t    })['catch'](function (error) {\n\t\n\t      _this2.setState({\n\t        error: error.response.data.error_message });\n\t      return console.log(\"TODO: error\");\n\t    });\n\t  };\n\t\n\t  EmbedBlock.prototype.classForImage = function classForImage() {\n\t    if (this.state.embed_data.images) {\n\t      return \"\";\n\t    } else {\n\t      return \"mixtapeImage--empty u-ignoreBlock\";\n\t    }\n\t  };\n\t  //if @state.embed_data.thumbnail_url then \"\" else \"mixtapeImage--empty u-ignoreBlock\"\n\t\n\t  EmbedBlock.prototype.picture = function picture() {\n\t    if (this.state.embed_data.images && this.state.embed_data.images.length > 0) {\n\t      return this.state.embed_data.images[0].url;\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  EmbedBlock.prototype.render = function render() {\n\t    //block = @.props\n\t    //foo = @.props.blockProps\n\t    //data = Entity.get(block.block.getEntityAt(0)).getData()\n\t    console.log(\"ERROR\", this.state.error);\n\t    return _react2['default'].createElement(\n\t      'span',\n\t      null,\n\t      this.picture() ? _react2['default'].createElement('a', {\n\t        target: '_blank',\n\t        className: 'js-mixtapeImage mixtapeImage ' + this.classForImage(),\n\t        href: this.state.embed_data.url,\n\t        style: { backgroundImage: 'url(\\'' + this.picture() + '\\')' }\n\t      }) : undefined,\n\t      this.state.error ? _react2['default'].createElement(\n\t        'h2',\n\t        null,\n\t        this.state.error\n\t      ) : undefined,\n\t      _react2['default'].createElement(\n\t        'a',\n\t        {\n\t          className: 'markup--anchor markup--mixtapeEmbed-anchor',\n\t          target: '_blank',\n\t          href: this.state.embed_data.url\n\t        },\n\t        _react2['default'].createElement(\n\t          'strong',\n\t          { className: 'markup--strong markup--mixtapeEmbed-strong' },\n\t          this.state.embed_data.title\n\t        ),\n\t        _react2['default'].createElement(\n\t          'em',\n\t          { className: 'markup--em markup--mixtapeEmbed-em' },\n\t          this.state.embed_data.description\n\t        )\n\t      ),\n\t      this.state.embed_data.provider_url\n\t    );\n\t  };\n\t\n\t  return EmbedBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = EmbedBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 227:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar ImageBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(ImageBlock, _React$Component);\n\t\n\t  function ImageBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, ImageBlock);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.blockPropsSrc = _this.blockPropsSrc.bind(_this);\n\t    _this.defaultUrl = _this.defaultUrl.bind(_this);\n\t    _this.defaultAspectRatio = _this.defaultAspectRatio.bind(_this);\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.replaceImg = _this.replaceImg.bind(_this);\n\t    _this.startLoader = _this.startLoader.bind(_this);\n\t    _this.stopLoader = _this.stopLoader.bind(_this);\n\t    _this.handleUpload = _this.handleUpload.bind(_this);\n\t    _this.aspectRatio = _this.aspectRatio.bind(_this);\n\t    _this.updateDataSelection = _this.updateDataSelection.bind(_this);\n\t    _this.handleGrafFigureSelectImg = _this.handleGrafFigureSelectImg.bind(_this);\n\t    _this.getUploadUrl = _this.getUploadUrl.bind(_this);\n\t    _this.uploadFile = _this.uploadFile.bind(_this);\n\t    _this.uploadCompleted = _this.uploadCompleted.bind(_this);\n\t    _this.updateProgressBar = _this.updateProgressBar.bind(_this);\n\t    _this.placeHolderEnabled = _this.placeHolderEnabled.bind(_this);\n\t    _this.placeholderText = _this.placeholderText.bind(_this);\n\t    _this.handleFocus = _this.handleFocus.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    var existing_data = _this.props.block.getData().toJS();\n\t\n\t    _this.config = _this.props.blockProps.config;\n\t    _this.file = _this.props.blockProps.data.get('file');\n\t    _this.state = {\n\t      loading: false,\n\t      selected: false,\n\t      loading_progress: 0,\n\t      enabled: false,\n\t      caption: _this.defaultPlaceholder(),\n\t      direction: existing_data.direction || \"center\",\n\t      width: 0,\n\t      height: 0,\n\t      file: null,\n\t      url: _this.blockPropsSrc() || _this.defaultUrl(existing_data),\n\t      aspect_ratio: _this.defaultAspectRatio(existing_data)\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  ImageBlock.prototype.blockPropsSrc = function blockPropsSrc() {\n\t    // console.log @.props.blockProps.data.src\n\t    return this.props.blockProps.data.src;\n\t  };\n\t  /*\n\t  debugger\n\t  block = @.props\n\t  entity = block.block.getEntityAt(0)\n\t  if entity\n\t    data = Entity.get(entity).getData().src\n\t  else\n\t    null\n\t  */\n\t\n\t  ImageBlock.prototype.defaultUrl = function defaultUrl(data) {\n\t    if (data.url) {\n\t      return data.url;\n\t    }\n\t\n\t    if (data.url) {\n\t      if (data.file) {\n\t        return URL.createObjectURL(data.file);\n\t      } else {\n\t        return data.url;\n\t      }\n\t    } else {\n\t      return this.props.blockProps.data.src;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.defaultPlaceholder = function defaultPlaceholder() {\n\t    return this.props.blockProps.config.image_caption_placeholder;\n\t  };\n\t\n\t  ImageBlock.prototype.defaultAspectRatio = function defaultAspectRatio(data) {\n\t    if (data.aspect_ratio) {\n\t      return {\n\t        width: data.aspect_ratio['width'],\n\t        height: data.aspect_ratio['height'],\n\t        ratio: data.aspect_ratio['ratio']\n\t      };\n\t    } else {\n\t      return {\n\t        width: 0,\n\t        height: 0,\n\t        ratio: 100\n\t      };\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getAspectRatio = function getAspectRatio(w, h) {\n\t    var maxWidth = 1000;\n\t    var maxHeight = 1000;\n\t    var ratio = 0;\n\t    var width = w; // Current image width\n\t    var height = h; // Current image height\n\t\n\t    // Check if the current width is larger than the max\n\t    if (width > maxWidth) {\n\t      ratio = maxWidth / width; // get ratio for scaling image\n\t      height = height * ratio; // Reset height to match scaled image\n\t      width = width * ratio; // Reset width to match scaled image\n\t\n\t      // Check if current height is larger than max\n\t    } else if (height > maxHeight) {\n\t      ratio = maxHeight / height; // get ratio for scaling image\n\t      width = width * ratio; // Reset width to match scaled image\n\t      height = height * ratio; // Reset height to match scaled image\n\t    }\n\t\n\t    var fill_ratio = height / width * 100;\n\t    var result = { width: width, height: height, ratio: fill_ratio };\n\t    // console.log result\n\t    return result;\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  ImageBlock.prototype.updateData = function updateData() {\n\t    var blockProps = this.props.blockProps;\n\t    var block = this.props.block;\n\t    var getEditorState = this.props.blockProps.getEditorState;\n\t    var setEditorState = this.props.blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state).merge({ forceUpload: false });\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  ImageBlock.prototype.replaceImg = function replaceImg() {\n\t    var _this2 = this;\n\t\n\t    this.img = new Image();\n\t    this.img.src = this.refs.image_tag.src;\n\t    this.setState({\n\t      url: this.img.src });\n\t    var self = this;\n\t    // exit only when not blob and not forceUload\n\t    if (!this.img.src.includes(\"blob:\") && !this.props.block.data.get(\"forceUpload\")) {\n\t      return;\n\t    }\n\t    return this.img.onload = function () {\n\t      _this2.setState({\n\t        width: _this2.img.width,\n\t        height: _this2.img.height,\n\t        aspect_ratio: self.getAspectRatio(_this2.img.width, _this2.img.height)\n\t      });\n\t\n\t      return _this2.handleUpload();\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.startLoader = function startLoader() {\n\t    return this.setState({\n\t      loading: true });\n\t  };\n\t\n\t  ImageBlock.prototype.stopLoader = function stopLoader() {\n\t    return this.setState({\n\t      loading: false });\n\t  };\n\t\n\t  ImageBlock.prototype.handleUpload = function handleUpload() {\n\t    this.startLoader();\n\t    this.props.blockProps.addLock();\n\t    this.updateData();\n\t    return this.uploadFile();\n\t  };\n\t\n\t  ImageBlock.prototype.componentDidMount = function componentDidMount() {\n\t    return this.replaceImg();\n\t  };\n\t\n\t  ImageBlock.prototype.aspectRatio = function aspectRatio() {\n\t    return {\n\t      maxWidth: '' + this.state.aspect_ratio.width,\n\t      maxHeight: '' + this.state.aspect_ratio.height,\n\t      ratio: '' + this.state.aspect_ratio.height\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.updateDataSelection = function updateDataSelection() {\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var newselection = getEditorState().getSelection().merge({\n\t      anchorKey: this.props.block.getKey(),\n\t      focusKey: this.props.block.getKey()\n\t    });\n\t\n\t    return setEditorState(_draftJs.EditorState.forceSelection(getEditorState(), newselection));\n\t  };\n\t\n\t  ImageBlock.prototype.handleGrafFigureSelectImg = function handleGrafFigureSelectImg(e) {\n\t    e.preventDefault();\n\t    return this.setState({ selected: true }, this.updateDataSelection);\n\t  };\n\t\n\t  //main_editor.onChange(main_editor.state.editorState)\n\t\n\t  ImageBlock.prototype.coords = function coords() {\n\t    return {\n\t      maxWidth: this.state.aspect_ratio.width + 'px',\n\t      maxHeight: this.state.aspect_ratio.height + 'px'\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.getBase64Image = function getBase64Image(img) {\n\t    var canvas = document.createElement(\"canvas\");\n\t    canvas.width = img.width;\n\t    canvas.height = img.height;\n\t    var ctx = canvas.getContext(\"2d\");\n\t    ctx.drawImage(img, 0, 0);\n\t    var dataURL = canvas.toDataURL(\"image/png\");\n\t\n\t    return dataURL;\n\t  };\n\t\n\t  ImageBlock.prototype.formatData = function formatData() {\n\t    var formData = new FormData();\n\t    if (this.file) {\n\t      var formName = this.config.upload_formName || 'file';\n\t\n\t      formData.append(formName, this.file);\n\t      return formData;\n\t    } else {\n\t      formData.append('url', this.props.blockProps.data.get(\"url\"));\n\t      return formData;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getUploadUrl = function getUploadUrl() {\n\t    var url = this.config.upload_url;\n\t    if (typeof url === \"function\") {\n\t      return url();\n\t    } else {\n\t      return url;\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.getUploadHeaders = function getUploadHeaders() {\n\t    return this.config.upload_headers || {};\n\t  };\n\t\n\t  ImageBlock.prototype.uploadFile = function uploadFile() {\n\t    var _this3 = this;\n\t\n\t    var handleUp = void 0;\n\t    (0, _axios2['default'])({\n\t      method: 'post',\n\t      url: this.getUploadUrl(),\n\t      headers: this.getUploadHeaders(),\n\t      data: this.formatData(),\n\t      onUploadProgress: function onUploadProgress(e) {\n\t        return _this3.updateProgressBar(e);\n\t      }\n\t    }).then(function (result) {\n\t      _this3.uploadCompleted(result.data);\n\t      _this3.props.blockProps.removeLock();\n\t      _this3.stopLoader();\n\t      _this3.file = null;\n\t\n\t      if (_this3.config.upload_callback) {\n\t        return _this3.config.upload_callback(response, _this3);\n\t      }\n\t    })['catch'](function (error) {\n\t      _this3.props.blockProps.removeLock();\n\t      _this3.stopLoader();\n\t\n\t      console.log('ERROR: got error uploading file ' + error);\n\t      if (_this3.config.upload_error_callback) {\n\t        return _this3.config.upload_error_callback(error, _this3);\n\t      }\n\t    });\n\t\n\t    return handleUp = function handleUp(json_response) {\n\t      return _this3.uploadCompleted(json_response, n);\n\t    };\n\t  };\n\t\n\t  ImageBlock.prototype.uploadCompleted = function uploadCompleted(json) {\n\t    return this.setState({ url: json.url }, this.updateData);\n\t  };\n\t\n\t  ImageBlock.prototype.updateProgressBar = function updateProgressBar(e) {\n\t    var complete = this.state.loading_progress;\n\t    if (e.lengthComputable) {\n\t      complete = e.loaded / e.total * 100;\n\t      complete = complete != null ? complete : { complete: 0 };\n\t      this.setState({\n\t        loading_progress: complete });\n\t      return console.log('complete: ' + complete);\n\t    }\n\t  };\n\t\n\t  ImageBlock.prototype.placeHolderEnabled = function placeHolderEnabled() {\n\t    return this.state.enabled || this.props.block.getText();\n\t  };\n\t\n\t  ImageBlock.prototype.placeholderText = function placeholderText() {\n\t    if (this.placeHolderEnabled()) {\n\t      return \"\";\n\t    }\n\t    return \"Write caption for image (optional)\";\n\t  };\n\t\n\t  ImageBlock.prototype.handleFocus = function handleFocus(e) {\n\t    var _this4 = this;\n\t\n\t    // console.log \"focus on placeholder\"\n\t    return setTimeout(function () {\n\t      return _this4.setState({\n\t        enabled: true });\n\t    }, 0);\n\t  };\n\t\n\t  ImageBlock.prototype.render = function render() {\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      { ref: 'image_tag2', suppressContentEditableWarning: true },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'aspectRatioPlaceholder is-locked',\n\t          style: this.coords(),\n\t          onClick: this.handleGrafFigureSelectImg },\n\t        _react2['default'].createElement('div', { style: { paddingBottom: this.state.aspect_ratio.ratio + '%' },\n\t          className: 'aspect-ratio-fill' }),\n\t        _react2['default'].createElement('img', { src: this.state.url,\n\t          ref: 'image_tag',\n\t          height: this.state.aspect_ratio.height,\n\t          width: this.state.aspect_ratio.width,\n\t          className: 'graf-image' }),\n\t        _react2['default'].createElement(Loader, { toggle: this.state.loading,\n\t          progress: this.state.loading_progress })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'figcaption',\n\t        { className: 'imageCaption', onMouseDown: this.handleFocus },\n\t        !this.state.enabled ? _react2['default'].createElement(\n\t          'span',\n\t          { className: 'danteDefaultPlaceholder' },\n\t          this.placeholderText()\n\t        ) : undefined,\n\t        _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, {\n\t          \"editable\": true, \"className\": \"imageCaption\" }))\n\t      )\n\t    );\n\t  };\n\t\n\t  return ImageBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = ImageBlock;\n\t\n\tvar Loader = function (_React$Component2) {\n\t  (0, _inherits3['default'])(Loader, _React$Component2);\n\t\n\t  function Loader() {\n\t    (0, _classCallCheck3['default'])(this, Loader);\n\t    return (0, _possibleConstructorReturn3['default'])(this, _React$Component2.apply(this, arguments));\n\t  }\n\t\n\t  Loader.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      null,\n\t      this.props.toggle ? _react2['default'].createElement(\n\t        'div',\n\t        { className: 'image-upoader-loader' },\n\t        _react2['default'].createElement(\n\t          'p',\n\t          null,\n\t          this.props.progress === 100 ? \"processing image...\" : _react2['default'].createElement(\n\t            'span',\n\t            null,\n\t            _react2['default'].createElement(\n\t              'span',\n\t              null,\n\t              'loading'\n\t            ),\n\t            ' ',\n\t            Math.round(this.props.progress)\n\t          )\n\t        )\n\t      ) : undefined\n\t    );\n\t  };\n\t\n\t  return Loader;\n\t}(_react2['default'].Component);\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 228:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar PlaceholderBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(PlaceholderBlock, _React$Component);\n\t\n\t  function PlaceholderBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, PlaceholderBlock);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.placeholderText = _this.placeholderText.bind(_this);\n\t    _this.placeholderFromProps = _this.placeholderFromProps.bind(_this);\n\t    _this.defaultText = _this.defaultText.bind(_this);\n\t    _this.handleFocus = _this.handleFocus.bind(_this);\n\t    _this.classForDefault = _this.classForDefault.bind(_this);\n\t    _this.state = {\n\t      enabled: false,\n\t      data: _this.props.blockProps.data.toJS()\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  PlaceholderBlock.prototype.placeholderText = function placeholderText() {\n\t    if (this.state.enabled) {\n\t      return \"\";\n\t    }\n\t    return this.props.blockProps.data.toJS().placeholder || this.placeholderFromProps() || this.defaultText();\n\t  };\n\t  //if @.props.blockProps.data then @.props.blockProps.data.placeholder else @defaultText()\n\t\n\t\n\t  PlaceholderBlock.prototype.placeholderFromProps = function placeholderFromProps() {\n\t    return this.props.block.toJS().placeholder;\n\t  };\n\t\n\t  PlaceholderBlock.prototype.defaultText = function defaultText() {\n\t    return \"write something \";\n\t  };\n\t\n\t  PlaceholderBlock.prototype.componentDidMount = function componentDidMount() {};\n\t\n\t  PlaceholderBlock.prototype.handleFocus = function handleFocus(e) {\n\t    var _this2 = this;\n\t\n\t    // console.log \"focus on placeholder\"\n\t    return setTimeout(function () {\n\t      return _this2.setState({\n\t        enabled: true });\n\t    }, 0);\n\t  };\n\t\n\t  PlaceholderBlock.prototype.classForDefault = function classForDefault() {\n\t    if (!this.state.enabled) {\n\t      return \"defaultValue defaultValue--root\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  PlaceholderBlock.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'span',\n\t      { className: this.classForDefault(), onMouseDown: this.handleFocus },\n\t      this.placeholderText(),\n\t      _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, {\n\t        \"className\": \"imageCaption\",\n\t        \"placeholder\": \"escrive alalal\"\n\t      }))\n\t    );\n\t  };\n\t\n\t  return PlaceholderBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = PlaceholderBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 229:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _assign = __webpack_require__(81);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar VideoBlock = function (_React$Component) {\n\t  (0, _inherits3['default'])(VideoBlock, _React$Component);\n\t\n\t  function VideoBlock(props) {\n\t    (0, _classCallCheck3['default'])(this, VideoBlock);\n\t\n\t    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.updateData = _this.updateData.bind(_this);\n\t    _this.dataForUpdate = _this.dataForUpdate.bind(_this);\n\t    _this.state = { embed_data: _this.defaultData() };\n\t    return _this;\n\t  }\n\t\n\t  VideoBlock.prototype.defaultData = function defaultData() {\n\t    var existing_data = this.props.block.getData().toJS();\n\t    return existing_data.embed_data || {};\n\t  };\n\t\n\t  // will update block state\n\t\n\t\n\t  VideoBlock.prototype.updateData = function updateData() {\n\t    var _props = this.props,\n\t        block = _props.block,\n\t        blockProps = _props.blockProps;\n\t    var _props$blockProps = this.props.blockProps,\n\t        getEditorState = _props$blockProps.getEditorState,\n\t        setEditorState = _props$blockProps.setEditorState;\n\t\n\t    var data = block.getData();\n\t    var newData = data.merge(this.state);\n\t    return setEditorState((0, _index.updateDataOfBlock)(getEditorState(), block, newData));\n\t  };\n\t\n\t  VideoBlock.prototype.dataForUpdate = function dataForUpdate() {\n\t    return this.props.blockProps.data.toJS();\n\t  };\n\t\n\t  VideoBlock.prototype.componentDidMount = function componentDidMount() {\n\t    var _this2 = this;\n\t\n\t    if (!this.props.blockProps.data) {\n\t      return;\n\t    }\n\t    // ensure data isnt already loaded\n\t    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n\t      return;\n\t    }\n\t\n\t    return (0, _axios2['default'])({\n\t      method: 'get',\n\t      url: '' + this.dataForUpdate().endpoint + this.dataForUpdate().provisory_text + '&scheme=https'\n\t    }).then(function (result) {\n\t      return _this2.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n\t      , _this2.updateData);\n\t    })['catch'](function (error) {\n\t      return console.log(\"TODO: error\");\n\t    });\n\t  };\n\t\n\t  VideoBlock.prototype.classForImage = function classForImage() {\n\t    if (this.state.embed_data.thumbnail_url) {\n\t      return \"\";\n\t    } else {\n\t      return \"mixtapeImage--empty u-ignoreBlock\";\n\t    }\n\t  };\n\t\n\t  VideoBlock.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'figure',\n\t      { className: 'graf--figure graf--iframe graf--first', tabIndex: '0' },\n\t      _react2['default'].createElement('div', { className: 'iframeContainer',\n\t        dangerouslySetInnerHTML: { __html: this.state.embed_data.html } }),\n\t      _react2['default'].createElement(\n\t        'figcaption',\n\t        { className: 'imageCaption' },\n\t        _react2['default'].createElement(_draftJs.EditorBlock, (0, _assign2['default'])({}, this.props, { \"className\": \"imageCaption\" }))\n\t      )\n\t    );\n\t  };\n\t\n\t  return VideoBlock;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = VideoBlock;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 230:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\t\n\tvar Debug = function (_React$Component) {\n\t  (0, _inherits3[\"default\"])(Debug, _React$Component);\n\t\n\t  function Debug() {\n\t    (0, _classCallCheck3[\"default\"])(this, Debug);\n\t\n\t    var _this = (0, _possibleConstructorReturn3[\"default\"])(this, _React$Component.call(this));\n\t\n\t    _this.handleToggleReadOnly = _this.handleToggleReadOnly.bind(_this);\n\t    _this.handleTestEmitAndDecode = _this.handleTestEmitAndDecode.bind(_this);\n\t    _this.handleTestEmitTEXT = _this.handleTestEmitTEXT.bind(_this);\n\t    _this.testEmitAndDecode = _this.testEmitAndDecode.bind(_this);\n\t    _this.testEmitTEXT = _this.testEmitTEXT.bind(_this);\n\t    _this.logState = _this.logState.bind(_this);\n\t    _this.toggleDisplay = _this.toggleDisplay.bind(_this);\n\t    _this.open = _this.open.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    _this.state = {\n\t      output: \"\",\n\t      display: \"none\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  Debug.prototype.handleToggleReadOnly = function handleToggleReadOnly(e) {\n\t    e.preventDefault();\n\t    this.props.editor.toggleEditable();\n\t    return false;\n\t  };\n\t\n\t  Debug.prototype.handleTestEmitAndDecode = function handleTestEmitAndDecode(e) {\n\t    e.preventDefault();\n\t    return this.testEmitAndDecode();\n\t  };\n\t\n\t  Debug.prototype.handleTestEmitTEXT = function handleTestEmitTEXT(e) {\n\t    e.preventDefault();\n\t    return this.testEmitTEXT();\n\t  };\n\t\n\t  Debug.prototype.testEmitAndDecode = function testEmitAndDecode(e) {\n\t    var raw_as_json = this.props.editor.emitSerializedOutput();\n\t    this.props.editor.setState({\n\t      editorState: this.props.editor.decodeEditorContent(raw_as_json) }, this.logState((0, _stringify2[\"default\"])(raw_as_json)));\n\t    return false;\n\t  };\n\t\n\t  Debug.prototype.testEmitTEXT = function testEmitTEXT() {\n\t    var text = this.props.editor.getTextFromEditor();\n\t    return this.logState(text);\n\t  };\n\t\n\t  Debug.prototype.logState = function logState(raw) {\n\t    return this.setState({ output: raw }, this.open);\n\t  };\n\t\n\t  Debug.prototype.toggleDisplay = function toggleDisplay(e) {\n\t    e.preventDefault();\n\t    var d = this.state.display === \"block\" ? \"none\" : this.state.display;\n\t    return this.setState({\n\t      display: d });\n\t  };\n\t\n\t  Debug.prototype.open = function open() {\n\t    return this.setState({\n\t      display: \"block\" });\n\t  };\n\t\n\t  Debug.prototype.render = function render() {\n\t    return _react2[\"default\"].createElement(\n\t      \"div\",\n\t      null,\n\t      _react2[\"default\"].createElement(\n\t        \"div\",\n\t        { className: \"debugControls\" },\n\t        _react2[\"default\"].createElement(\n\t          \"ul\",\n\t          null,\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            \" LOCKS: \",\n\t            this.props.editor.state.locks,\n\t            \" \"\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleToggleReadOnly },\n\t              \"EDITABLE: \",\n\t              this.props.editor.state.read_only ? 'NO' : 'YES'\n\t            )\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleTestEmitTEXT },\n\t              \"EDITOR TEXT\"\n\t            )\n\t          ),\n\t          _react2[\"default\"].createElement(\n\t            \"li\",\n\t            null,\n\t            _react2[\"default\"].createElement(\n\t              \"a\",\n\t              { href: \"#\", onClick: this.handleTestEmitAndDecode },\n\t              \"EDITOR STATE\"\n\t            )\n\t          )\n\t        )\n\t      ),\n\t      _react2[\"default\"].createElement(\n\t        \"div\",\n\t        { className: \"debugZone\", style: { display: this.state.display } },\n\t        _react2[\"default\"].createElement(\"a\", { href: \"#\", className: \"dante-debug-close close\", onClick: this.toggleDisplay }),\n\t        _react2[\"default\"].createElement(\n\t          \"div\",\n\t          { className: \"debugOutput\" },\n\t          _react2[\"default\"].createElement(\n\t            \"h2\",\n\t            null,\n\t            \"EDITOR OUTPUT\"\n\t          ),\n\t          this.state.output.length > 0 ? _react2[\"default\"].createElement(\n\t            \"pre\",\n\t            null,\n\t            this.state.output\n\t          ) : undefined\n\t        )\n\t      )\n\t    );\n\t  };\n\t\n\t  return Debug;\n\t}(_react2[\"default\"].Component);\n\t\n\texports[\"default\"] = Debug;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n\n/***/ 231:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar Link = function (_React$Component) {\n\t  (0, _inherits3['default'])(Link, _React$Component);\n\t\n\t  function Link(props) {\n\t    (0, _classCallCheck3['default'])(this, Link);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this._validateLink = _this._validateLink.bind(_this);\n\t    _this._checkProtocol = _this._checkProtocol.bind(_this);\n\t    _this._showPopLinkOver = _this._showPopLinkOver.bind(_this);\n\t    _this._hidePopLinkOver = _this._hidePopLinkOver.bind(_this);\n\t    _this.isHover = false;\n\t    return _this;\n\t  }\n\t\n\t  Link.prototype._validateLink = function _validateLink() {\n\t    var pattern = new RegExp('^(https?:\\/\\/)?' + // protocol\n\t    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name\n\t    '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address\n\t    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path\n\t    '(\\?[&a-z\\d%_.~+=-]*)?' + // query string\n\t    '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locater\n\t    if (!pattern.test(str)) {\n\t      alert(\"Please enter a valid URL.\");\n\t      return false;\n\t    } else {\n\t      return true;\n\t    }\n\t  };\n\t\n\t  Link.prototype._checkProtocol = function _checkProtocol() {\n\t    return console.log(\"xcvd\");\n\t  };\n\t\n\t  Link.prototype._showPopLinkOver = function _showPopLinkOver(e) {\n\t    if (!this.data.showPopLinkOver) {\n\t      return;\n\t    }\n\t    return this.data.showPopLinkOver(this.refs.link);\n\t  };\n\t\n\t  Link.prototype._hidePopLinkOver = function _hidePopLinkOver(e) {\n\t    if (!this.data.hidePopLinkOver) {\n\t      return;\n\t    }\n\t    return this.data.hidePopLinkOver();\n\t  };\n\t\n\t  Link.prototype.render = function render() {\n\t    this.data = _draftJs.Entity.get(this.props.entityKey).getData();\n\t\n\t    return _react2['default'].createElement(\n\t      'a',\n\t      {\n\t        ref: 'link',\n\t        href: this.data.url,\n\t        className: 'markup--anchor',\n\t        onMouseOver: this._showPopLinkOver,\n\t        onMouseOut: this._hidePopLinkOver\n\t      },\n\t      this.props.children\n\t    );\n\t  };\n\t\n\t  return Link;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = Link;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 232:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteInlineTooltip = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteInlineTooltip, _React$Component);\n\t\n\t  function DanteInlineTooltip(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteInlineTooltip);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this._toggleScaled = _this._toggleScaled.bind(_this);\n\t    _this.scale = _this.scale.bind(_this);\n\t    _this.collapse = _this.collapse.bind(_this);\n\t    _this.componentWillReceiveProps = _this.componentWillReceiveProps.bind(_this);\n\t    _this.clickOnFileUpload = _this.clickOnFileUpload.bind(_this);\n\t    _this.handlePlaceholder = _this.handlePlaceholder.bind(_this);\n\t    _this.insertImage = _this.insertImage.bind(_this);\n\t    _this.handleFileInput = _this.handleFileInput.bind(_this);\n\t    _this.widgets = _this.widgets.bind(_this);\n\t    _this.clickHandler = _this.clickHandler.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.state = {\n\t      position: { top: 0, left: 0 },\n\t      show: false,\n\t      scaled: false\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteInlineTooltip.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype._toggleScaled = function _toggleScaled(ev) {\n\t    if (this.state.scaled) {\n\t      return this.collapse();\n\t    } else {\n\t      return this.scale();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scale = function scale() {\n\t    return this.setState({\n\t      scaled: true });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.collapse = function collapse() {\n\t    return this.setState({\n\t      scaled: false });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.componentWillReceiveProps = function componentWillReceiveProps(newProps) {\n\t    return this.collapse();\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.activeClass = function activeClass() {\n\t    //if @props.show then \"is-active\" else \"\"\n\t    if (this.isActive()) {\n\t      return \"is-active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.isActive = function isActive() {\n\t    return this.state.show;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scaledClass = function scaledClass() {\n\t    if (this.state.scaled) {\n\t      return \"is-scaled\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.scaledWidth = function scaledWidth() {\n\t    if (this.state.scaled) {\n\t      return \"124\";\n\t    } else {\n\t      return \"0\";\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.clickOnFileUpload = function clickOnFileUpload() {\n\t    this.refs.fileInput.click();\n\t    this.collapse();\n\t    return this.hide();\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.handlePlaceholder = function handlePlaceholder(input) {\n\t    var opts = {\n\t      type: input.widget_options.insert_block,\n\t      placeholder: input.options.placeholder,\n\t      endpoint: input.options.endpoint\n\t    };\n\t\n\t    return this.props.onChange((0, _index.resetBlockWithType)(this.props.editorState, 'placeholder', opts));\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.insertImage = function insertImage(file) {\n\t    var opts = {\n\t      url: URL.createObjectURL(file),\n\t      file: file\n\t    };\n\t\n\t    return this.props.onChange((0, _index.addNewBlock)(this.props.editorState, 'image', opts));\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.handleFileInput = function handleFileInput(e) {\n\t    var fileList = e.target.files;\n\t    // TODO: support multiple file uploads\n\t    /*\n\t    Object.keys(fileList).forEach (o)=>\n\t      @.insertImage(fileList[0])\n\t    */\n\t    return this.insertImage(fileList[0]);\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.widgets = function widgets() {\n\t    return this.props.editor.widgets;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.clickHandler = function clickHandler(e, type) {\n\t    var request_block = this.widgets().find(function (o) {\n\t      return o.icon === type;\n\t    });\n\t\n\t    switch (request_block.widget_options.insertion) {\n\t      case \"upload\":\n\t        return this.clickOnFileUpload(e, request_block);\n\t      case \"placeholder\":\n\t        return this.handlePlaceholder(request_block);\n\t      default:\n\t        return console.log('WRONG TYPE FOR ' + request_block.widget_options.insertion);\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.getItems = function getItems() {\n\t    return this.widgets().filter(function (o) {\n\t      return o.widget_options.displayOnInlineTooltip;\n\t    });\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.isDescendant = function isDescendant(parent, child) {\n\t    var node = child.parentNode;\n\t    while (node !== null) {\n\t      if (node === parent) {\n\t        return true;\n\t      }\n\t      node = node.parentNode;\n\t    }\n\t    return false;\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.relocate = function relocate() {\n\t    var editorState = this.props.editorState;\n\t\n\t\n\t    if (editorState.getSelection().isCollapsed()) {\n\t\n\t      var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t      var blockType = currentBlock.getType();\n\t\n\t      var contentState = editorState.getCurrentContent();\n\t      var selectionState = editorState.getSelection();\n\t\n\t      var block = contentState.getBlockForKey(selectionState.anchorKey);\n\t\n\t      var nativeSelection = (0, _selection.getSelection)(window);\n\t      if (!nativeSelection.rangeCount) {\n\t        return;\n\t      }\n\t\n\t      var node = (0, _index.getNode)();\n\t\n\t      var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t      var coords = selectionBoundary; //utils.getSelectionDimensions(node)\n\t\n\t      var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t      var parentBoundary = parent.getBoundingClientRect();\n\t\n\t      // hide if selected node is not in editor\n\t      // debugger\n\t      //console.log @isDescendant(parent, nativeSelection.anchorNode)\n\t\n\t      if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n\t        this.hide();\n\t        return;\n\t      }\n\t\n\t      // checkeamos si esta vacio\n\t      this.display(block.getText().length === 0 && blockType === \"unstyled\");\n\t      return this.setPosition({\n\t        top: coords.top + window.scrollY,\n\t        left: coords.left + window.scrollX - 60\n\t      });\n\t\n\t      /*\n\t      @refs.image_popover.display(blockType is \"image\")\n\t       if blockType is \"image\"\n\t        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect()\n\t        *el = document.querySelector(\"#dante_image_popover\")\n\t        el = @refs.image_popover.refs.image_popover\n\t        padd   = el.offsetWidth / 2\n\t        @refs.image_popover.setPosition\n\t          top: selectionBoundary.top - parentBoundary.top + 60\n\t          left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\t         *@setState\n\t        *  image_popover_position:\n\t        *    top: selectionBoundary.top - parentBoundary.top + 60\n\t        *    left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\t        *\n\t      */\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteInlineTooltip.prototype.render = function render() {\n\t    var _this2 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        className: 'inlineTooltip ' + this.activeClass() + ' ' + this.scaledClass(),\n\t        style: this.state.position\n\t      },\n\t      _react2['default'].createElement(\n\t        'button',\n\t        {\n\t          className: 'inlineTooltip-button control',\n\t          title: 'Close Menu',\n\t          'data-action': 'inline-menu',\n\t          onClick: this._toggleScaled\n\t        },\n\t        _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-plus' })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'div',\n\t        {\n\t          className: 'inlineTooltip-menu',\n\t          style: { width: this.scaledWidth() + 'px' }\n\t        },\n\t        this.getItems().map(function (item, i) {\n\t          return _react2['default'].createElement(InlineTooltipItem, {\n\t            item: item,\n\t            key: i,\n\t            clickHandler: _this2.clickHandler\n\t          });\n\t        }),\n\t        _react2['default'].createElement('input', {\n\t          type: 'file',\n\t          style: { display: 'none' },\n\t          ref: 'fileInput',\n\t          multiple: 'multiple',\n\t          onChange: this.handleFileInput\n\t        })\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteInlineTooltip;\n\t}(_react2['default'].Component);\n\t\n\tvar InlineTooltipItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(InlineTooltipItem, _React$Component2);\n\t\n\t  function InlineTooltipItem() {\n\t    (0, _classCallCheck3['default'])(this, InlineTooltipItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this3 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this3.clickHandler = _this3.clickHandler.bind(_this3);\n\t    return _this3;\n\t  }\n\t\n\t  InlineTooltipItem.prototype.clickHandler = function clickHandler(e) {\n\t    e.preventDefault();\n\t    return this.props.clickHandler(e, this.props.item.icon);\n\t  };\n\t\n\t  InlineTooltipItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'button',\n\t      {\n\t        className: 'inlineTooltip-button scale',\n\t        title: this.props.title,\n\t        onMouseDown: this.clickHandler\n\t      },\n\t      _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-' + this.props.item.icon })\n\t    );\n\t  };\n\t\n\t  return InlineTooltipItem;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteInlineTooltip;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 233:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteImagePopover = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteImagePopover, _React$Component);\n\t\n\t  function DanteImagePopover(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteImagePopover);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this._toggleScaled = _this._toggleScaled.bind(_this);\n\t    _this.scale = _this.scale.bind(_this);\n\t    _this.collapse = _this.collapse.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.componentWillReceiveProps = _this.componentWillReceiveProps.bind(_this);\n\t    _this.handleClick = _this.handleClick.bind(_this);\n\t    _this.state = {\n\t      position: {\n\t        top: 0,\n\t        left: 0\n\t      },\n\t      show: false,\n\t      scaled: false,\n\t      buttons: [{ type: \"left\" }, { type: \"center\" }, { type: \"fill\" }, { type: \"wide\" }]\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteImagePopover.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteImagePopover.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteImagePopover.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteImagePopover.prototype._toggleScaled = function _toggleScaled(ev) {\n\t    if (this.state.scaled) {\n\t      return this.collapse();\n\t    } else {\n\t      return this.scale();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.scale = function scale() {\n\t    return this.setState({\n\t      scaled: true });\n\t  };\n\t\n\t  DanteImagePopover.prototype.collapse = function collapse() {\n\t    return this.setState({\n\t      scaled: false });\n\t  };\n\t\n\t  DanteImagePopover.prototype.relocate = function relocate() {\n\t    var editorState = this.props.editorState;\n\t\n\t\n\t    if (editorState.getSelection().isCollapsed()) {\n\t\n\t      var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t      var blockType = currentBlock.getType();\n\t\n\t      var contentState = editorState.getCurrentContent();\n\t      var selectionState = editorState.getSelection();\n\t\n\t      var block = contentState.getBlockForKey(selectionState.anchorKey);\n\t\n\t      var nativeSelection = (0, _selection.getSelection)(window);\n\t      if (!nativeSelection.rangeCount) {\n\t        return;\n\t      }\n\t\n\t      var node = (0, _index.getNode)();\n\t\n\t      var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t      var coords = selectionBoundary;\n\t\n\t      var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t      var parentBoundary = parent.getBoundingClientRect();\n\t\n\t      this.display(blockType === \"image\");\n\t\n\t      if (blockType === \"image\") {\n\t        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect();\n\t        var el = this.refs.image_popover;\n\t        var padd = el.offsetWidth / 2;\n\t        return this.setPosition({\n\t          top: selectionBoundary.top - parentBoundary.top + 60,\n\t          left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n\t        });\n\t      }\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.componentWillReceiveProps = function componentWillReceiveProps(newProps) {\n\t    return this.collapse();\n\t  };\n\t\n\t  DanteImagePopover.prototype.getStyle = function getStyle() {\n\t    if (!this.state.position) {\n\t      return {};\n\t    }\n\t  };\n\t\n\t  DanteImagePopover.prototype.handleClick = function handleClick(item) {\n\t    return this.props.editor.setDirection(item.type);\n\t  };\n\t\n\t  DanteImagePopover.prototype.render = function render() {\n\t    var _this2 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        ref: 'image_popover',\n\t        className: 'dante-popover popover--Aligntooltip popover--top popover--animated ' + (this.state.show ? 'is-active' : undefined),\n\t        style: { top: this.state.position.top,\n\t          left: this.state.position.left }\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'popover-inner' },\n\t        _react2['default'].createElement(\n\t          'ul',\n\t          { className: 'dante-menu-buttons' },\n\t          this.state.buttons.map(function (item, i) {\n\t            return _react2['default'].createElement(DanteImagePopoverItem, {\n\t              item: item,\n\t              handleClick: _this2.handleClick,\n\t              key: i\n\t            });\n\t          })\n\t        )\n\t      ),\n\t      _react2['default'].createElement('div', { className: 'popover-arrow' })\n\t    );\n\t  };\n\t\n\t  return DanteImagePopover;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteImagePopoverItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(DanteImagePopoverItem, _React$Component2);\n\t\n\t  function DanteImagePopoverItem() {\n\t    (0, _classCallCheck3['default'])(this, DanteImagePopoverItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this3 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this3.handleClick = _this3.handleClick.bind(_this3);\n\t    _this3.render = _this3.render.bind(_this3);\n\t    return _this3;\n\t  }\n\t\n\t  DanteImagePopoverItem.prototype.handleClick = function handleClick(e) {\n\t    e.preventDefault();\n\t    return this.props.handleClick(this.props.item);\n\t  };\n\t\n\t  DanteImagePopoverItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      {\n\t        className: 'dante-menu-button align-' + this.props.item.type,\n\t        onMouseDown: this.handleClick },\n\t      _react2['default'].createElement('span', { className: 'tooltip-icon dante-icon-image-' + this.props.item.type })\n\t    );\n\t  };\n\t\n\t  return DanteImagePopoverItem;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteImagePopover;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 234:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteAnchorPopover = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteAnchorPopover, _React$Component);\n\t\n\t  function DanteAnchorPopover(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteAnchorPopover);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this.render = _this.render.bind(_this);\n\t    _this.state = {\n\t      position: {\n\t        top: 0,\n\t        left: 0\n\t      },\n\t      show: false,\n\t      url: \"\"\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteAnchorPopover.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.hide = function hide() {\n\t    return this.setState({\n\t      show: false });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.relocate = function relocate(node) {\n\t    if (node == null) {\n\t      node = null;\n\t    }\n\t    if (!node) {\n\t      return;\n\t    }\n\t\n\t    var editorState = this.props.editorState;\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(editorState);\n\t    var blockType = currentBlock.getType();\n\t\n\t    var contentState = editorState.getCurrentContent();\n\t    var selectionState = editorState.getSelection();\n\t\n\t    var selectionBoundary = node.getBoundingClientRect();\n\t    var coords = selectionBoundary;\n\t\n\t    var el = this.refs.dante_popover;\n\t    var padd = el.offsetWidth / 2;\n\t\n\t    var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t    var parentBoundary = parent.getBoundingClientRect();\n\t\n\t    return {\n\t      top: selectionBoundary.top - parentBoundary.top + 160,\n\t      left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n\t    };\n\t  };\n\t\n\t  DanteAnchorPopover.prototype.render = function render() {\n\t    var position = this.state.position;\n\t\n\t    var style = {\n\t      left: position.left,\n\t      top: position.top,\n\t      visibility: '' + (this.state.show ? 'visible' : 'hidden')\n\t    };\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        ref: 'dante_popover',\n\t        className: 'dante-popover popover--tooltip popover--Linktooltip popover--bottom is-active',\n\t        style: style,\n\t        onMouseOver: this.props.handleOnMouseOver,\n\t        onMouseOut: this.props.handleOnMouseOut\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'popover-inner' },\n\t        _react2['default'].createElement(\n\t          'a',\n\t          { href: this.props.url, target: '_blank' },\n\t          this.state.url\n\t        )\n\t      ),\n\t      _react2['default'].createElement('div', { className: 'popover-arrow' })\n\t    );\n\t  };\n\t\n\t  return DanteAnchorPopover;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteAnchorPopover;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 235:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _possibleConstructorReturn2 = __webpack_require__(18);\n\t\n\tvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\t\n\tvar _inherits2 = __webpack_require__(17);\n\t\n\tvar _inherits3 = _interopRequireDefault(_inherits2);\n\t\n\tvar _react = __webpack_require__(6);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(13);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _selection = __webpack_require__(62);\n\t\n\tvar _index = __webpack_require__(27);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar DanteTooltip = function (_React$Component) {\n\t  (0, _inherits3['default'])(DanteTooltip, _React$Component);\n\t\n\t  function DanteTooltip(props) {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltip);\n\t\n\t    var _this = (0, _possibleConstructorReturn3['default'])(this, _React$Component.call(this, props));\n\t\n\t    _this._clickInlineHandler = _this._clickInlineHandler.bind(_this);\n\t    _this.display = _this.display.bind(_this);\n\t    _this.show = _this.show.bind(_this);\n\t    _this.hide = _this.hide.bind(_this);\n\t    _this.relocate = _this.relocate.bind(_this);\n\t    _this._clickBlockHandler = _this._clickBlockHandler.bind(_this);\n\t    _this.displayLinkMode = _this.displayLinkMode.bind(_this);\n\t    _this.displayActiveMenu = _this.displayActiveMenu.bind(_this);\n\t    _this._enableLinkMode = _this._enableLinkMode.bind(_this);\n\t    _this._disableLinkMode = _this._disableLinkMode.bind(_this);\n\t    _this.handleInputEnter = _this.handleInputEnter.bind(_this);\n\t    _this.confirmLink = _this.confirmLink.bind(_this);\n\t    _this.inlineItems = _this.inlineItems.bind(_this);\n\t    _this.blockItems = _this.blockItems.bind(_this);\n\t    _this.getDefaultValue = _this.getDefaultValue.bind(_this);\n\t    _this.getVisibleSelectionRect = _draftJs.getVisibleSelectionRect;\n\t    _this.state = {\n\t      link_mode: false,\n\t      show: false,\n\t      position: {}\n\t    };\n\t    return _this;\n\t  }\n\t\n\t  DanteTooltip.prototype._clickInlineHandler = function _clickInlineHandler(ev, style) {\n\t    var _this2 = this;\n\t\n\t    ev.preventDefault();\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleInlineStyle(this.props.editorState, style));\n\t\n\t    return setTimeout(function () {\n\t      return _this2.relocate();\n\t    }, 0);\n\t  };\n\t\n\t  DanteTooltip.prototype.display = function display(b) {\n\t    if (b) {\n\t      return this.show();\n\t    } else {\n\t      return this.hide();\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.show = function show() {\n\t    return this.setState({\n\t      show: true });\n\t  };\n\t\n\t  DanteTooltip.prototype.hide = function hide() {\n\t    return this.setState({\n\t      link_mode: false,\n\t      show: false\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.setPosition = function setPosition(coords) {\n\t    return this.setState({\n\t      position: coords });\n\t  };\n\t\n\t  DanteTooltip.prototype.isDescendant = function isDescendant(parent, child) {\n\t    var node = child.parentNode;\n\t    while (node !== null) {\n\t      if (node === parent) {\n\t        return true;\n\t      }\n\t      node = node.parentNode;\n\t    }\n\t    return false;\n\t  };\n\t\n\t  DanteTooltip.prototype.relocate = function relocate() {\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.props.editorState);\n\t    var blockType = currentBlock.getType();\n\t    // display tooltip only for unstyled\n\t\n\t    if (this.props.configTooltip.selectionElements.indexOf(blockType) < 0) {\n\t      this.hide();\n\t      return;\n\t    }\n\t\n\t    if (this.state.link_mode) {\n\t      return;\n\t    }\n\t    if (!this.state.show) {\n\t      return;\n\t    }\n\t\n\t    var el = this.refs.dante_menu;\n\t    var padd = el.offsetWidth / 2;\n\t\n\t    var nativeSelection = (0, _selection.getSelection)(window);\n\t    if (!nativeSelection.rangeCount) {\n\t      return;\n\t    }\n\t\n\t    var selectionBoundary = (0, _selection.getSelectionRect)(nativeSelection);\n\t\n\t    var parent = _reactDom2['default'].findDOMNode(this.props.editor);\n\t    var parentBoundary = parent.getBoundingClientRect();\n\t\n\t    // hide if selected node is not in editor\n\t    if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n\t      this.hide();\n\t      return;\n\t    }\n\t\n\t    var top = selectionBoundary.top - parentBoundary.top - -90 - 5;\n\t    var left = selectionBoundary.left + selectionBoundary.width / 2 - padd;\n\t\n\t    if (!top || !left) {\n\t      return;\n\t    }\n\t\n\t    // console.log \"SET SHOW FOR TOOLTIP INSERT MENU\"\n\t    return this.setState({\n\t      show: true,\n\t      position: {\n\t        left: left,\n\t        top: top\n\t      }\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype._clickBlockHandler = function _clickBlockHandler(ev, style) {\n\t    var _this3 = this;\n\t\n\t    ev.preventDefault();\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleBlockType(this.props.editorState, style));\n\t\n\t    return setTimeout(function () {\n\t      return _this3.relocate();\n\t    }, 0);\n\t  };\n\t\n\t  DanteTooltip.prototype.displayLinkMode = function displayLinkMode() {\n\t    if (this.state.link_mode) {\n\t      return \"dante-menu--linkmode\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.displayActiveMenu = function displayActiveMenu() {\n\t    if (this.state.show) {\n\t      return \"dante-menu--active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype._enableLinkMode = function _enableLinkMode(ev) {\n\t    ev.preventDefault();\n\t    return this.setState({\n\t      link_mode: true });\n\t  };\n\t\n\t  DanteTooltip.prototype._disableLinkMode = function _disableLinkMode(ev) {\n\t    ev.preventDefault();\n\t    return this.setState({\n\t      link_mode: false,\n\t      url: \"\"\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.hideMenu = function hideMenu() {\n\t    return this.hide();\n\t  };\n\t\n\t  DanteTooltip.prototype.handleInputEnter = function handleInputEnter(e) {\n\t    if (e.which === 13) {\n\t      return this.confirmLink(e);\n\t    }\n\t  };\n\t\n\t  DanteTooltip.prototype.confirmLink = function confirmLink(e) {\n\t    e.preventDefault();\n\t    var editorState = this.props.editorState;\n\t\n\t    var urlValue = e.currentTarget.value;\n\t    var contentState = editorState.getCurrentContent();\n\t    var selection = editorState.getSelection();\n\t\n\t    var opts = {\n\t      url: urlValue,\n\t      showPopLinkOver: this.props.showPopLinkOver,\n\t      hidePopLinkOver: this.props.hidePopLinkOver\n\t    };\n\t\n\t    var entityKey = _draftJs.Entity.create('LINK', 'MUTABLE', opts);\n\t\n\t    if (selection.isCollapsed()) {\n\t      console.log(\"COLLAPSED SKIPPING LINK\");\n\t      return;\n\t    }\n\t\n\t    this.props.onChange(_draftJs.RichUtils.toggleLink(editorState, selection, entityKey));\n\t\n\t    return this._disableLinkMode(e);\n\t  };\n\t\n\t  DanteTooltip.prototype.getPosition = function getPosition() {\n\t    var pos = this.state.position;\n\t    return pos;\n\t  };\n\t\n\t  DanteTooltip.prototype.inlineItems = function inlineItems() {\n\t    return this.props.widget_options.block_types.filter(function (o) {\n\t      return o.type === \"inline\";\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.blockItems = function blockItems() {\n\t    return this.props.widget_options.block_types.filter(function (o) {\n\t      return o.type === \"block\";\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.getDefaultValue = function getDefaultValue() {\n\t    var _this4 = this;\n\t\n\t    if (this.refs.dante_menu_input) {\n\t      this.refs.dante_menu_input.value = \"\";\n\t    }\n\t\n\t    var currentBlock = (0, _index.getCurrentBlock)(this.props.editorState);\n\t    var blockType = currentBlock.getType();\n\t    var selection = this.props.editor.state.editorState.getSelection();\n\t    var selectedEntity = null;\n\t    var defaultUrl = null;\n\t    return currentBlock.findEntityRanges(function (character) {\n\t      var entityKey = character.getEntity();\n\t      selectedEntity = entityKey;\n\t      return entityKey !== null && _draftJs.Entity.get(entityKey).getType() === 'LINK';\n\t    }, function (start, end) {\n\t      var selStart = selection.getAnchorOffset();\n\t      var selEnd = selection.getFocusOffset();\n\t      if (selection.getIsBackward()) {\n\t        selStart = selection.getFocusOffset();\n\t        selEnd = selection.getAnchorOffset();\n\t      }\n\t\n\t      if (start === selStart && end === selEnd) {\n\t        defaultUrl = _draftJs.Entity.get(selectedEntity).getData().url;\n\t        return _this4.refs.dante_menu_input.value = defaultUrl;\n\t      }\n\t    });\n\t  };\n\t\n\t  DanteTooltip.prototype.render = function render() {\n\t    var _this5 = this;\n\t\n\t    return _react2['default'].createElement(\n\t      'div',\n\t      {\n\t        id: 'dante-menu',\n\t        ref: 'dante_menu',\n\t        className: 'dante-menu ' + this.displayActiveMenu() + ' ' + this.displayLinkMode(),\n\t        style: this.getPosition()\n\t      },\n\t      _react2['default'].createElement(\n\t        'div',\n\t        { className: 'dante-menu-linkinput' },\n\t        _react2['default'].createElement('input', {\n\t          className: 'dante-menu-input',\n\t          ref: 'dante_menu_input',\n\t          placeholder: 'Paste or type a link',\n\t          onKeyPress: this.handleInputEnter,\n\t          defaultValue: this.getDefaultValue()\n\t        }),\n\t        _react2['default'].createElement('div', { className: 'dante-menu-button', onMouseDown: this._disableLinkMode })\n\t      ),\n\t      _react2['default'].createElement(\n\t        'ul',\n\t        { className: 'dante-menu-buttons' },\n\t        this.blockItems().map(function (item, i) {\n\t          return _react2['default'].createElement(DanteTooltipItem, {\n\t            key: i,\n\t            item: item,\n\t            handleClick: _this5._clickBlockHandler,\n\t            editorState: _this5.props.editorState,\n\t            type: 'block',\n\t            currentStyle: _this5.props.editorState.getCurrentInlineStyle\n\t          });\n\t        }),\n\t        _react2['default'].createElement(DanteTooltipLink, {\n\t          editorState: this.props.editorState,\n\t          enableLinkMode: this._enableLinkMode\n\t        }),\n\t        this.inlineItems().map(function (item, i) {\n\t          return _react2['default'].createElement(DanteTooltipItem, {\n\t            key: i,\n\t            item: item,\n\t            type: 'inline',\n\t            editorState: _this5.props.editorState,\n\t            handleClick: _this5._clickInlineHandler\n\t          });\n\t        })\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteTooltip;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteTooltipItem = function (_React$Component2) {\n\t  (0, _inherits3['default'])(DanteTooltipItem, _React$Component2);\n\t\n\t  function DanteTooltipItem() {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltipItem);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    var _this6 = (0, _possibleConstructorReturn3['default'])(this, _React$Component2.call.apply(_React$Component2, [this].concat(args)));\n\t\n\t    _this6.handleClick = _this6.handleClick.bind(_this6);\n\t    _this6.activeClass = _this6.activeClass.bind(_this6);\n\t    _this6.isActive = _this6.isActive.bind(_this6);\n\t    _this6.activeClassInline = _this6.activeClassInline.bind(_this6);\n\t    _this6.activeClassBlock = _this6.activeClassBlock.bind(_this6);\n\t    _this6.render = _this6.render.bind(_this6);\n\t    return _this6;\n\t  }\n\t\n\t  DanteTooltipItem.prototype.handleClick = function handleClick(ev) {\n\t    return this.props.handleClick(ev, this.props.item.style);\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClass = function activeClass() {\n\t    if (this.isActive()) {\n\t      return \"active\";\n\t    } else {\n\t      return \"\";\n\t    }\n\t  };\n\t\n\t  DanteTooltipItem.prototype.isActive = function isActive() {\n\t    if (this.props.type === \"block\") {\n\t      return this.activeClassBlock();\n\t    } else {\n\t      return this.activeClassInline();\n\t    }\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClassInline = function activeClassInline() {\n\t    if (!this.props.editorState) {\n\t      return;\n\t    }\n\t    //console.log @props.item\n\t    return this.props.editorState.getCurrentInlineStyle().has(this.props.item.style);\n\t  };\n\t\n\t  DanteTooltipItem.prototype.activeClassBlock = function activeClassBlock() {\n\t    //console.log \"EDITOR STATE\", @props.editorState\n\t    if (!this.props.editorState) {\n\t      return;\n\t    }\n\t    var selection = this.props.editorState.getSelection();\n\t    var blockType = this.props.editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType();\n\t    return this.props.item.style === blockType;\n\t  };\n\t\n\t  DanteTooltipItem.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      { className: 'dante-menu-button ' + this.activeClass(), onMouseDown: this.handleClick },\n\t      _react2['default'].createElement('i', { className: 'dante-icon dante-icon-' + this.props.item.label, 'data-action': 'bold' })\n\t    );\n\t  };\n\t\n\t  return DanteTooltipItem;\n\t}(_react2['default'].Component);\n\t\n\tvar DanteTooltipLink = function (_React$Component3) {\n\t  (0, _inherits3['default'])(DanteTooltipLink, _React$Component3);\n\t\n\t  function DanteTooltipLink() {\n\t    (0, _classCallCheck3['default'])(this, DanteTooltipLink);\n\t\n\t    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n\t      args[_key2] = arguments[_key2];\n\t    }\n\t\n\t    var _this7 = (0, _possibleConstructorReturn3['default'])(this, _React$Component3.call.apply(_React$Component3, [this].concat(args)));\n\t\n\t    _this7.promptForLink = _this7.promptForLink.bind(_this7);\n\t    return _this7;\n\t  }\n\t\n\t  DanteTooltipLink.prototype.promptForLink = function promptForLink(ev) {\n\t    var selection = this.props.editorState.getSelection();\n\t    if (!selection.isCollapsed()) {\n\t      return this.props.enableLinkMode(ev);\n\t    }\n\t  };\n\t\n\t  DanteTooltipLink.prototype.render = function render() {\n\t    return _react2['default'].createElement(\n\t      'li',\n\t      { className: 'dante-menu-button', onMouseDown: this.promptForLink },\n\t      _react2['default'].createElement(\n\t        'i',\n\t        { className: 'dante-icon icon-createlink', 'data-action': 'createlink' },\n\t        'link'\n\t      )\n\t    );\n\t  };\n\t\n\t  return DanteTooltipLink;\n\t}(_react2['default'].Component);\n\t\n\texports['default'] = DanteTooltip;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 236:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\t//TODO: what the f*ck is happening here? ;-;\n\tvar findEntities = function findEntities(entityType, instance, contentBlock, callback) {\n\t  return contentBlock.findEntityRanges(function (_this) {\n\t    return function (character) {\n\t      var entityKey, opts, res;\n\t      entityKey = character.getEntity();\n\t      return res = entityKey !== null && _draftJs.Entity.get(entityKey).getType() === entityType, res ? (opts = {\n\t        showPopLinkOver: instance.showPopLinkOver,\n\t        hidePopLinkOver: instance.hidePopLinkOver\n\t      }, _draftJs.Entity.mergeData(entityKey, opts)) : void 0, res;\n\t    };\n\t  }(undefined), callback);\n\t};\n\t\n\texports['default'] = findEntities;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 237:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _draftJs = __webpack_require__(9);\n\t\n\tvar _immutable = __webpack_require__(53);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\t// { compose\n\t// }  = require('underscore')\n\t\n\t// underscore compose function\n\tvar compose = function compose() {\n\t  var args = arguments;\n\t  var start = args.length - 1;\n\t  return function () {\n\t    var i = start;\n\t    var result = args[start].apply(this, arguments);\n\t    while (i--) {\n\t      result = args[i].call(this, result);\n\t    }\n\t    return result;\n\t  };\n\t};\n\t\n\t// from https://gist.github.com/N1kto/6702e1c2d89a33a15a032c234fc4c34e\n\t\n\t/*\n\t * Helpers\n\t */\n\t\n\t// Prepares img meta data object based on img attributes\n\tvar getBlockSpecForElement = function getBlockSpecForElement(imgElement) {\n\t  return {\n\t    contentType: 'image',\n\t    imgSrc: imgElement.getAttribute('src')\n\t  };\n\t};\n\t\n\t// Wraps meta data in HTML element which is 'understandable' by Draft, I used <blockquote />.\n\tvar wrapBlockSpec = function wrapBlockSpec(blockSpec) {\n\t  if (blockSpec === null) {\n\t    return null;\n\t  }\n\t\n\t  var tempEl = document.createElement('blockquote');\n\t  // stringify meta data and insert it as text content of temp HTML element. We will later extract\n\t  // and parse it.\n\t  tempEl.innerText = (0, _stringify2['default'])(blockSpec);\n\t  return tempEl;\n\t};\n\t\n\t// Replaces <img> element with our temp element\n\tvar replaceElement = function replaceElement(oldEl, newEl) {\n\t  if (!(newEl instanceof HTMLElement)) {\n\t    return;\n\t  }\n\t\n\t  var upEl = getUpEl(oldEl);\n\t  //parentNode = oldEl.parentNode\n\t  //return parentNode.replaceChild(newEl, oldEl)\n\t  return upEl.parentNode.insertBefore(newEl, upEl);\n\t};\n\t\n\tvar getUpEl = function getUpEl(el) {\n\t  var original_el = el;\n\t  while (el.parentNode) {\n\t    if (el.parentNode.tagName !== 'BODY') {\n\t      el = el.parentNode;\n\t    }\n\t    if (el.parentNode.tagName === 'BODY') {\n\t      return el;\n\t    }\n\t  }\n\t};\n\t\n\tvar elementToBlockSpecElement = compose(wrapBlockSpec, getBlockSpecForElement);\n\t\n\tvar imgReplacer = function imgReplacer(imgElement) {\n\t  return replaceElement(imgElement, elementToBlockSpecElement(imgElement));\n\t};\n\t\n\t/*\n\t * Main function\n\t */\n\t\n\t// takes HTML string and returns DraftJS ContentState\n\tvar customHTML2Content = function customHTML2Content(HTML, blockRn) {\n\t  var tempDoc = new DOMParser().parseFromString(HTML, 'text/html');\n\t  // replace all <img /> with <blockquote /> elements\n\t\n\t  var a = tempDoc.querySelectorAll('img').forEach(function (item) {\n\t    return imgReplacer(item);\n\t  });\n\t\n\t  // use DraftJS converter to do initial conversion. I don't provide DOMBuilder and\n\t  // blockRenderMap arguments here since it should fall back to its default ones, which are fine\n\t  console.log(tempDoc.body.innerHTML);\n\t  var contentBlocks = (0, _draftJs.convertFromHTML)(tempDoc.body.innerHTML, _draftJs.getSafeBodyFromHTML, blockRn);\n\t\n\t  // now replace <blockquote /> ContentBlocks with 'atomic' ones\n\t  contentBlocks = contentBlocks.map(function (block) {\n\t    var newBlock = void 0;\n\t    console.log(\"CHECK BLOCK\", block.getType());\n\t    if (block.getType() !== 'blockquote') {\n\t      return block;\n\t    }\n\t\n\t    var json = \"\";\n\t    try {\n\t      json = JSON.parse(block.getText());\n\t    } catch (error) {\n\t      return block;\n\t    }\n\t\n\t    return newBlock = block.merge({\n\t      type: \"image\",\n\t      text: \"\",\n\t      data: {\n\t        url: json.imgSrc,\n\t        forceUpload: true\n\t      }\n\t    });\n\t  });\n\t\n\t  tempDoc = null;\n\t  return _draftJs.ContentState.createFromBlockArray(contentBlocks);\n\t};\n\t\n\texports['default'] = customHTML2Content;\n\tmodule.exports = exports['default'];\n\n/***/ },\n\n/***/ 238:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\texports.__esModule = true;\n\t\n\tvar _stringify = __webpack_require__(80);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _classCallCheck2 = __webpack_require__(15);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _axios = __webpack_require__(61);\n\t\n\tvar _axios2 = _interopRequireDefault(_axios);\n\t\n\tvar _immutable = __webpack_require__(53);\n\t\n\tvar _immutable2 = _interopRequireDefault(_immutable);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\t\n\tvar SaveBehavior = function () {\n\t  function SaveBehavior(options) {\n\t    (0, _classCallCheck3[\"default\"])(this, SaveBehavior);\n\t\n\t    this.getLocks = options.getLocks;\n\t    this.config = options.config;\n\t    this.editorContent = options.editorContent;\n\t    this.editorState = options.editorState;\n\t  }\n\t\n\t  SaveBehavior.prototype.handleStore = function handleStore(ev) {\n\t    return this.store();\n\t  };\n\t\n\t  SaveBehavior.prototype.store = function store(content) {\n\t    var _this = this;\n\t\n\t    if (!this.config.data_storage.url) {\n\t      return;\n\t    }\n\t    if (this.getLocks() > 0) {\n\t      return;\n\t    }\n\t\n\t    clearTimeout(this.timeout);\n\t\n\t    return this.timeout = setTimeout(function () {\n\t      return _this.checkforStore(content);\n\t    }, this.config.data_storage.interval);\n\t  };\n\t\n\t  SaveBehavior.prototype.getTextFromEditor = function getTextFromEditor(content) {\n\t    return content.blocks.map(function (o) {\n\t      return o.text;\n\t    }).join(\"\\n\");\n\t  };\n\t\n\t  SaveBehavior.prototype.getUrl = function getUrl() {\n\t    var url = this.config.data_storage.url;\n\t\n\t    if (typeof url === \"function\") {\n\t      return url();\n\t    } else {\n\t      return url;\n\t    }\n\t  };\n\t\n\t  SaveBehavior.prototype.getMethod = function getMethod() {\n\t    var method = this.config.data_storage.method;\n\t\n\t    if (typeof method === \"function\") {\n\t      return method();\n\t    } else {\n\t      return method;\n\t    }\n\t  };\n\t\n\t  SaveBehavior.prototype.checkforStore = function checkforStore(content) {\n\t    var _this2 = this;\n\t\n\t    // ENTER DATA STORE\n\t    var isChanged = !_immutable2[\"default\"].is(_immutable2[\"default\"].fromJS(this.editorContent), _immutable2[\"default\"].fromJS(content));\n\t    // console.log(\"CONTENT CHANGED:\", isChanged)\n\t\n\t    if (!isChanged) {\n\t      return;\n\t    }\n\t\n\t    if (this.config.xhr.before_handler) {\n\t      this.config.xhr.before_handler();\n\t    }\n\t    // console.log \"SAVING TO: #{@getMethod()} #{@getUrl()}\"\n\t\n\t    return (0, _axios2[\"default\"])({\n\t      method: this.getMethod(),\n\t      url: this.getUrl(),\n\t      data: {\n\t        editor_content: (0, _stringify2[\"default\"])(content),\n\t        text_content: this.getTextFromEditor(content)\n\t      }\n\t    }).then(function (result) {\n\t      // console.log \"STORING CONTENT\", result\n\t      if (_this2.config.data_storage.success_handler) {\n\t        _this2.config.data_storage.success_handler(result);\n\t      }\n\t      if (_this2.config.xhr.success_handler) {\n\t        return _this2.config.xhr.success_handler(result);\n\t      }\n\t    })[\"catch\"](function (error) {\n\t      // console.log(\"ERROR: got error saving content at #{@config.data_storage.url} - #{error}\")\n\t      if (_this2.config.xhr.failure_handler) {\n\t        return _this2.config.xhr.failure_handler(error);\n\t      }\n\t    });\n\t  };\n\t\n\t  return SaveBehavior;\n\t}();\n\t\n\texports[\"default\"] = SaveBehavior;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n\n/***/ 350:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 351:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n\n/***/ 371:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/dante.svg\";\n\n/***/ },\n\n/***/ 372:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/dante.ttf\";\n\n/***/ },\n\n/***/ 373:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/dante.woff\";\n\n/***/ },\n\n/***/ 374:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontello.svg\";\n\n/***/ },\n\n/***/ 375:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontello.ttf\";\n\n/***/ },\n\n/***/ 376:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__.p + \"fonts/fontello.woff\";\n\n/***/ }\n\n})\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** Dante2.min.js\n **/","\nimport {Dante, DanteEditor} from './components/App'\nimport dantecss from './styles/dante.scss';\nimport draftcss from './styles/draft.css';\n\nmodule.exports = {\n  Dante, \n  DanteEditor\n};\n\n//window.Dante = Dante\n//window.Dante.DanteEditor = DanteEditor\n\n/*\nexport default class Dante2 {\n  constructor() {\n    this._name = 'Dante2';\n  }\n  get name() {\n    return this._name;\n  }\n}*/\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n ** module id = 6\n ** module chunks = 1\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_13__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}\n ** module id = 13\n ** module chunks = 1\n **/","import { Map } from 'immutable';\n\n\n\nimport { EditorState, ContentBlock, genKey } from 'draft-js';\n\n\n/*\nUsed from [react-rte](https://github.com/brijeshb42/medium-draft)\nby [brijeshb42](https://github.com/brijeshb42/medium-draft)\n*/\n\n/*\nReturns default block-level metadata for various block type. Empty object otherwise.\n*/\nexport const getDefaultBlockData = (blockType, initialData = {}) => {\n  switch (blockType) {\n    //case Block.TODO: return { checked: false };\n    default: return initialData;\n  }\n};\n\nexport const getNode = (root=window) => {\n  let t = null\n  if (root.getSelection){\n    t = root.getSelection()\n  } else if (root.document.getSelection){\n    t = root.document.getSelection()\n  } else if (root.document.selection){\n    t = root.document.selection.createRange().text\n  }\n  return t\n}\n\n/*\nGet currentBlock in the editorState.\n*/\nexport const getCurrentBlock = (editorState) => {\n  const selectionState = editorState.getSelection();\n  const contentState = editorState.getCurrentContent();\n  const block = contentState.getBlockForKey(selectionState.getStartKey());\n  return block;\n};\n\n/*\nAdds a new block (currently replaces an empty block) at the current cursor position\nof the given `newType`.\n*/\nexport const addNewBlock = (editorState, newType = \"unstyled\", initialData = {}) => {\n  const selectionState = editorState.getSelection();\n  if (!selectionState.isCollapsed()) {\n    return editorState;\n  }\n  const contentState = editorState.getCurrentContent();\n  const key = selectionState.getStartKey();\n  const blockMap = contentState.getBlockMap();\n  const currentBlock = getCurrentBlock(editorState);\n  if (!currentBlock) {\n    return editorState;\n  }\n  if (currentBlock.getLength() === 0) {\n    if (currentBlock.getType() === newType) {\n      return editorState;\n    }\n    const newBlock = currentBlock.merge({\n      type: newType,\n      data: getDefaultBlockData(newType, initialData),\n    });\n    const newContentState = contentState.merge({\n      blockMap: blockMap.set(key, newBlock),\n      selectionAfter: selectionState,\n    });\n    return EditorState.push(editorState, newContentState, 'change-block-type');\n  }\n  return editorState;\n};\n\n\n/*\nChanges the block type of the current block.\n*/\nexport const resetBlockWithType = (editorState, newType = \"unstyled\", data={}) => {\n  const contentState = editorState.getCurrentContent();\n  const selectionState = editorState.getSelection();\n  const key = selectionState.getStartKey();\n  const blockMap = contentState.getBlockMap();\n  const block = blockMap.get(key);\n\n  let newText = '';\n  console.log( \"DATA FOR PLACEHOLDER!\", data)\n  const text = block.getText();\n  if (block.getLength() >= 2) {\n    newText = text.substr(1);\n  }\n\n  /*if(data.text){\n    newText = data.text\n  }*/\n\n  //let newText = data.text\n\n  const newBlock = block.merge({\n    text: newText,\n    type: newType,\n    data: getDefaultBlockData(newType, data),\n  });\n  const newContentState = contentState.merge({\n    blockMap: blockMap.set(key, newBlock),\n    selectionAfter: selectionState.merge({\n      anchorOffset: 0,\n      focusOffset: 0,\n    }),\n  });\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n};\n\n\n/*\nUpdate block-level metadata of the given `block` to the `newData`/\n*/\nexport const updateDataOfBlock = (editorState, block, newData) => {\n  const contentState = editorState.getCurrentContent();\n  const newBlock = block.merge({\n    data: newData,\n  });\n  const newContentState = contentState.merge({\n    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock),\n  });\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n  // return editorState;\n};\n\nexport const updateTextOfBlock = (editorState, block, text) => {\n  const contentState = editorState.getCurrentContent();\n  const newBlock = block.merge({\n    text: text,\n  });\n  const newContentState = contentState.merge({\n    blockMap: contentState.getBlockMap().set(block.getKey(), newBlock),\n  });\n\n  return EditorState.push(editorState, newContentState, 'change-block-type');\n  // return editorState;\n};\n\n// const BEFORE = -1;\n// const AFTER = 1;\n\n/*\nUsed from [react-rte](https://github.com/sstur/react-rte/blob/master/src/lib/insertBlockAfter.js)\nby [sstur](https://github.com/sstur)\n*/\nexport const addNewBlockAt = (\n    editorState,\n    pivotBlockKey,\n    newBlockType = \"unstyled\",\n    initialData = {}\n  ) => {\n  const content = editorState.getCurrentContent();\n  const blockMap = content.getBlockMap();\n  const block = blockMap.get(pivotBlockKey);\n  const blocksBefore = blockMap.toSeq().takeUntil((v) => (v === block));\n  const blocksAfter = blockMap.toSeq().skipUntil((v) => (v === block)).rest();\n  const newBlockKey = genKey();\n\n  const newBlock = new ContentBlock({\n    key: newBlockKey,\n    type: newBlockType,\n    text: '',\n    characterList: block.getCharacterList().slice(0, 0),\n    depth: 0,\n    data: Map(getDefaultBlockData(newBlockType, initialData)),\n  });\n\n  const newBlockMap = blocksBefore.concat(\n    [[pivotBlockKey, block], [newBlockKey, newBlock]],\n    blocksAfter\n  ).toOrderedMap();\n\n  const selection = editorState.getSelection();\n\n  const newContent = content.merge({\n    blockMap: newBlockMap,\n    selectionBefore: selection,\n    selectionAfter: selection.merge({\n      anchorKey: newBlockKey,\n      anchorOffset: 0,\n      focusKey: newBlockKey,\n      focusOffset: 0,\n      isBackward: false,\n    }),\n  });\n  return EditorState.push(editorState, newContent, 'split-block');\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/model/index.js\n **/","/*\nReturns the `boundingClientRect` of the passed selection.\n*/\nexport const getSelectionRect = (selected) => {\n  const _rect = selected.getRangeAt(0).getBoundingClientRect();\n  // selected.getRangeAt(0).getBoundingClientRect()\n  let rect = _rect && _rect.top ? _rect : selected.getRangeAt(0).getClientRects()[0];\n  if (!rect) {\n    if (selected.anchorNode && selected.anchorNode.getBoundingClientRect) {\n      rect = selected.anchorNode.getBoundingClientRect();\n      rect.isEmptyline = true;\n    } else {\n      return null;\n    }\n  }\n  return rect;\n};\n\n/*\nReturns the native selection node.\n*/\nexport const getSelection = (root) => {\n  let t = null;\n  if (root.getSelection) {\n    t = root.getSelection();\n  } else if (root.document.getSelection) {\n    t = root.document.getSelection();\n  } else if (root.document.selection) {\n    t = root.document.selection.createRange().text;\n  }\n  return t;\n};\n\n/*\nRecursively finds the DOM Element of the block where the cursor is currently present.\nIf not found, returns null.\n*/\nexport const getSelectedBlockNode = (root) => {\n  const selection = root.getSelection();\n  if (selection.rangeCount === 0) {\n    return null;\n  }\n  let node = selection.getRangeAt(0).startContainer;\n  // console.log(node);\n  do {\n    if (node.getAttribute && node.getAttribute('data-block') === 'true') {\n      return node;\n    }\n    node = node.parentNode;\n    // console.log(node);\n  } while (node !== null);\n  return null;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/selection.js\n **/","module.exports = __webpack_public_path__ + \"fonts/dante.eot\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/dante.eot\n ** module id = 183\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/fontello.eot\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/fontello.eot\n ** module id = 184\n ** module chunks = 1\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport Immutable from 'immutable'\nimport { Map, fromJS } from 'immutable'\nimport { \n  convertToRaw, \n  convertFromRaw, \n  CompositeDecorator, \n  getVisibleSelectionRect, \n  getDefaultKeyBinding, \n  getSelectionOffsetKeyForNode, \n  KeyBindingUtil, \n  ContentState, \n  Editor, \n  EditorState, \n  Entity, \n  RichUtils, \n  DefaultDraftBlockRenderMap, \n  SelectionState, \n  Modifier, \n  BlockMapBuilder, \n  getSafeBodyFromHTML } from 'draft-js'\n\nimport DraftPasteProcessor from 'draft-js/lib/DraftPasteProcessor'\n\nimport { convertToHTML, convertFromHTML } from 'draft-convert'\n\nimport isSoftNewlineEvent from 'draft-js/lib/isSoftNewlineEvent'\n\nimport { \n  addNewBlock, \n  resetBlockWithType, \n  updateDataOfBlock, \n  updateTextOfBlock, \n  getCurrentBlock, \n  addNewBlockAt } from '../model/index.js'\n\nimport DanteImagePopover from './popovers/image'\nimport DanteAnchorPopover from './popovers/link'\n\nimport { getSelectionRect, getSelection } from \"../utils/selection.js\"\nimport DanteInlineTooltip from './popovers/addButton'\nimport DanteTooltip from './popovers/toolTip'\nimport Link from './decorators/link'\n\nimport Debug from './debug'\nimport findEntities from '../utils/find_entities'\nimport ImageBlock from './blocks/image'\nimport EmbedBlock from './blocks/embed'\nimport VideoBlock from './blocks/video'\nimport PlaceholderBlock from './blocks/placeholder'\n\nimport SaveBehavior from '../utils/save_content'\nimport customHTML2Content from '../utils/html2content'\n\nexport class Dante {\n  constructor(options) {\n    if (options == null) {\n      options = {}\n    }\n    console.log(\"init editor Dante!\")\n\n    // deep merge on config\n    let config = Map(fromJS(this.defaultOptions(options)))\n\n    this.options = config.mergeDeep(options).toJS()\n    console.log(this.options)\n  }\n\n  defaultOptions(options) {\n    // default options\n    if (options == null) {\n      options = {}\n    }\n    let defaultOptions = {}\n    defaultOptions.el = 'app'\n    defaultOptions.content = \"\"\n    defaultOptions.read_only = false\n    defaultOptions.spellcheck = false\n    defaultOptions.title_placeholder = \"Title\"\n    defaultOptions.body_placeholder = \"Write your story\"\n    // @defaultOptions.api_key = \"86c28a410a104c8bb58848733c82f840\"\n\n    defaultOptions.widgets = [{\n      title: 'add an image',\n      icon: 'image',\n      type: 'image',\n      block: ImageBlock,\n      editable: true,\n      renderable: true,\n      breakOnContinuous: true,\n      wrapper_class: \"graf graf--figure\",\n      selected_class: \"is-selected is-mediaFocused\",\n      selectedFn: block => {\n        const { direction } = block.getData().toJS()\n        switch (direction) {\n          case \"left\":\n            return \"graf--layoutOutsetLeft\"\n          case \"center\":\n            return \"\"\n          case \"wide\":\n            return \"sectionLayout--fullWidth\"\n          case \"fill\":\n            return \"graf--layoutFillWidth\"\n        }\n      },\n      handleEnterWithoutText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      },\n      handleEnterWithText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      },\n      widget_options: {\n        displayOnInlineTooltip: true,\n        insertion: \"upload\",\n        insert_block: \"image\"\n      },\n      options: {\n        upload_url: options.upload_url,\n        upload_headers: options.upload_headers,\n        upload_formName: options.upload_formName,\n        upload_callback: options.image_upload_callback,\n        image_delete_callback: options.image_delete_callback,\n        image_caption_placeholder: options.image_caption_placeholder\n      }\n    }, {\n      icon: 'embed',\n      title: 'insert embed',\n      type: 'embed',\n      block: EmbedBlock,\n      editable: true,\n      renderable: true,\n      breakOnContinuous: true,\n      wrapper_class: \"graf graf--mixtapeEmbed\",\n      selected_class: \"is-selected is-mediaFocused\",\n      widget_options: {\n        displayOnInlineTooltip: true,\n        insertion: \"placeholder\",\n        insert_block: \"embed\"\n      },\n      options: {\n        endpoint: `//api.embed.ly/1/extract?key=${ options.api_key }&url=`,\n        placeholder: 'Paste a link to embed content from another site (e.g. Twitter) and press Enter'\n      },\n      handleEnterWithoutText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      },\n      handleEnterWithText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      }\n    }, {\n      icon: 'video',\n      title: 'insert video',\n      editable: true,\n      type: 'video',\n      block: VideoBlock,\n      renderable: true,\n      breakOnContinuous: true,\n      wrapper_class: \"graf--figure graf--iframe\",\n      selected_class: \" is-selected is-mediaFocused\",\n      widget_options: {\n        displayOnInlineTooltip: true,\n        insertion: \"placeholder\",\n        insert_block: \"video\"\n      },\n      options: {\n        endpoint: `//api.embed.ly/1/oembed?key=${ options.api_key }&url=`,\n        placeholder: 'Paste a YouTube, Vine, Vimeo, or other video link, and press Enter',\n        caption: 'Type caption for embed (optional)'\n      },\n\n      handleEnterWithoutText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      },\n\n      handleEnterWithText(ctx, block) {\n        const { editorState } = ctx.state\n        return ctx.onChange(addNewBlockAt(editorState, block.getKey()))\n      }\n    }, {\n      renderable: true,\n      editable: true,\n      block: PlaceholderBlock,\n      type: 'placeholder',\n      wrapper_class: \"is-embedable\",\n      selected_class: \" is-selected is-mediaFocused\",\n      widget_options: {\n        displayOnInlineTooltip: false\n      },\n      handleEnterWithText(ctx, block) {\n        const { editorState } = ctx.state\n        const data = {\n          provisory_text: block.getText(),\n          endpoint: block.getData().get('endpoint'),\n          type: block.getData().get('type')\n        }\n\n        return ctx.onChange(resetBlockWithType(editorState, data.type, data))\n      }\n    }]\n\n    defaultOptions.tooltips = [{\n      ref: 'insert_tooltip',\n      component: DanteTooltip,\n      displayOnSelection: true,\n      selectionElements: [\n      \"unstyled\", \n      \"blockquote\", \n      \"ordered-list\", \n      \"unordered-list\", \n      \"unordered-list-item\", \n      \"ordered-list-item\", \n      \"code-block\", \n      'header-one', \n      'header-two', \n      'header-three', \n      'header-four'],\n      widget_options: {\n        block_types: [\n        // {label: 'p', style: 'unstyled'},\n        { label: 'h2', style: 'header-one', type: \"block\" }, \n        { label: 'h3', style: 'header-two', type: \"block\" }, \n        { label: 'h4', style: 'header-three', type: \"block\" }, \n        { label: 'blockquote', style: 'blockquote', type: \"block\" },\n        { label: 'insertunorderedlist', style: 'unordered-list-item', type: \"block\" }, \n        { label: 'insertorderedlist', style: 'ordered-list-item', type: \"block\" }, \n        { label: 'code', style: 'code-block', type: \"block\" }, \n        { label: 'bold', style: 'BOLD', type: \"inline\" }, \n        { label: 'italic', style: 'ITALIC', type: \"inline\" }]\n      }\n    }, {\n      ref: 'add_tooltip',\n      component: DanteInlineTooltip\n    }, {\n      ref: 'anchor_popover',\n      component: DanteAnchorPopover\n    }, {\n      ref: 'image_popover',\n      component: DanteImagePopover\n    }]\n\n    defaultOptions.xhr = {\n      before_handler: null,\n      success_handler: null,\n      error_handler: null\n    }\n\n    defaultOptions.data_storage = {\n      url: null,\n      method: \"POST\",\n      success_handler: null,\n      failure_handler: null,\n      interval: 1500\n    }\n\n    defaultOptions.default_wrappers = [\n    { className: 'graf--p', block: 'unstyled' }, \n    { className: 'graf--h2', block: 'header-one' },\n    { className: 'graf--h3', block: 'header-two' }, \n    { className: 'graf--h4', block: 'header-three' }, \n    { className: 'graf--blockquote', block: 'blockquote' }, \n    { className: 'graf--insertunorderedlist', block: 'unordered-list-item' }, \n    { className: 'graf--insertorderedlist', block: 'ordered-list-item' }, \n    { className: 'graf--code', block: 'code-block' }, \n    { className: 'graf--bold', block: 'BOLD' }, \n    { className: 'graf--italic', block: 'ITALIC' }]\n\n    defaultOptions.continuousBlocks = [\n    \"unstyled\", \n    \"blockquote\", \n    \"ordered-list\", \n    \"unordered-list\", \n    \"unordered-list-item\", \n    \"ordered-list-item\", \n    \"code-block\"\n    ]\n\n    defaultOptions.key_commands = {\n      \"alt-shift\": [{ key: 65, cmd: 'add-new-block' }],\n      \"alt-cmd\": [{ key: 49, cmd: 'toggle_block:header-one' }, \n                  { key: 50, cmd: 'toggle_block:header-two' }, \n                  { key: 53, cmd: 'toggle_block:blockquote' }],\n      \"cmd\": [{ key: 66, cmd: 'toggle_inline:BOLD' }, \n              { key: 73, cmd: 'toggle_inline:ITALIC' }, \n              { key: 75, cmd: 'insert:link' }]\n    }\n\n    defaultOptions.character_convert_mapping = {\n      '> ': \"blockquote\",\n      '*.': \"unordered-list-item\",\n      '* ': \"unordered-list-item\",\n      '- ': \"unordered-list-item\",\n      '1.': \"ordered-list-item\",\n      '# ': 'header-one',\n      '##': 'header-two',\n      '==': \"unstyled\",\n      '` ': \"code-block\"\n    }\n\n    return defaultOptions\n  }\n\n  getContent() {\n    //console.log @options.content\n    //console.log \"IS POC DATA?\", @options.content is PocData\n    //return PocData if @options.poc\n    //console.log @options.content , PocData\n    //PocData\n    return this.options.content\n  }\n\n  render() {\n    return this.editor = ReactDOM.render(\n      <DanteEditor content={this.getContent()} config={this.options} />,\n      document.getElementById(this.options.el)\n    )\n  }\n}\nexport class DanteEditor extends React.Component {\n  constructor(props) {\n    super(props)\n    //window.main_editor = @\n\n    this.initializeState = this.initializeState.bind(this)\n    this.refreshSelection = this.refreshSelection.bind(this)\n    this.forceRender = this.forceRender.bind(this)\n    this.onChange = this.onChange.bind(this)\n    this.dispatchChangesToSave = this.dispatchChangesToSave.bind(this)\n    this.setPreContent = this.setPreContent.bind(this)\n    this.focus = this.focus.bind(this)\n    this.getEditorState = this.getEditorState.bind(this)\n    this.emitSerializedOutput = this.emitSerializedOutput.bind(this)\n    this.decodeEditorContent = this.decodeEditorContent.bind(this)\n    this.getTextFromEditor = this.getTextFromEditor.bind(this)\n    this.getLocks = this.getLocks.bind(this)\n    this.addLock = this.addLock.bind(this)\n    this.removeLock = this.removeLock.bind(this)\n    this.renderableBlocks = this.renderableBlocks.bind(this)\n    this.defaultWrappers = this.defaultWrappers.bind(this)\n    this.blockRenderer = this.blockRenderer.bind(this)\n    this.handleBlockRenderer = this.handleBlockRenderer.bind(this)\n    this.blockStyleFn = this.blockStyleFn.bind(this)\n    this.getDataBlock = this.getDataBlock.bind(this)\n    this.styleForBlock = this.styleForBlock.bind(this)\n    this.handlePasteText = this.handlePasteText.bind(this)\n    this.handleTXTPaste = this.handleTXTPaste.bind(this)\n    this.handleHTMLPaste = this.handleHTMLPaste.bind(this)\n    this.handlePasteImage = this.handlePasteImage.bind(this)\n    this.handleDroppedFiles = this.handleDroppedFiles.bind(this)\n    this.handleUpArrow = this.handleUpArrow.bind(this)\n    this.handleDownArrow = this.handleDownArrow.bind(this)\n    this.handleReturn = this.handleReturn.bind(this)\n    this.handleBeforeInput = this.handleBeforeInput.bind(this)\n    this.handleKeyCommand = this.handleKeyCommand.bind(this)\n    this.findCommandKey = this.findCommandKey.bind(this)\n    this.KeyBindingFn = this.KeyBindingFn.bind(this)\n    this.updateBlockData = this.updateBlockData.bind(this)\n    this.setDirection = this.setDirection.bind(this)\n    this.toggleEditable = this.toggleEditable.bind(this)\n    this.closePopOvers = this.closePopOvers.bind(this)\n    this.relocateTooltips = this.relocateTooltips.bind(this)\n    this.tooltipsWithProp = this.tooltipsWithProp.bind(this)\n    this.tooltipHasSelectionElement = this.tooltipHasSelectionElement.bind(this)\n    this.handleShowPopLinkOver = this.handleShowPopLinkOver.bind(this)\n    this.handleHidePopLinkOver = this.handleHidePopLinkOver.bind(this)\n    this.showPopLinkOver = this.showPopLinkOver.bind(this)\n    this.hidePopLinkOver = this.hidePopLinkOver.bind(this)\n    this.render = this.render.bind(this)\n    this.decorator = new CompositeDecorator([{\n      strategy: findEntities.bind(null, 'LINK', this),\n      component: Link\n    }])\n\n    this.blockRenderMap = Map({\n      \"image\": {\n        element: 'figure'\n      },\n      \"video\": {\n        element: 'figure'\n      },\n      \"embed\": {\n        element: 'div'\n      },\n      'unstyled': {\n        wrapper: null,\n        element: 'div'\n      },\n      'paragraph': {\n        wrapper: null,\n        element: 'div'\n      },\n      'placeholder': {\n        wrapper: null,\n        element: 'div'\n      }\n\n    })\n\n    this.extendedBlockRenderMap = DefaultDraftBlockRenderMap.merge(this.blockRenderMap)\n\n    this.state = {\n      editorState: this.initializeState(),\n      read_only: this.props.config.read_only,\n      blockRenderMap: this.extendedBlockRenderMap,\n      locks: 0,\n      debug: this.props.config.debug\n    }\n\n    this.widgets = this.props.config.widgets\n    this.tooltips = this.props.config.tooltips\n\n    this.key_commands = this.props.config.key_commands\n\n    this.continuousBlocks = this.props.config.continuousBlocks\n\n    this.block_types = this.props.config.block_types\n\n    this.default_wrappers = this.props.config.default_wrappers\n\n    this.character_convert_mapping = this.props.config.character_convert_mapping\n\n    this.save = new SaveBehavior({\n      getLocks: this.getLocks,\n      config: {\n        xhr: this.props.config.xhr,\n        data_storage: this.props.config.data_storage\n      },\n      editorState: this.state.editorState,\n      editorContent: this.emitSerializedOutput()\n    })\n  }\n\n  initializeState() {\n    if (this.props.content) {\n      //and @.props.content.trim() isnt \"\"\n      return this.decodeEditorContent(this.props.content)\n    } else {\n      return EditorState.createEmpty(this.decorator)\n    }\n  }\n\n  refreshSelection(newEditorState) {\n    const { editorState } = this.state\n    // Setting cursor position after inserting to content\n    const s = this.state.editorState.getSelection()\n    const c = editorState.getCurrentContent()\n    const focusOffset = s.getFocusOffset()\n    const anchorKey = s.getAnchorKey()\n\n    let selectionState = SelectionState.createEmpty(s.getAnchorKey())\n\n    // console.log anchorKey, focusOffset\n    selectionState = selectionState.merge({\n      anchorOffset: focusOffset,\n      focusKey: anchorKey,\n      focusOffset\n    })\n\n    let newState = EditorState.forceSelection(newEditorState, selectionState)\n\n    return this.onChange(newState)\n  }\n\n  forceRender(editorState) {\n    const selection = this.state.editorState.getSelection()\n    const content = editorState.getCurrentContent()\n    const newEditorState = EditorState.createWithContent(content, this.decorator)\n\n    return this.refreshSelection(newEditorState)\n  }\n\n  onChange(editorState) {\n    this.setPreContent()\n    this.setState({ editorState })\n\n    const currentBlock = getCurrentBlock(this.state.editorState)\n    const blockType = currentBlock.getType()\n\n    if (!editorState.getSelection().isCollapsed()) {\n\n      const tooltip = this.tooltipsWithProp('displayOnSelection')[0]\n      if (!this.tooltipHasSelectionElement(tooltip, blockType)) {\n        return\n      }\n\n      this.handleTooltipDisplayOn('displayOnSelection')\n    } else {\n      this.handleTooltipDisplayOn('displayOnSelection', false)\n    }\n\n    setTimeout(() => {\n      return this.relocateTooltips()\n    }, 0)\n\n    return this.dispatchChangesToSave()\n  }\n\n  dispatchChangesToSave() {\n    clearTimeout(this.saveTimeout)\n    return this.saveTimeout = setTimeout(() => {\n      return this.save.store(this.emitSerializedOutput())\n    }, 100)\n  }\n\n  setPreContent() {\n    const content = this.emitSerializedOutput()\n    return this.save.editorContent = content\n  }\n\n  focus() {}\n  //@props.refs.richEditor.focus()\n\n  getEditorState() {\n    return this.state.editorState\n  }\n\n  emitSerializedOutput() {\n    const raw = convertToRaw(this.state.editorState.getCurrentContent())\n\n    return raw\n  }\n\n  decodeEditorContent(raw_as_json) {\n    const new_content = convertFromRaw(raw_as_json)\n    let editorState\n\n    return editorState = EditorState.createWithContent(new_content, this.decorator)\n  }\n\n  //# title utils\n  getTextFromEditor() {\n    const c = this.state.editorState.getCurrentContent()\n    const out = c.getBlocksAsArray().map(o => {\n      return o.getText()\n    }).join(\"\\n\")\n\n    return out\n  }\n\n  emitHTML2() {\n    let html\n\n    return html = convertToHTML({\n      entityToHTML: (entity, originalText) => {\n        if (entity.type === 'LINK') {\n          return `<a href=\\\"${ entity.data.url }\\\">${ originalText }</a>`\n        } else {\n          return originalText\n        }\n      }\n\n    })(this.state.editorState.getCurrentContent())\n  }\n\n  getLocks() {\n    return this.state.locks\n  }\n\n  addLock() {\n    return this.setState({\n      locks: this.state.locks += 1 })\n  }\n\n  removeLock() {\n    return this.setState({\n      locks: this.state.locks -= 1 })\n  }\n\n  renderableBlocks() {\n    return this.widgets.filter(o => o.renderable).map(o => o.type)\n  }\n\n  defaultWrappers(blockType) {\n    return this.default_wrappers.filter(o => {\n      return o.block === blockType\n    }).map(o => o.className)\n  }\n\n  blockRenderer(block) {\n\n    switch (block.getType()) {\n\n      case \"atomic\":\n\n        const entity = block.getEntityAt(0)\n        const entity_type = Entity.get(entity).getType()\n\n        break\n    }\n\n    if (this.renderableBlocks().includes(block.getType())) {\n      return this.handleBlockRenderer(block)\n    }\n\n    return null\n  }\n\n  handleBlockRenderer(block) {\n    const dataBlock = this.getDataBlock(block)\n    if (!dataBlock) {\n      return null\n    }\n\n    const read_only = this.state.read_only ? false : null\n    const editable = read_only !== null ? read_only : dataBlock.editable\n\n    return {\n      component: eval(dataBlock.block),\n      editable,\n      props: {\n        data: block.getData(),\n        getEditorState: this.getEditorState,\n        setEditorState: this.onChange,\n        addLock: this.addLock,\n        removeLock: this.removeLock,\n        getLocks: this.getLocks,\n        config: dataBlock.options\n      }\n    }\n\n    return null\n  }\n\n  blockStyleFn(block) {\n    const currentBlock = getCurrentBlock(this.state.editorState)\n    const is_selected = currentBlock.getKey() === block.getKey() ? \"is-selected\" : \"\"\n\n    if (this.renderableBlocks().includes(block.getType())) {\n      return this.styleForBlock(block, currentBlock, is_selected)\n    }\n\n    const defaultBlockClass = this.defaultWrappers(block.getType())\n    if (defaultBlockClass.length > 0) {\n      return `graf ${ defaultBlockClass[0] } ${ is_selected }`\n    } else {\n      return `graf nana ${ is_selected }`\n    }\n  }\n\n  getDataBlock(block) {\n    return this.widgets.find(o => {\n      return o.type === block.getType()\n    })\n  }\n\n  styleForBlock(block, currentBlock, is_selected) {\n    const dataBlock = this.getDataBlock(block)\n\n    if (!dataBlock) {\n      return null\n    }\n\n    const selectedFn = dataBlock.selectedFn ? dataBlock.selectedFn(block) : null\n    const selected_class = is_selected ? dataBlock.selected_class : ''\n\n    return `${ dataBlock.wrapper_class } ${ selected_class } ${ selectedFn }`\n  }\n\n  handleTooltipDisplayOn(prop, display) {\n    if (display == null) {\n      display = true\n    }\n    return setTimeout(() => {\n      const items = this.tooltipsWithProp(prop)\n      return items.map(o => {\n        this.refs[o.ref].display(display)\n        return this.refs[o.ref].relocate()\n      })\n    }, 20)\n  }\n\n  handlePasteText(text, html) {\n\n    // https://github.com/facebook/draft-js/issues/685\n    /*\n    html = \"<p>chao</p>\n    <avv>aaa</avv>\n    <p>oli</p>\n    <img src='x'/>\"\n    */\n\n    // if not html then fallback to default handler\n\n    if (!html) {\n      return this.handleTXTPaste(text, html)\n    }\n    if (html) {\n      return this.handleHTMLPaste(text, html)\n    }\n  }\n\n  handleTXTPaste(text, html) {\n    const currentBlock = getCurrentBlock(this.state.editorState)\n\n    let { editorState } = this.state\n\n    switch (currentBlock.getType()) {\n      case \"image\":case \"video\":case \"placeholder\":\n        const newContent = Modifier.replaceText(editorState.getCurrentContent(), new SelectionState({\n          anchorKey: currentBlock.getKey(),\n          anchorOffset: 0,\n          focusKey: currentBlock.getKey(),\n          focusOffset: 2\n        }), text)\n\n        editorState = EditorState.push(editorState, newContent, 'replace-text')\n\n        this.onChange(editorState)\n\n        return true\n      default:\n        return false\n    }\n  }\n\n  handleHTMLPaste(text, html) {\n\n    const currentBlock = getCurrentBlock(this.state.editorState)\n\n    // TODO: make this configurable\n    switch (currentBlock.getType()) {\n      case \"image\":case \"video\":case \"placeholder\":\n        return this.handleTXTPaste(text, html)\n        break\n    }\n\n    const newContentState = customHTML2Content(html, this.extendedBlockRenderMap)\n\n    const selection = this.state.editorState.getSelection()\n    const endKey = selection.getEndKey()\n\n    const content = this.state.editorState.getCurrentContent()\n    const blocksBefore = content.blockMap.toSeq().takeUntil(v => v.key === endKey)\n    const blocksAfter = content.blockMap.toSeq().skipUntil(v => v.key === endKey).rest()\n\n    const newBlockKey = newContentState.blockMap.first().getKey()\n\n    const newBlockMap = blocksBefore.concat(newContentState.blockMap, blocksAfter).toOrderedMap()\n\n    const newContent = content.merge({\n      blockMap: newBlockMap,\n      selectionBefore: selection,\n      selectionAfter: selection.merge({\n        anchorKey: newBlockKey,\n        anchorOffset: 0,\n        focusKey: newBlockKey,\n        focusOffset: 0,\n        isBackward: false\n      })\n    })\n\n    const pushedContentState = EditorState.push(this.state.editorState, newContent, 'insert-fragment')\n\n    this.onChange(pushedContentState)\n\n    return true\n  }\n\n  handlePasteImage(files) {\n    //TODO: check file types\n    return files.map(file => {\n      let opts = {\n        url: URL.createObjectURL(file),\n        file\n      }\n\n      return this.onChange(addNewBlock(this.state.editorState, 'image', opts))\n    })\n  }\n\n  handleDroppedFiles(state, files) {\n    return files.map(file => {\n      let opts = {\n        url: URL.createObjectURL(file),\n        file\n      }\n\n      return this.onChange(addNewBlock(this.state.editorState, 'image', opts))\n    })\n  }\n\n  handleUpArrow(e) {\n    return setTimeout(() => {\n      return this.forceRender(this.state.editorState)\n    }, 10)\n  }\n\n  handleDownArrow(e) {\n    return setTimeout(() => {\n      return this.forceRender(this.state.editorState)\n    }, 10)\n  }\n\n  handleReturn(e) {\n    if (this.props.handleReturn) {\n      if (this.props.handleReturn()) {\n        return true\n      }\n    }\n\n    let { editorState } = this.state\n\n    if (!e.altKey && !e.metaKey && !e.ctrlKey) {\n      const currentBlock = getCurrentBlock(editorState)\n      const blockType = currentBlock.getType()\n      const selection = editorState.getSelection()\n\n      const config_block = this.getDataBlock(currentBlock)\n\n      if (currentBlock.getText().length === 0) {\n\n        if (config_block && config_block.handleEnterWithoutText) {\n          config_block.handleEnterWithText(this, currentBlock)\n          this.closePopOvers()\n          return true\n        }\n\n        //TODO turn this in configurable\n        switch (blockType) {\n          case \"header-one\":\n            this.onChange(resetBlockWithType(editorState, \"unstyled\"))\n            return true\n            break\n          default:\n            return false\n        }\n      }\n\n      if (currentBlock.getText().length > 0) {\n\n        if (blockType === \"unstyled\") {\n          // hack hackety hack\n          // https://github.com/facebook/draft-js/issues/304\n          const newContent = Modifier.splitBlock(\n            this.state.editorState.getCurrentContent(), \n            this.state.editorState.getSelection())\n\n          const newEditorState = EditorState.push(this.state.editorState, \n                                                  newContent, 'insert-characters')\n          this.onChange(newEditorState)\n\n          setTimeout(() => {\n            //TODO: check is element is in viewport\n            const a = document.getElementsByClassName(\"is-selected\")\n            const pos = a[0].getBoundingClientRect()\n            return window.scrollTo(0, pos.top + window.scrollY - 100)\n          }, 0)\n\n          return true\n        }\n\n        if (config_block && config_block.handleEnterWithText) {\n          config_block.handleEnterWithText(this, currentBlock)\n          this.closePopOvers()\n          return true\n        }\n\n        if (currentBlock.getLength() === selection.getStartOffset()) {\n          if (this.continuousBlocks.indexOf(blockType) < 0) {\n            this.onChange(addNewBlockAt(editorState, currentBlock.getKey()))\n            return true\n          }\n        }\n\n        return false\n      }\n\n      // selection.isCollapsed() and # should we check collapsed here?\n      if (currentBlock.getLength() === selection.getStartOffset()) {\n        //or (config_block && config_block.breakOnContinuous))\n        // it will match the unstyled for custom blocks\n        if (this.continuousBlocks.indexOf(blockType) < 0) {\n          this.onChange(addNewBlockAt(editorState, currentBlock.getKey()))\n          return true\n        }\n        return false\n      }\n\n      return false\n    }\n  }\n\n  //return false\n\n  // TODO: make this configurable\n  handleBeforeInput(chars) {\n    const currentBlock = getCurrentBlock(this.state.editorState)\n    const blockType = currentBlock.getType()\n    const selection = this.state.editorState.getSelection()\n\n    let { editorState } = this.state\n\n    // close popovers\n    if (currentBlock.getText().length !== 0) {\n      //@closeInlineButton()\n      this.closePopOvers()\n    }\n\n    // handle space on link\n    const endOffset = selection.getEndOffset()\n    const endKey = currentBlock.getEntityAt(endOffset - 1)\n    const endEntityType = endKey && Entity.get(endKey).getType()\n    const afterEndKey = currentBlock.getEntityAt(endOffset)\n    const afterEndEntityType = afterEndKey && Entity.get(afterEndKey).getType()\n\n    // will insert blank space when link found\n    if (chars === ' ' && endEntityType === 'LINK' && afterEndEntityType !== 'LINK') {\n      const newContentState = Modifier.insertText(editorState.getCurrentContent(), selection, ' ')\n      const newEditorState = EditorState.push(editorState, newContentState, 'insert-characters')\n      this.onChange(newEditorState)\n      return true\n    }\n\n    // block transform\n    if (blockType.indexOf('atomic') === 0) {\n      return false\n    }\n\n    const blockLength = currentBlock.getLength()\n    if (selection.getAnchorOffset() > 1 || blockLength > 1) {\n      return false\n    }\n\n    const blockTo = this.character_convert_mapping[currentBlock.getText() + chars]\n\n    console.log(`BLOCK TO SHOW: ${ blockTo }`)\n\n    if (!blockTo) {\n      return false\n    }\n\n    this.onChange(resetBlockWithType(editorState, blockTo))\n\n    return true\n  }\n\n  // TODO: make this configurable\n  handleKeyCommand(command) {\n    const { editorState } = this.state\n    let currentBlockType, newBlockType\n\n    if (this.props.handleKeyCommand && this.props.handleKeyCommand(command)) {\n      return true\n    }\n\n    if (command === 'add-new-block') {\n      this.onChange(addNewBlock(editorState, 'blockquote'))\n      return true\n    }\n\n    const block = getCurrentBlock(editorState)\n\n    if (command.indexOf('toggle_inline:') === 0) {\n      newBlockType = command.split(':')[1]\n      currentBlockType = block.getType()\n      this.onChange(RichUtils.toggleInlineStyle(editorState, newBlockType))\n      return true\n    }\n\n    if (command.indexOf('toggle_block:') === 0) {\n      newBlockType = command.split(':')[1]\n      currentBlockType = block.getType()\n\n      this.onChange(RichUtils.toggleBlockType(editorState, newBlockType))\n      return true\n    }\n\n    const newState = RichUtils.handleKeyCommand(this.state.editorState, command)\n    if (newState) {\n      this.onChange(newState)\n      return true\n    }\n\n    return false\n  }\n\n  findCommandKey(opt, command) {\n    // console.log \"COMMAND find: #{opt} #{command}\"\n    return this.key_commands[opt].find(o => o.key === command)\n  }\n\n  KeyBindingFn(e) {\n\n    // + B / Ctrl + B   Bold\n    // + I / Ctrl + I   Italic\n    // + K / Ctrl + K   Turn into link\n    // + Alt + 1 / Ctrl + Alt + 1   Header\n    // + Alt + 2 / Ctrl + Alt + 2   Sub-Header\n    // + Alt + 5 / Ctrl + Alt + 5   Quote (Press once for a block quote, again for a pull quote and a third time to turn off quote)\n\n    let cmd\n    if (e.altKey) {\n      if (e.shiftKey) {\n        cmd = this.findCommandKey(\"alt-shift\", e.which)\n        if (cmd) {\n          return cmd.cmd\n        }\n\n        return getDefaultKeyBinding(e)\n      }\n\n      if (e.ctrlKey || e.metaKey) {\n        cmd = this.findCommandKey(\"alt-cmd\", e.which)\n        if (cmd) {\n          return cmd.cmd\n        }\n        return getDefaultKeyBinding(e)\n      }\n    } else if (e.ctrlKey || e.metaKey) {\n      cmd = this.findCommandKey(\"cmd\", e.which)\n      if (cmd) {\n        return cmd.cmd\n      }\n      return getDefaultKeyBinding(e)\n    }\n\n    return getDefaultKeyBinding(e)\n  }\n\n  // will update block state todo: movo to utils\n  updateBlockData(block, options) {\n    const data = block.getData()\n    const newData = data.merge(options)\n    const newState = updateDataOfBlock(this.state.editorState, block, newData)\n    // this fixes enter from image caption\n    return this.forceRender(newState)\n  }\n\n  setDirection(direction_type) {\n    const contentState = this.state.editorState.getCurrentContent()\n    const selectionState = this.state.editorState.getSelection()\n    const block = contentState.getBlockForKey(selectionState.anchorKey)\n\n    return this.updateBlockData(block, { direction: direction_type })\n  }\n\n  //# read only utils\n  toggleEditable() {\n    this.closePopOvers()\n\n    return this.setState({ read_only: !this.state.read_only }, this.testEmitAndDecode)\n  }\n\n  closePopOvers() {\n    return this.tooltips.map(o => {\n      return this.refs[o.ref].hide()\n    })\n  }\n\n  relocateTooltips() {\n    return this.tooltips.map(o => {\n      return this.refs[o.ref].relocate()\n    })\n  }\n\n  tooltipsWithProp(prop) {\n    return this.tooltips.filter(o => {\n      return o[prop]\n    })\n  }\n\n  tooltipHasSelectionElement(tooltip, element) {\n    return tooltip.selectionElements.includes(element)\n  }\n\n  //################################\n  // TODO: this methods belongs to popovers/link\n  //################################\n\n  handleShowPopLinkOver(e) {\n    return this.showPopLinkOver()\n  }\n\n  handleHidePopLinkOver(e) {\n    return this.hidePopLinkOver()\n  }\n\n  showPopLinkOver(el) {\n    // handles popover display\n    // using anchor or from popover\n\n    const parent_el = ReactDOM.findDOMNode(this)\n\n    // set url first in order to calculate popover width\n    let coords\n    this.refs.anchor_popover.setState({ url: el ? el.href : this.refs.anchor_popover.state.url })\n\n    if (el) {\n      coords = this.refs.anchor_popover.relocate(el)\n    }\n\n    if (coords) {\n      this.refs.anchor_popover.setPosition(coords)\n    }\n\n    this.refs.anchor_popover.setState({ show: true })\n\n    this.isHover = true\n    return this.cancelHide()\n  }\n\n  hidePopLinkOver() {\n    return this.hideTimeout = setTimeout(() => {\n      return this.refs.anchor_popover.hide()\n    }, 300)\n  }\n\n  cancelHide() {\n    // console.log \"Cancel Hide\"\n    return clearTimeout(this.hideTimeout)\n  }\n\n  //##############################\n\n  render() {\n    return (\n      <div id=\"content\" suppressContentEditableWarning={ true }>\n        <article className=\"postArticle\">\n          <div className=\"postContent\">\n            <div className=\"notesSource\">\n              <div id=\"editor\" className=\"postField postField--body\">\n                <section className=\"section--first section--last\">\n                  <div className=\"section-divider layoutSingleColumn\">\n                    <hr className=\"section-divider\" />\n                  </div>\n                  <div className=\"section-content\">\n                    <div ref=\"richEditor\" className=\"section-inner layoutSingleColumn\"\n                        onClick={ this.focus }>\n                      <Editor\n                        blockRendererFn={ this.blockRenderer }\n                        editorState={ this.state.editorState }\n                        onChange={ this.onChange }\n                        onUpArrow={ this.handleUpArrow }\n                        onDownArrow={ this.handleDownArrow }\n                        handleReturn={ this.handleReturn }\n                        blockRenderMap={ this.state.blockRenderMap }\n                        blockStyleFn={ this.blockStyleFn }\n                        handlePastedText={ this.handlePasteText }\n                        handlePastedFiles={ this.handlePasteImage }\n                        handleDroppedFiles={ this.handleDroppedFiles }\n                        handleKeyCommand={ this.handleKeyCommand }\n                        keyBindingFn={ this.KeyBindingFn }\n                        handleBeforeInput={ this.handleBeforeInput }\n                        readOnly={ this.state.read_only }\n                        placeholder={ this.props.config.body_placeholder }\n                        ref=\"editor\"\n                      />\n                    </div>\n                  </div>\n                </section>\n              </div>\n            </div>\n          </div>\n        </article>\n        {\n          this.tooltips.map( (o, i) => {\n            return (\n              <o.component\n                ref={ o.ref }\n                key={ i }\n                editor={ this }\n                editorState={ this.state.editorState }\n                onChange={ this.onChange }\n                configTooltip={ o }\n                widget_options={ o.widget_options }\n                showPopLinkOver={ this.showPopLinkOver }\n                hidePopLinkOver={ this.hidePopLinkOver }\n                handleOnMouseOver={ this.handleShowPopLinkOver }\n                handleOnMouseOut={ this.handleHidePopLinkOver }\n              />\n            )\n          })\n        }\n        {\n          this.state.debug\n          ? <Debug locks={ this.state.locks } editor={ this } />\n          : undefined\n        }\n      </div>\n\n    )\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/App.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nimport axios from \"axios\"\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nexport default class EmbedBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\n    this.updateData = this.updateData.bind(this)\n    this.dataForUpdate = this.dataForUpdate.bind(this)\n    this.componentDidMount = this.componentDidMount.bind(this)\n    this.state = {\n      embed_data: this.defaultData(),\n      error: \"\"\n    }\n  }\n\n  defaultData() {\n    const existing_data = this.props.block.getData().toJS()\n    return existing_data.embed_data || {}\n  }\n\n  // will update block state\n  updateData() {\n    const { block, blockProps } = this.props\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const data = block.getData()\n    const newData = data.merge(this.state)\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  dataForUpdate() {\n\n    return this.props.blockProps.data.toJS()\n  }\n\n  componentDidMount() {\n\n    if (!this.props.blockProps.data) {\n      return\n    }\n\n    // ensure data isnt already loaded\n    // unless @dataForUpdate().endpoint or @dataForUpdate().provisory_text\n\n    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n      //debugger\n      return\n    }\n\n    return axios({\n      method: 'get',\n      url: `${ this.dataForUpdate().endpoint }${ this.dataForUpdate().provisory_text }&scheme=https`\n    }).then(result => {\n\n      return this.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n      , this.updateData)\n    }).catch(error => {\n\n      this.setState({\n        error: error.response.data.error_message })\n      return console.log(\"TODO: error\")\n    })\n  }\n\n  classForImage() {\n    if (this.state.embed_data.images) {\n      return \"\"\n    } else {\n      return \"mixtapeImage--empty u-ignoreBlock\"\n    }\n  }\n  //if @state.embed_data.thumbnail_url then \"\" else \"mixtapeImage--empty u-ignoreBlock\"\n\n  picture() {\n    if (this.state.embed_data.images && this.state.embed_data.images.length > 0) {\n      return this.state.embed_data.images[0].url\n    } else {\n      return \"\"\n    }\n  }\n\n  render() {\n    //block = @.props\n    //foo = @.props.blockProps\n    //data = Entity.get(block.block.getEntityAt(0)).getData()\n    console.log(\"ERROR\", this.state.error)\n    return (\n      <span>\n        { this.picture()\n          ? <a\n              target='_blank'\n              className={ `js-mixtapeImage mixtapeImage ${ this.classForImage() }` }\n              href={ this.state.embed_data.url }\n              style={ { backgroundImage: `url('${ this.picture() }')` } }\n            />\n          : undefined\n        }\n        { this.state.error ? \n          <h2>{ this.state.error }</h2>\n          : undefined\n        }\n        <a\n          className='markup--anchor markup--mixtapeEmbed-anchor'\n          target='_blank'\n          href={ this.state.embed_data.url }\n        >\n          <strong className='markup--strong markup--mixtapeEmbed-strong'>\n            { this.state.embed_data.title }\n          </strong>\n          <em className='markup--em markup--mixtapeEmbed-em'>\n            { this.state.embed_data.description }\n          </em>\n        </a>{ this.state.embed_data.provider_url }\n      </span>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/embed.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport {\n  Entity, \n  RichUtils, \n  AtomicBlockUtils, \n  EditorBlock, \n  EditorState } from 'draft-js'\n\nimport axios from \"axios\"\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nexport default class ImageBlock extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.blockPropsSrc = this.blockPropsSrc.bind(this)\n    this.defaultUrl = this.defaultUrl.bind(this)\n    this.defaultAspectRatio = this.defaultAspectRatio.bind(this)\n    this.updateData = this.updateData.bind(this)\n    this.replaceImg = this.replaceImg.bind(this)\n    this.startLoader = this.startLoader.bind(this)\n    this.stopLoader = this.stopLoader.bind(this)\n    this.handleUpload = this.handleUpload.bind(this)\n    this.aspectRatio = this.aspectRatio.bind(this)\n    this.updateDataSelection = this.updateDataSelection.bind(this)\n    this.handleGrafFigureSelectImg = this.handleGrafFigureSelectImg.bind(this)\n    this.getUploadUrl = this.getUploadUrl.bind(this)\n    this.uploadFile = this.uploadFile.bind(this)\n    this.uploadCompleted = this.uploadCompleted.bind(this)\n    this.updateProgressBar = this.updateProgressBar.bind(this)\n    this.placeHolderEnabled = this.placeHolderEnabled.bind(this)\n    this.placeholderText = this.placeholderText.bind(this)\n    this.handleFocus = this.handleFocus.bind(this)\n    this.render = this.render.bind(this)\n    let existing_data = this.props.block.getData().toJS()\n\n    this.config = this.props.blockProps.config\n    this.file = this.props.blockProps.data.get('file')\n    this.state = {\n      loading: false,\n      selected: false,\n      loading_progress: 0,\n      enabled: false,\n      caption: this.defaultPlaceholder(),\n      direction: existing_data.direction || \"center\",\n      width: 0,\n      height: 0,\n      file: null,\n      url: this.blockPropsSrc() || this.defaultUrl(existing_data),\n      aspect_ratio: this.defaultAspectRatio(existing_data)\n    }\n  }\n\n  blockPropsSrc() {\n    // console.log @.props.blockProps.data.src\n    return this.props.blockProps.data.src\n  }\n  /*\n  debugger\n  block = @.props\n  entity = block.block.getEntityAt(0)\n  if entity\n    data = Entity.get(entity).getData().src\n  else\n    null\n  */\n\n  defaultUrl(data) {\n    if (data.url) {\n      return data.url\n    }\n\n    if (data.url) {\n      if (data.file) {\n        return URL.createObjectURL(data.file)\n      } else {\n        return data.url\n      }\n    } else {\n      return this.props.blockProps.data.src\n    }\n  }\n\n  defaultPlaceholder() {\n    return this.props.blockProps.config.image_caption_placeholder\n  }\n\n  defaultAspectRatio(data) {\n    if (data.aspect_ratio) {\n      return {\n        width: data.aspect_ratio['width'],\n        height: data.aspect_ratio['height'],\n        ratio: data.aspect_ratio['ratio']\n      }\n    } else {\n      return {\n        width: 0,\n        height: 0,\n        ratio: 100\n      }\n    }\n  }\n\n  getAspectRatio(w, h) {\n    let maxWidth = 1000\n    let maxHeight = 1000\n    let ratio = 0\n    let width = w // Current image width\n    let height = h // Current image height\n\n    // Check if the current width is larger than the max\n    if (width > maxWidth) {\n      ratio = maxWidth / width // get ratio for scaling image\n      height = height * ratio // Reset height to match scaled image\n      width = width * ratio // Reset width to match scaled image\n\n      // Check if current height is larger than max\n    } else if (height > maxHeight) {\n      ratio = maxHeight / height // get ratio for scaling image\n      width = width * ratio // Reset width to match scaled image\n      height = height * ratio // Reset height to match scaled image\n    }\n\n    let fill_ratio = height / width * 100\n    let result = { width, height, ratio: fill_ratio }\n    // console.log result\n    return result\n  }\n\n  // will update block state\n  updateData() {\n    let { blockProps } = this.props\n    let { block } = this.props\n    let { getEditorState } = this.props.blockProps\n    let { setEditorState } = this.props.blockProps\n    let data = block.getData()\n    let newData = data.merge(this.state).merge({ forceUpload: false })\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  replaceImg() {\n    this.img = new Image()\n    this.img.src = this.refs.image_tag.src\n    this.setState({\n      url: this.img.src })\n    let self = this\n    // exit only when not blob and not forceUload\n    if (!this.img.src.includes(\"blob:\") && !this.props.block.data.get(\"forceUpload\")) {\n      return\n    }\n    return this.img.onload = () => {\n      this.setState({\n        width: this.img.width,\n        height: this.img.height,\n        aspect_ratio: self.getAspectRatio(this.img.width, this.img.height)\n      })\n\n      return this.handleUpload()\n    }\n  }\n\n  startLoader() {\n    return this.setState({\n      loading: true })\n  }\n\n  stopLoader() {\n    return this.setState({\n      loading: false })\n  }\n\n  handleUpload() {\n    this.startLoader()\n    this.props.blockProps.addLock()\n    this.updateData()\n    return this.uploadFile()\n  }\n\n  componentDidMount() {\n    return this.replaceImg()\n  }\n\n  aspectRatio() {\n    return {\n      maxWidth: `${ this.state.aspect_ratio.width }`,\n      maxHeight: `${ this.state.aspect_ratio.height }`,\n      ratio: `${ this.state.aspect_ratio.height }`\n    }\n  }\n\n  updateDataSelection() {\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const newselection = getEditorState().getSelection().merge({\n      anchorKey: this.props.block.getKey(),\n      focusKey: this.props.block.getKey()\n    })\n\n    return setEditorState(EditorState.forceSelection(getEditorState(), newselection))\n  }\n\n  handleGrafFigureSelectImg(e) {\n    e.preventDefault()\n    return this.setState({ selected: true }, this.updateDataSelection)\n  }\n\n  //main_editor.onChange(main_editor.state.editorState)\n\n  coords() {\n    return {\n      maxWidth: `${ this.state.aspect_ratio.width }px`,\n      maxHeight: `${ this.state.aspect_ratio.height }px`\n    }\n  }\n\n  getBase64Image(img) {\n    let canvas = document.createElement(\"canvas\")\n    canvas.width = img.width\n    canvas.height = img.height\n    let ctx = canvas.getContext(\"2d\")\n    ctx.drawImage(img, 0, 0)\n    let dataURL = canvas.toDataURL(\"image/png\")\n\n    return dataURL\n  }\n\n  formatData() {\n    let formData = new FormData()\n    if (this.file) {\n      let formName = this.config.upload_formName || 'file'\n\n      formData.append(formName, this.file)\n      return formData\n    } else {\n      formData.append('url', this.props.blockProps.data.get(\"url\"))\n      return formData\n    }\n  }\n\n  getUploadUrl() {\n    let url = this.config.upload_url\n    if (typeof url === \"function\") {\n      return url()\n    } else {\n      return url\n    }\n  }\n\n  getUploadHeaders()  {\n   return this.config.upload_headers || {}\n  }\n\n  uploadFile() {\n    let handleUp\n    axios({\n      method: 'post',\n      url: this.getUploadUrl(),\n      headers: this.getUploadHeaders(),\n      data: this.formatData(),\n      onUploadProgress: e => {\n        return this.updateProgressBar(e)\n      }\n    }).then(result => {\n      this.uploadCompleted(result.data)\n      this.props.blockProps.removeLock()\n      this.stopLoader()\n      this.file = null\n\n      if (this.config.upload_callback) {\n        return this.config.upload_callback(response, this)\n      }\n    }).catch(error => {\n      this.props.blockProps.removeLock()\n      this.stopLoader()\n\n      console.log(`ERROR: got error uploading file ${ error }`)\n      if (this.config.upload_error_callback) {\n        return this.config.upload_error_callback(error, this)\n      }\n    })\n\n    return handleUp = json_response => {\n      return this.uploadCompleted(json_response, n)\n    }\n  }\n\n  uploadCompleted(json) {\n    return this.setState({ url: json.url }, this.updateData)\n  }\n\n  updateProgressBar(e) {\n    let complete = this.state.loading_progress\n    if (e.lengthComputable) {\n      complete = e.loaded / e.total * 100\n      complete = complete != null ? complete : { complete: 0 }\n      this.setState({\n        loading_progress: complete })\n      return console.log(`complete: ${ complete }`)\n    }\n  }\n\n  placeHolderEnabled() {\n    return this.state.enabled || this.props.block.getText()\n  }\n\n  placeholderText() {\n    if (this.placeHolderEnabled()) {\n      return \"\"\n    }\n    return \"Write caption for image (optional)\"\n  }\n\n  handleFocus(e) {\n    // console.log \"focus on placeholder\"\n    return setTimeout(() => {\n      return this.setState({\n        enabled: true })\n    }, 0)\n  }\n\n  render() {\n\n    return (\n      <div ref=\"image_tag2\" suppressContentEditableWarning={true}>\n        <div className=\"aspectRatioPlaceholder is-locked\" \n          style={this.coords()} \n          onClick={this.handleGrafFigureSelectImg}>\n          <div style={{ paddingBottom: `${ this.state.aspect_ratio.ratio }%` }} \n            className='aspect-ratio-fill' />\n          <img src={this.state.url} \n            ref=\"image_tag\" \n            height={this.state.aspect_ratio.height} \n            width={this.state.aspect_ratio.width} \n            className='graf-image' />\n          <Loader toggle={this.state.loading} \n            progress={this.state.loading_progress} />\n        </div>\n        <figcaption className='imageCaption' onMouseDown={this.handleFocus}>\n          { !this.state.enabled ? \n            <span className=\"danteDefaultPlaceholder\">\n              {this.placeholderText()}\n            </span> : undefined}\n          <EditorBlock {...Object.assign({}, this.props, { \n            \"editable\": true, \"className\": \"imageCaption\" })\n            } />\n        </figcaption>\n      </div>\n    )\n  }\n}\n\nclass Loader extends React.Component {\n\n  render() {\n    return (\n      <div>\n        { this.props.toggle\n          ? <div className=\"image-upoader-loader\">\n              <p>\n                { this.props.progress === 100\n                  ? \"processing image...\"\n                  : <span>\n                      <span>loading</span> { Math.round( this.props.progress ) }\n                    </span>\n                }\n              </p>\n            </div>\n          : undefined\n        }\n      </div>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/image.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nexport default class PlaceholderBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    this.placeholderText = this.placeholderText.bind(this)\n    this.placeholderFromProps = this.placeholderFromProps.bind(this)\n    this.defaultText = this.defaultText.bind(this)\n    this.handleFocus = this.handleFocus.bind(this)\n    this.classForDefault = this.classForDefault.bind(this)\n    this.state = {\n      enabled: false,\n      data: this.props.blockProps.data.toJS()\n    }\n  }\n\n  placeholderText() {\n    if (this.state.enabled) {\n      return \"\"\n    }\n    return this.props.blockProps.data.toJS().placeholder || this.placeholderFromProps() || this.defaultText()\n  }\n  //if @.props.blockProps.data then @.props.blockProps.data.placeholder else @defaultText()\n\n\n  placeholderFromProps() {\n    return this.props.block.toJS().placeholder\n  }\n\n  defaultText() {\n    return \"write something \"\n  }\n\n  componentDidMount() {}\n\n  handleFocus(e) {\n    // console.log \"focus on placeholder\"\n    return setTimeout(() => {\n      return this.setState({\n        enabled: true })\n    }, 0)\n  }\n\n  classForDefault() {\n    if (!this.state.enabled) {\n      return \"defaultValue defaultValue--root\"\n    } else {\n      return \"\"\n    }\n  }\n\n  render() {\n    return (\n      <span className={this.classForDefault()} onMouseDown={this.handleFocus}>\n        {this.placeholderText()}\n        <EditorBlock {...Object.assign({}, this.props, {\n          \"className\": \"imageCaption\",\n          \"placeholder\": \"escrive alalal\"\n        })} />\n      </span>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/placeholder.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorBlock } from 'draft-js'\n\nimport { updateDataOfBlock } from '../../model/index.js'\n\nimport axios from \"axios\"\n\nexport default class VideoBlock extends React.Component {\n  constructor(props) {\n    super(props)\n    //api_key = \"86c28a410a104c8bb58848733c82f840\"\n\n    this.updateData = this.updateData.bind(this)\n    this.dataForUpdate = this.dataForUpdate.bind(this)\n    this.state = { embed_data: this.defaultData() }\n  }\n\n  defaultData() {\n    let existing_data = this.props.block.getData().toJS()\n    return existing_data.embed_data || {}\n  }\n\n  // will update block state\n  updateData() {\n    const { block, blockProps } = this.props\n    const { getEditorState, setEditorState } = this.props.blockProps\n    const data = block.getData()\n    const newData = data.merge(this.state)\n    return setEditorState(updateDataOfBlock(getEditorState(), block, newData))\n  }\n\n  dataForUpdate() {\n    return this.props.blockProps.data.toJS()\n  }\n\n  componentDidMount() {\n\n    if (!this.props.blockProps.data) {\n      return\n    }\n    // ensure data isnt already loaded\n    if (!this.dataForUpdate().endpoint && !this.dataForUpdate().provisory_text) {\n      return\n    }\n\n    return axios({\n      method: 'get',\n      url: `${ this.dataForUpdate().endpoint }${ this.dataForUpdate().provisory_text }&scheme=https`\n    }).then(result => {\n      return this.setState({ embed_data: result.data } //JSON.parse(data.responseText)\n      , this.updateData)\n    }).catch(error => {\n      return console.log(\"TODO: error\")\n    })\n  }\n\n  classForImage() {\n    if (this.state.embed_data.thumbnail_url) {\n      return \"\"\n    } else {\n      return \"mixtapeImage--empty u-ignoreBlock\"\n    }\n  }\n\n  render() {\n    return (\n      <figure className='graf--figure graf--iframe graf--first' tabIndex='0'>\n        <div className='iframeContainer' \n          dangerouslySetInnerHTML={ { __html: this.state.embed_data.html } } />\n        <figcaption className='imageCaption'>\n          <EditorBlock {...Object.assign({}, this.props, { \"className\": \"imageCaption\" })} />\n        </figcaption>\n      </figure>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/blocks/video.js\n **/","import React from 'react'\n\nclass Debug extends React.Component {\n\n  constructor() {\n    super()\n\n    this.handleToggleReadOnly = this.handleToggleReadOnly.bind(this)\n    this.handleTestEmitAndDecode = this.handleTestEmitAndDecode.bind(this)\n    this.handleTestEmitTEXT = this.handleTestEmitTEXT.bind(this)\n    this.testEmitAndDecode = this.testEmitAndDecode.bind(this)\n    this.testEmitTEXT = this.testEmitTEXT.bind(this)\n    this.logState = this.logState.bind(this)\n    this.toggleDisplay = this.toggleDisplay.bind(this)\n    this.open = this.open.bind(this)\n    this.render = this.render.bind(this)\n    this.state = {\n      output: \"\",\n      display: \"none\"\n    }\n  }\n\n  handleToggleReadOnly(e) {\n    e.preventDefault()\n    this.props.editor.toggleEditable()\n    return false\n  }\n\n  handleTestEmitAndDecode(e) {\n    e.preventDefault()\n    return this.testEmitAndDecode()\n  }\n\n  handleTestEmitTEXT(e) {\n    e.preventDefault()\n    return this.testEmitTEXT()\n  }\n\n  testEmitAndDecode(e) {\n    const raw_as_json = this.props.editor.emitSerializedOutput()\n    this.props.editor.setState({ \n      editorState: this.props.editor.decodeEditorContent(raw_as_json) }, \n      this.logState(JSON.stringify(raw_as_json)))\n    return false\n  }\n\n  testEmitTEXT() {\n    const text = this.props.editor.getTextFromEditor()\n    return this.logState(text)\n  }\n\n  logState(raw) {\n    return this.setState({ output: raw }, this.open)\n  }\n\n  toggleDisplay(e) {\n    e.preventDefault()\n    const d = this.state.display === \"block\" ? \"none\" : this.state.display\n    return this.setState({\n      display: d })\n  }\n\n  open() {\n    return this.setState({\n      display: \"block\" })\n  }\n\n  render() {\n    return (\n      <div>\n        <div className=\"debugControls\">\n          <ul>\n            <li> LOCKS: { this.props.editor.state.locks } </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleToggleReadOnly }>\n                EDITABLE: { this.props.editor.state.read_only ? 'NO' : 'YES' }\n              </a>\n            </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleTestEmitTEXT }>EDITOR TEXT</a>\n            </li>\n            <li>\n              <a href=\"#\" onClick={ this.handleTestEmitAndDecode }>EDITOR STATE</a>\n            </li>\n          </ul>\n        </div>\n        <div className=\"debugZone\" style={ { display: this.state.display } }>\n          <a href=\"#\" className=\"dante-debug-close close\" onClick={ this.toggleDisplay } />\n          <div className=\"debugOutput\">\n            <h2>EDITOR OUTPUT</h2>\n            {\n              this.state.output.length > 0\n              ? <pre>{ this.state.output }</pre>\n              : undefined\n            }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Debug\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/debug.js\n **/","import React from 'react'\nimport { Entity } from 'draft-js'\n\nexport default class Link extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this._validateLink = this._validateLink.bind(this)\n    this._checkProtocol = this._checkProtocol.bind(this)\n    this._showPopLinkOver = this._showPopLinkOver.bind(this)\n    this._hidePopLinkOver = this._hidePopLinkOver.bind(this)\n    this.isHover = false\n  }\n\n  _validateLink() {\n    const pattern = new RegExp('^(https?:\\/\\/)?' + // protocol\n    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name\n    '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address\n    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path\n    '(\\?[&a-z\\d%_.~+=-]*)?' + // query string\n    '(\\#[-a-z\\d_]*)?$', 'i') // fragment locater\n    if (!pattern.test(str)) {\n      alert(\"Please enter a valid URL.\")\n      return false\n    } else {\n      return true\n    }\n  }\n\n  _checkProtocol() {\n    return console.log(\"xcvd\")\n  }\n\n  _showPopLinkOver(e) {\n    if (!this.data.showPopLinkOver) {\n      return\n    }\n    return this.data.showPopLinkOver(this.refs.link)\n  }\n\n  _hidePopLinkOver(e) {\n    if (!this.data.hidePopLinkOver) {\n      return\n    }\n    return this.data.hidePopLinkOver()\n  }\n\n  render() {\n    this.data = Entity.get(this.props.entityKey).getData()\n\n    return (\n      <a\n        ref=\"link\"\n        href={ this.data.url }\n        className=\"markup--anchor\"\n        onMouseOver={ this._showPopLinkOver }\n        onMouseOut={ this._hidePopLinkOver }\n      >\n        { this.props.children }\n      </a>\n    )\n  }\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/decorators/link.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { \n  Entity, \n  RichUtils, \n  AtomicBlockUtils, \n  EditorState \n  } from 'draft-js'\n\nimport { \n  addNewBlock, \n  resetBlockWithType, \n  updateDataOfBlock, \n  getCurrentBlock, \n  getNode } from '../../model/index.js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nclass DanteInlineTooltip extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this._toggleScaled = this._toggleScaled.bind(this)\n    this.scale = this.scale.bind(this)\n    this.collapse = this.collapse.bind(this)\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n    this.clickOnFileUpload = this.clickOnFileUpload.bind(this)\n    this.handlePlaceholder = this.handlePlaceholder.bind(this)\n    this.insertImage = this.insertImage.bind(this)\n    this.handleFileInput = this.handleFileInput.bind(this)\n    this.widgets = this.widgets.bind(this)\n    this.clickHandler = this.clickHandler.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.state = {\n      position: { top: 0, left: 0 },\n      show: false,\n      scaled: false\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  _toggleScaled(ev) {\n    if (this.state.scaled) {\n      return this.collapse()\n    } else {\n      return this.scale()\n    }\n  }\n\n  scale() {\n    return this.setState({\n      scaled: true })\n  }\n\n  collapse() {\n    return this.setState({\n      scaled: false })\n  }\n\n  componentWillReceiveProps(newProps) {\n    return this.collapse()\n  }\n\n  activeClass() {\n    //if @props.show then \"is-active\" else \"\"\n    if (this.isActive()) {\n      return \"is-active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  isActive() {\n    return this.state.show\n  }\n\n  scaledClass() {\n    if (this.state.scaled) {\n      return \"is-scaled\"\n    } else {\n      return \"\"\n    }\n  }\n\n  scaledWidth() {\n    if (this.state.scaled) {\n      return \"124\"\n    } else {\n      return \"0\"\n    }\n  }\n\n  clickOnFileUpload() {\n    this.refs.fileInput.click()\n    this.collapse()\n    return this.hide()\n  }\n\n  handlePlaceholder(input) {\n    let opts = {\n      type: input.widget_options.insert_block,\n      placeholder: input.options.placeholder,\n      endpoint: input.options.endpoint\n    }\n\n    return this.props.onChange(resetBlockWithType(this.props.editorState, 'placeholder', opts))\n  }\n\n  insertImage(file) {\n    let opts = {\n      url: URL.createObjectURL(file),\n      file\n    }\n\n    return this.props.onChange(addNewBlock(this.props.editorState, 'image', opts))\n  }\n\n  handleFileInput(e) {\n    let fileList = e.target.files\n    // TODO: support multiple file uploads\n    /*\n    Object.keys(fileList).forEach (o)=>\n      @.insertImage(fileList[0])\n    */\n    return this.insertImage(fileList[0])\n  }\n\n  widgets() {\n    return this.props.editor.widgets\n  }\n\n  clickHandler(e, type) {\n    let request_block = this.widgets().find(o => o.icon === type)\n\n    switch (request_block.widget_options.insertion) {\n      case \"upload\":\n        return this.clickOnFileUpload(e, request_block)\n      case \"placeholder\":\n        return this.handlePlaceholder(request_block)\n      default:\n        return console.log(`WRONG TYPE FOR ${ request_block.widget_options.insertion }`)\n    }\n  }\n\n  getItems() {\n    return this.widgets().filter(o => {\n      return o.widget_options.displayOnInlineTooltip\n    })\n  }\n\n  isDescendant(parent, child) {\n    let node = child.parentNode\n    while (node !== null) {\n      if (node === parent) {\n        return true\n      }\n      node = node.parentNode\n    }\n    return false\n  }\n\n  relocate() {\n    let { editorState } = this.props\n\n    if (editorState.getSelection().isCollapsed()) {\n\n      let currentBlock = getCurrentBlock(editorState)\n      let blockType = currentBlock.getType()\n\n      let contentState = editorState.getCurrentContent()\n      let selectionState = editorState.getSelection()\n\n      let block = contentState.getBlockForKey(selectionState.anchorKey)\n\n      let nativeSelection = getSelection(window)\n      if (!nativeSelection.rangeCount) {\n        return\n      }\n\n      let node = getNode()\n\n      let selectionBoundary = getSelectionRect(nativeSelection)\n      let coords = selectionBoundary //utils.getSelectionDimensions(node)\n\n      let parent = ReactDOM.findDOMNode(this.props.editor)\n      let parentBoundary = parent.getBoundingClientRect()\n\n      // hide if selected node is not in editor\n      // debugger\n      //console.log @isDescendant(parent, nativeSelection.anchorNode)\n\n      if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n        this.hide()\n        return\n      }\n\n      // checkeamos si esta vacio\n      this.display(block.getText().length === 0 && blockType === \"unstyled\")\n      return this.setPosition({\n        top: coords.top + window.scrollY,\n        left: coords.left + window.scrollX - 60\n      })\n\n      /*\n      @refs.image_popover.display(blockType is \"image\")\n       if blockType is \"image\"\n        selectionBoundary = node.anchorNode.parentNode.parentNode.parentNode.getBoundingClientRect()\n        *el = document.querySelector(\"#dante_image_popover\")\n        el = @refs.image_popover.refs.image_popover\n        padd   = el.offsetWidth / 2\n        @refs.image_popover.setPosition\n          top: selectionBoundary.top - parentBoundary.top + 60\n          left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n\n        *@setState\n        *  image_popover_position:\n        *    top: selectionBoundary.top - parentBoundary.top + 60\n        *    left: selectionBoundary.left + (selectionBoundary.width / 2) - padd\n        *\n      */\n    } else {\n      return this.hide()\n    }\n  }\n\n  render() {\n    return (\n      <div\n        className={ `inlineTooltip ${ this.activeClass() } ${ this.scaledClass() }` }\n        style={ this.state.position }\n      >\n        <button\n          className=\"inlineTooltip-button control\"\n          title=\"Close Menu\"\n          data-action=\"inline-menu\"\n          onClick={ this._toggleScaled }\n        >\n          <span className=\"tooltip-icon dante-icon-plus\" />\n        </button>\n        <div\n           className=\"inlineTooltip-menu\"\n           style={ { width: `${ this.scaledWidth() }px` } }\n         >\n          { this.getItems().map( (item, i) => {\n            return  <InlineTooltipItem\n                      item={ item }\n                      key={ i }\n                      clickHandler={ this.clickHandler }\n                    />\n            })\n          }\n          <input\n           type=\"file\"\n           style={ { display: 'none' } }\n           ref=\"fileInput\"\n           multiple=\"multiple\"\n           onChange={ this.handleFileInput }\n         />\n        </div>\n      </div>\n    )\n  }\n}\n\nclass InlineTooltipItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.clickHandler = this.clickHandler.bind(this)\n  }\n\n  clickHandler(e) {\n    e.preventDefault()\n    return this.props.clickHandler(e, this.props.item.icon)\n  }\n\n  render() {\n    return (\n      <button\n        className=\"inlineTooltip-button scale\"\n        title={ this.props.title }\n        onMouseDown={ this.clickHandler }\n      >\n        <span className={ `tooltip-icon dante-icon-${ this.props.item.icon }` } />\n      </button>\n    )\n  }\n}\n\nexport default DanteInlineTooltip\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/addButton.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { Entity, RichUtils, AtomicBlockUtils, EditorState } from 'draft-js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nimport { getCurrentBlock, getNode } from '../../model/index.js'\n\nclass DanteImagePopover extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this._toggleScaled = this._toggleScaled.bind(this)\n    this.scale = this.scale.bind(this)\n    this.collapse = this.collapse.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.componentWillReceiveProps = this.componentWillReceiveProps.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n    this.state = {\n      position: {\n        top: 0,\n        left: 0\n      },\n      show: false,\n      scaled: false,\n      buttons: [{ type: \"left\" }, \n                { type: \"center\"}, \n                { type: \"fill\" }, \n                { type: \"wide\" }]\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  _toggleScaled(ev) {\n    if (this.state.scaled) {\n      return this.collapse()\n    } else {\n      return this.scale()\n    }\n  }\n\n  scale() {\n    return this.setState({\n      scaled: true })\n  }\n\n  collapse() {\n    return this.setState({\n      scaled: false })\n  }\n\n  relocate() {\n    let { editorState } = this.props\n\n    if (editorState.getSelection().isCollapsed()) {\n\n      let currentBlock = getCurrentBlock(editorState)\n      let blockType = currentBlock.getType()\n\n      let contentState = editorState.getCurrentContent()\n      let selectionState = editorState.getSelection()\n\n      let block = contentState.getBlockForKey(selectionState.anchorKey)\n\n      let nativeSelection = getSelection(window)\n      if (!nativeSelection.rangeCount) {\n        return\n      }\n\n      let node = getNode()\n\n      let selectionBoundary = getSelectionRect(nativeSelection)\n      let coords = selectionBoundary\n\n      let parent = ReactDOM.findDOMNode(this.props.editor)\n      let parentBoundary = parent.getBoundingClientRect()\n\n      this.display(blockType === \"image\")\n\n      if (blockType === \"image\") {\n        selectionBoundary = node.anchorNode.parentNode.parentNode\n                                           .parentNode.getBoundingClientRect()\n        let el = this.refs.image_popover\n        let padd = el.offsetWidth / 2\n        return this.setPosition({\n          top: selectionBoundary.top - parentBoundary.top + 60,\n          left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n        })\n      }\n    } else {\n      return this.hide()\n    }\n  }\n\n  componentWillReceiveProps(newProps) {\n    return this.collapse()\n  }\n\n  getStyle() {\n    if (!this.state.position) {\n      return {}\n    }\n  }\n\n  handleClick(item) {\n    return this.props.editor.setDirection(item.type)\n  }\n\n  render() {\n    return (\n      <div\n        ref=\"image_popover\"\n        className={ `dante-popover popover--Aligntooltip popover--top popover--animated ${ this.state.show ? 'is-active' : undefined }` }\n        style={ \n          { top: this.state.position.top,\n            left: this.state.position.left }\n          }\n      >\n        <div className='popover-inner'>\n          <ul className='dante-menu-buttons'>\n            { this.state.buttons.map( (item, i) => {\n                return  <DanteImagePopoverItem\n                          item={ item }\n                          handleClick={ this.handleClick }\n                          key={ i }\n                        />\n              })\n            }\n          </ul>\n        </div>\n        <div className='popover-arrow' />\n      </div>\n    )\n  }\n}\n\nclass DanteImagePopoverItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.handleClick = this.handleClick.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  handleClick(e) {\n    e.preventDefault()\n    return this.props.handleClick(this.props.item)\n  }\n\n  render() {\n    return <li \n      className={`dante-menu-button align-${ this.props.item.type }`} \n      onMouseDown={this.handleClick}>\n        <span className={`tooltip-icon dante-icon-image-${ this.props.item.type }`} />\n    </li>\n  }\n}\n\nexport default DanteImagePopover\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/image.js\n **/","\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { getCurrentBlock } from '../../model/index.js'\n\nclass DanteAnchorPopover extends React.Component {\n\n  constructor(props) {\n\n    super(props)\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this.render = this.render.bind(this)\n    this.state = {\n      position: {\n        top: 0,\n        left: 0\n      },\n      show: false,\n      url: \"\"\n    }\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      show: false })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  relocate(node) {\n    if (node == null) {\n      node = null\n    }\n    if (!node) {\n      return\n    }\n\n    let { editorState } = this.props\n    let currentBlock = getCurrentBlock(editorState)\n    let blockType = currentBlock.getType()\n\n    let contentState = editorState.getCurrentContent()\n    let selectionState = editorState.getSelection()\n\n    let selectionBoundary = node.getBoundingClientRect()\n    let coords = selectionBoundary\n\n    let el = this.refs.dante_popover\n    let padd = el.offsetWidth / 2\n\n    let parent = ReactDOM.findDOMNode(this.props.editor)\n    let parentBoundary = parent.getBoundingClientRect()\n\n    return {\n      top: selectionBoundary.top - parentBoundary.top + 160,\n      left: selectionBoundary.left + selectionBoundary.width / 2 - padd\n    }\n  }\n\n  render() {\n    let { position } = this.state\n    let style = {\n      left: position.left,\n      top: position.top,\n      visibility: `${ this.state.show ? 'visible' : 'hidden' }`\n    }\n    return (\n      <div\n        ref=\"dante_popover\"\n        className='dante-popover popover--tooltip popover--Linktooltip popover--bottom is-active'\n        style={ style }\n        onMouseOver={ this.props.handleOnMouseOver }\n        onMouseOut={ this.props.handleOnMouseOut }\n      >\n        <div className='popover-inner'>\n          <a href={ this.props.url } target='_blank'>\n            { this.state.url }\n          </a>\n        </div>\n        <div className='popover-arrow' />\n      </div>\n    )\n  }\n}\n\nexport default DanteAnchorPopover\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/link.js\n **/","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { \n  convertToRaw, \n  CompositeDecorator, \n  getVisibleSelectionRect, \n  getDefaultKeyBinding, \n  getSelectionOffsetKeyForNode, \n  KeyBindingUtil, \n  ContentState, \n  Editor, \n  EditorState, \n  Entity, \n  RichUtils } from 'draft-js'\n\nimport { getSelectionRect, getSelection } from \"../../utils/selection.js\"\n\nimport { getCurrentBlock } from '../../model/index.js'\n\nclass DanteTooltip extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this._clickInlineHandler = this._clickInlineHandler.bind(this)\n    this.display = this.display.bind(this)\n    this.show = this.show.bind(this)\n    this.hide = this.hide.bind(this)\n    this.relocate = this.relocate.bind(this)\n    this._clickBlockHandler = this._clickBlockHandler.bind(this)\n    this.displayLinkMode = this.displayLinkMode.bind(this)\n    this.displayActiveMenu = this.displayActiveMenu.bind(this)\n    this._enableLinkMode = this._enableLinkMode.bind(this)\n    this._disableLinkMode = this._disableLinkMode.bind(this)\n    this.handleInputEnter = this.handleInputEnter.bind(this)\n    this.confirmLink = this.confirmLink.bind(this)\n    this.inlineItems = this.inlineItems.bind(this)\n    this.blockItems = this.blockItems.bind(this)\n    this.getDefaultValue = this.getDefaultValue.bind(this)\n    this.getVisibleSelectionRect = getVisibleSelectionRect\n    this.state = {\n      link_mode: false,\n      show: false,\n      position: {}\n    }\n  }\n\n  _clickInlineHandler(ev, style) {\n    ev.preventDefault()\n\n    this.props.onChange(RichUtils.toggleInlineStyle(this.props.editorState, style))\n\n    return setTimeout(() => {\n      return this.relocate()\n    }, 0)\n  }\n\n  display(b) {\n    if (b) {\n      return this.show()\n    } else {\n      return this.hide()\n    }\n  }\n\n  show() {\n    return this.setState({\n      show: true })\n  }\n\n  hide() {\n    return this.setState({\n      link_mode: false,\n      show: false\n    })\n  }\n\n  setPosition(coords) {\n    return this.setState({\n      position: coords })\n  }\n\n  isDescendant(parent, child) {\n    let node = child.parentNode\n    while (node !== null) {\n      if (node === parent) {\n        return true\n      }\n      node = node.parentNode\n    }\n    return false\n  }\n\n  relocate() {\n\n    let currentBlock = getCurrentBlock(this.props.editorState)\n    let blockType = currentBlock.getType()\n    // display tooltip only for unstyled\n\n    if (this.props.configTooltip.selectionElements.indexOf(blockType) < 0) {\n      this.hide()\n      return\n    }\n\n    if (this.state.link_mode) {\n      return\n    }\n    if (!this.state.show) {\n      return\n    }\n\n    let el = this.refs.dante_menu\n    let padd = el.offsetWidth / 2\n\n    let nativeSelection = getSelection(window)\n    if (!nativeSelection.rangeCount) {\n      return\n    }\n\n    let selectionBoundary = getSelectionRect(nativeSelection)\n\n    let parent = ReactDOM.findDOMNode(this.props.editor)\n    let parentBoundary = parent.getBoundingClientRect()\n\n    // hide if selected node is not in editor\n    if (!this.isDescendant(parent, nativeSelection.anchorNode)) {\n      this.hide()\n      return\n    }\n\n    let top = selectionBoundary.top - parentBoundary.top - -90 - 5\n    let left = selectionBoundary.left + selectionBoundary.width / 2 - padd\n\n    if (!top || !left) {\n      return\n    }\n\n    // console.log \"SET SHOW FOR TOOLTIP INSERT MENU\"\n    return this.setState({\n      show: true,\n      position: {\n        left,\n        top\n      }\n    })\n  }\n\n  _clickBlockHandler(ev, style) {\n    ev.preventDefault()\n\n    this.props.onChange(RichUtils.toggleBlockType(this.props.editorState, style))\n\n    return setTimeout(() => {\n      return this.relocate()\n    }, 0)\n  }\n\n  displayLinkMode() {\n    if (this.state.link_mode) {\n      return \"dante-menu--linkmode\"\n    } else {\n      return \"\"\n    }\n  }\n\n  displayActiveMenu() {\n    if (this.state.show) {\n      return \"dante-menu--active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  _enableLinkMode(ev) {\n    ev.preventDefault()\n    return this.setState({\n      link_mode: true })\n  }\n\n  _disableLinkMode(ev) {\n    ev.preventDefault()\n    return this.setState({\n      link_mode: false,\n      url: \"\"\n    })\n  }\n\n  hideMenu() {\n    return this.hide()\n  }\n\n  handleInputEnter(e) {\n    if (e.which === 13) {\n      return this.confirmLink(e)\n    }\n  }\n\n  confirmLink(e) {\n    e.preventDefault()\n    let { editorState } = this.props\n    let urlValue = e.currentTarget.value\n    let contentState = editorState.getCurrentContent()\n    let selection = editorState.getSelection()\n\n    let opts = {\n      url: urlValue,\n      showPopLinkOver: this.props.showPopLinkOver,\n      hidePopLinkOver: this.props.hidePopLinkOver\n    }\n\n    let entityKey = Entity.create('LINK', 'MUTABLE', opts)\n\n    if (selection.isCollapsed()) {\n      console.log(\"COLLAPSED SKIPPING LINK\")\n      return\n    }\n\n    this.props.onChange(RichUtils.toggleLink(editorState, selection, entityKey))\n\n    return this._disableLinkMode(e)\n  }\n\n  getPosition() {\n    let pos = this.state.position\n    return pos\n  }\n\n  inlineItems() {\n    return this.props.widget_options.block_types.filter(o => {\n      return o.type === \"inline\"\n    })\n  }\n\n  blockItems() {\n    return this.props.widget_options.block_types.filter(o => {\n      return o.type === \"block\"\n    })\n  }\n\n  getDefaultValue() {\n    if (this.refs.dante_menu_input) {\n      this.refs.dante_menu_input.value = \"\"\n    }\n\n    let currentBlock = getCurrentBlock(this.props.editorState)\n    let blockType = currentBlock.getType()\n    let selection = this.props.editor.state.editorState.getSelection()\n    let selectedEntity = null\n    let defaultUrl = null\n    return currentBlock.findEntityRanges(character => {\n      let entityKey = character.getEntity()\n      selectedEntity = entityKey\n      return entityKey !== null && Entity.get(entityKey).getType() === 'LINK'\n    }, (start, end) => {\n      let selStart = selection.getAnchorOffset()\n      let selEnd = selection.getFocusOffset()\n      if (selection.getIsBackward()) {\n        selStart = selection.getFocusOffset()\n        selEnd = selection.getAnchorOffset()\n      }\n\n      if (start === selStart && end === selEnd) {\n        defaultUrl = Entity.get(selectedEntity).getData().url\n        return this.refs.dante_menu_input.value = defaultUrl\n      }\n    })\n  }\n\n  render() {\n    return (\n      <div\n        id=\"dante-menu\"\n        ref=\"dante_menu\"\n        className={ `dante-menu ${ this.displayActiveMenu() } ${ this.displayLinkMode() }` }\n        style={ this.getPosition() }\n      >\n        <div className=\"dante-menu-linkinput\">\n          <input\n            className=\"dante-menu-input\"\n            ref=\"dante_menu_input\"\n            placeholder=\"Paste or type a link\"\n            onKeyPress={ this.handleInputEnter }\n            defaultValue={ this.getDefaultValue() }\n          />\n          <div className=\"dante-menu-button\" onMouseDown={ this._disableLinkMode } />\n        </div>\n        <ul className=\"dante-menu-buttons\">\n          { this.blockItems().map( (item, i) => {\n              return  <DanteTooltipItem\n                        key={ i }\n                        item={ item }\n                        handleClick={ this._clickBlockHandler }\n                        editorState={ this.props.editorState }\n                        type=\"block\"\n                        currentStyle={ this.props.editorState.getCurrentInlineStyle }\n                      />\n            })\n          }\n          <DanteTooltipLink\n            editorState={ this.props.editorState }\n            enableLinkMode={ this._enableLinkMode }\n          />\n            { this.inlineItems().map( (item, i) => {\n              return  <DanteTooltipItem\n                        key={ i }\n                        item={ item }\n                        type=\"inline\"\n                        editorState={ this.props.editorState }\n                        handleClick={ this._clickInlineHandler }\n                      />\n            })\n          }\n        </ul>\n      </div>\n    )\n  }\n}\n\nclass DanteTooltipItem extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.handleClick = this.handleClick.bind(this)\n    this.activeClass = this.activeClass.bind(this)\n    this.isActive = this.isActive.bind(this)\n    this.activeClassInline = this.activeClassInline.bind(this)\n    this.activeClassBlock = this.activeClassBlock.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n  handleClick(ev) {\n    return this.props.handleClick(ev, this.props.item.style)\n  }\n\n  activeClass() {\n    if (this.isActive()) {\n      return \"active\"\n    } else {\n      return \"\"\n    }\n  }\n\n  isActive() {\n    if (this.props.type === \"block\") {\n      return this.activeClassBlock()\n    } else {\n      return this.activeClassInline()\n    }\n  }\n\n  activeClassInline() {\n    if (!this.props.editorState) {\n      return\n    }\n    //console.log @props.item\n    return this.props.editorState.getCurrentInlineStyle().has(this.props.item.style)\n  }\n\n  activeClassBlock() {\n    //console.log \"EDITOR STATE\", @props.editorState\n    if (!this.props.editorState) {\n      return\n    }\n    let selection = this.props.editorState.getSelection()\n    let blockType = this.props.editorState.getCurrentContent().getBlockForKey(selection.getStartKey()).getType()\n    return this.props.item.style === blockType\n  }\n\n  render() {\n    return (\n      <li className={ `dante-menu-button ${ this.activeClass() }` } onMouseDown={ this.handleClick }>\n        <i className={ `dante-icon dante-icon-${ this.props.item.label }` } data-action=\"bold\" />\n      </li>\n    )\n  }\n}\n\nclass DanteTooltipLink extends React.Component {\n\n  constructor(...args) {\n    super(...args)\n    this.promptForLink = this.promptForLink.bind(this)\n  }\n\n  promptForLink(ev) {\n    let selection = this.props.editorState.getSelection()\n    if (!selection.isCollapsed()) {\n      return this.props.enableLinkMode(ev)\n    }\n  }\n\n  render() {\n    return (\n      <li className=\"dante-menu-button\" onMouseDown={ this.promptForLink }>\n        <i className=\"dante-icon icon-createlink\" data-action=\"createlink\">link</i>\n      </li>\n    )\n  }\n}\n\nexport default DanteTooltip\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/components/popovers/toolTip.js\n **/","import { Entity } from 'draft-js'\n\n//TODO: what the f*ck is happening here? ;-;\nconst findEntities = (entityType, instance, contentBlock, callback) => {\n  return contentBlock.findEntityRanges((function(_this) {\n    return function(character) {\n      var entityKey, opts, res\n      entityKey = character.getEntity()\n      return (res = entityKey !== null && Entity.get(entityKey).getType() === entityType, res ? (opts = {\n        showPopLinkOver: instance.showPopLinkOver,\n        hidePopLinkOver: instance.hidePopLinkOver\n      }, Entity.mergeData(entityKey, opts)) : void 0, res)\n    }\n  })(this), callback)\n}\n\nexport default findEntities\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/find_entities.js\n **/","import { ContentState, genKey, Entity, CharacterMetadata, ContentBlock, convertFromHTML, getSafeBodyFromHTML } from 'draft-js'\n\nimport { List, OrderedSet, Repeat, fromJS } from 'immutable'\n\n\n// { compose\n// }  = require('underscore')\n\n// underscore compose function\nlet compose = function() {\n  let args = arguments\n  let start = args.length - 1\n  return function() {\n    let i = start\n    let result = args[start].apply(this, arguments)\n    while (i--) {\n      result = args[i].call(this, result)\n    }\n    return result\n  }\n}\n\n// from https://gist.github.com/N1kto/6702e1c2d89a33a15a032c234fc4c34e\n\n/*\n * Helpers\n */\n\n// Prepares img meta data object based on img attributes\nlet getBlockSpecForElement = imgElement=> {\n  return {\n    contentType: 'image',\n    imgSrc: imgElement.getAttribute('src')\n  }\n}\n\n// Wraps meta data in HTML element which is 'understandable' by Draft, I used <blockquote />.\nlet wrapBlockSpec = blockSpec=> {\n  if (blockSpec === null) {\n    return null\n  }\n\n  let tempEl = document.createElement('blockquote')\n  // stringify meta data and insert it as text content of temp HTML element. We will later extract\n  // and parse it.\n  tempEl.innerText = JSON.stringify(blockSpec)\n  return tempEl\n}\n\n// Replaces <img> element with our temp element\nlet replaceElement = (oldEl, newEl)=> {\n  if (!(newEl instanceof HTMLElement)) {\n    return\n  }\n\n  let upEl = getUpEl(oldEl)\n  //parentNode = oldEl.parentNode\n  //return parentNode.replaceChild(newEl, oldEl)\n  return upEl.parentNode.insertBefore(newEl, upEl)\n}\n\nvar getUpEl = el=> {\n  let original_el = el\n  while (el.parentNode) {\n    if (el.parentNode.tagName !== 'BODY') {\n      el = el.parentNode\n    }\n    if (el.parentNode.tagName === 'BODY') { return el }\n  }\n}\n\nlet elementToBlockSpecElement = compose(wrapBlockSpec, getBlockSpecForElement)\n\nlet imgReplacer = imgElement=> {\n  return replaceElement(imgElement, elementToBlockSpecElement(imgElement))\n}\n\n/*\n * Main function\n */\n\n// takes HTML string and returns DraftJS ContentState\nlet customHTML2Content = function(HTML, blockRn){\n  let tempDoc = new DOMParser().parseFromString(HTML, 'text/html')\n  // replace all <img /> with <blockquote /> elements\n\n  let a = tempDoc.querySelectorAll('img').forEach( item=> imgReplacer(item))\n\n  // use DraftJS converter to do initial conversion. I don't provide DOMBuilder and\n  // blockRenderMap arguments here since it should fall back to its default ones, which are fine\n  console.log(tempDoc.body.innerHTML)\n  let contentBlocks = convertFromHTML(tempDoc.body.innerHTML,\n        getSafeBodyFromHTML,\n        blockRn\n  )\n\n  // now replace <blockquote /> ContentBlocks with 'atomic' ones\n  contentBlocks = contentBlocks.map(function(block){\n    let newBlock\n    console.log(\"CHECK BLOCK\", block.getType())\n    if (block.getType() !== 'blockquote') {\n      return block\n    }\n\n    let json = \"\"\n    try {\n      json = JSON.parse(block.getText())\n    } catch (error) {\n      return block\n    }\n\n    return newBlock = block.merge({\n      type: \"image\",\n      text: \"\",\n      data: {\n        url: json.imgSrc,\n        forceUpload: true\n      }\n    })\n  })\n\n  tempDoc = null\n  return ContentState.createFromBlockArray(contentBlocks)\n}\n\n\nexport default customHTML2Content\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/html2content.js\n **/","import axios from \"axios\"\nimport Immutable from 'immutable'\n\nclass SaveBehavior {\n  constructor(options) {\n    this.getLocks = options.getLocks\n    this.config = options.config\n    this.editorContent = options.editorContent\n    this.editorState = options.editorState\n  }\n\n  handleStore(ev){\n    return this.store()\n  }\n\n  store(content){\n    if (!this.config.data_storage.url) { return }\n    if (this.getLocks() > 0) { return }\n\n    clearTimeout(this.timeout)\n\n    return this.timeout = setTimeout(() => {\n      return this.checkforStore(content)\n    }\n    , this.config.data_storage.interval)\n  }\n\n  getTextFromEditor(content){\n    return content.blocks.map(o=> {\n        return o.text\n      }\n    )\n      .join(\"\\n\")\n  }\n\n  getUrl() {\n    let { url } = this.config.data_storage\n    if (typeof(url) === \"function\") { return url() } else { return url }\n  }\n\n  getMethod() {\n    let { method } = this.config.data_storage\n    if (typeof(method) === \"function\") { return method() } else { return method }\n  }\n\n\n  checkforStore(content){\n    // ENTER DATA STORE\n    let isChanged = !Immutable.is(Immutable.fromJS(this.editorContent), Immutable.fromJS(content))\n    // console.log(\"CONTENT CHANGED:\", isChanged)\n\n    if (!isChanged) { return }\n\n    if (this.config.xhr.before_handler) { this.config.xhr.before_handler() }\n    // console.log \"SAVING TO: #{@getMethod()} #{@getUrl()}\"\n\n    return axios({\n      method: this.getMethod(),\n      url: this.getUrl(),\n      data: {\n        editor_content: JSON.stringify(content),\n        text_content: this.getTextFromEditor(content)\n      }\n    })\n    .then(result=> {\n      // console.log \"STORING CONTENT\", result\n      if (this.config.data_storage.success_handler) { this.config.data_storage.success_handler(result) }\n      if (this.config.xhr.success_handler) { return this.config.xhr.success_handler(result) }\n    }\n    )\n    .catch(error=> {\n      // console.log(\"ERROR: got error saving content at #{@config.data_storage.url} - #{error}\")\n      if (this.config.xhr.failure_handler) { return this.config.xhr.failure_handler(error) }\n    }\n    )\n  }\n}\n\n\nexport default SaveBehavior\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/save_content.js\n **/","module.exports = __webpack_public_path__ + \"fonts/dante.svg\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/dante.svg\n ** module id = 371\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/dante.ttf\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/dante.ttf\n ** module id = 372\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/dante.woff\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/dante.woff\n ** module id = 373\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/fontello.svg\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/fontello.svg\n ** module id = 374\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/fontello.ttf\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/fontello.ttf\n ** module id = 375\n ** module chunks = 1\n **/","module.exports = __webpack_public_path__ + \"fonts/fontello.woff\";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/styles/fonts/dante/fontello.woff\n ** module id = 376\n ** module chunks = 1\n **/"],"sourceRoot":""}